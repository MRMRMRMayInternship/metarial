window.__loadJs&&window.__loadJs('/modules/courseDetail/mod.main.live.910be7cc.js',1);
/*!@tencent/im-edu-report/edu-report-nolocal*/
;define("@tencent/im-edu-report/edu-report-nolocal",function(){function r(r,e){if(c.table)try{if(window.localStorage&&1==window.localStorage.tdwFlag)for(var t=0,n=e.length;n>t;t++){for(var o={},i=0,a=r.length;a>i;i++)""!=e[t][i]&&(o[r[i]]=e[t][i]);c.table([o])}}catch(f){}}function e(){if(v)return v;var r=[],e=10,t=0;return v=function(){var n=t++%e;return r[n]||(r[n]=new Image)}}function t(r,t){if(r){var n=[];if(t)for(var o in t)t[o]&&n.push(o+"="+t[o]);var r=r+n.join("&");return e()().src=r}}var n={},o={TABLE:"dc00149",TIMER:300,DELAY_REPORT:!1,DATA:{}},i=[],a=[];"object"!=typeof JSON&&(JSON={}),"function"!=typeof JSON.stringify&&(JSON.stringify=function(){});var f={TDW:"//cgi.pub.qq.com/report/tdw/report?"},v=null,c=console||{},u=function(r,e,n,i,a){if(r&&e&&n){var v={table:r||o.TABLE,fields:encodeURIComponent(JSON.stringify(e)),datas:encodeURIComponent(JSON.stringify(n)),pr_ip:i||"obj3",pr_t:a||"ts",t:+new Date};t(f.TDW,v)}},l=Object.prototype.toString,A={},s=[],g=[],p=o.TABLE,E=null,h=function(e,t,n){if(!e)throw"params can not be null";t=t||o.DELAY_REPORT,p=n||p;var f;switch(l.call(e)){case"[object Array]":f=e;break;case"[object Object]":if(t){var v=[],c=[];for(var h in e)"obj3"!==h&&"ts"!==h&&(v.push(h),c.push(e[h]));return v=S(v,i),c=d([c],a,v,i),r(v,c),u(p,v,c,e.obj3,e.ts)}f=[e]}for(var h=0,T=f.length;T>h;h++){var w=f[h],B=[];g.push(B);for(var _ in w){var b;_ in A?(b=A[_],s[b]=_):(s.push(_),A[_]=b=s.length-1),B[b]=w[_]||""}}if(t)this.toreport();else{var R=this;!E&&o.TIMER&&(E=window.setTimeout(function(){R.toreport()},o.TIMER))}},T=function(){i=[],a=[];for(var r in o.DATA){i.push(r);var e=o.DATA[r];a.push(e||0===e?e:"")}return arguments.callee}(),S=function(r,e){for(var t=[],n=0;n<e.length;n++){for(var o=!1,i=0;i<r.length;i++)r[i]===e[n]&&(o=!0);o||t.push(e[n])}return r.concat(t)},d=function(r,e,t,n){for(var o={},i=0;i<n.length;i++)o[n[i]]=e[i];for(var a=0;a<r.length;a++)for(var f=r[a],v=0;v<t.length;v++)f[v]||0===f[v]||(f[v]=o[t[v]]||"");return r},w=0,B=33;return n.toreport=function(){var e=g.length;if(e){var t=S(s,i),n=d(g,a,t,i),f=t.indexOf("module"),v=!0;if(f)for(var c=0;c<n.length;c++){var l=n[c][f];if(!l){v=!1;break}}else v=!1;if(v===!1&&E&&o.TIMER&&B>w){var h=this;return w++,window.clearTimeout(E),void(E=window.setTimeout(function(){h.toreport()},o.TIMER))}w=0,r(t,n),u(p,t,n),A={},s.length=g.length=0,p=o.TABLE,window.clearTimeout(E),E=null}},n.config=function(r,e,t){var i=(n.cookie&&n.cookie.getConfig?n.cookie.getConfig:{}).DATA||{},a=i.from||{};i._BASE&&i._BASE.ver7&&(r.ver7=i._BASE.ver7),i._BASE&&i._BASE.ver8&&(r.ver8=i._BASE.ver8),i._BASE&&i._BASE.ver5&&(r.ver5=i._BASE.ver5),i._BASE&&i._BASE.refer&&(r.refer=i._BASE.refer);var f={};for(var v in a){f=a[v];break}if(r.ver4=f.ver4||r.ver4,r.ver6=f.ver6||r.ver4,r)for(var c in r)o.DATA[c]=r[c];o.DELAY_REPORT=!!e,t&&(o.TABLE=t),T()},n.getReportData=function(r){return o.DATA[r]},n.tdw=h,n});









/*!@tencent/im-state/state*/
;define("@tencent/im-state/state",function(e,t,o){function a(e){var t=window.location.hash.match(new RegExp("(#|&)"+e+"=([^&]*)(&|$)"));return t?decodeURIComponent(t[2]):""}function n(e,t){var o=location.hash||"",a=e+"="+t;o?"#"==o?o+=a:o="#"+a+"&"+o.slice(1):o="#"+a,location.hash=o.replace(/&+$/,"")}function c(e){var t=location.hash||"";t&&(t=t.replace(new RegExp("(#|&)("+e+"=[^&]*)(&|$)"),"$1$3").replace(/(&+$)|(#+$)/,"").replace(/(^#)&+/,"$1").replace(/(&)&+/,"$1"),t||!history.replaceState?location.hash=t:history.replaceState({},document.title,location.href.split("#")[0]))}function i(e,t){if(n(e,1),"object"==typeof t)for(var o in t)n(o,t[o]);location.reload()}function r(e){for(var t in e){var o=e[t],a=l.bom.getHash(t);"function"==typeof o&&o(a),c(t)}}function f(e){if("object"==typeof e)for(var t in e){var o=a(t);o!==e[t]&&(c(t),n(t,e[t]))}}var l=e("jquery");o.exports={save:i,load:r,update:function(e,t){c(e),n(e,t)},batchUpdate:f,remove:c}});
/*!@tencent/im-edu-agency-hash/edu-agency-hash*/
;define("@tencent/im-edu-agency-hash/edu-agency-hash",function(e,t,n){function i(){a.getInfo().then(function(e){var t=e;t.is_login||(t=u.get());var n=t.uid,i=parseInt(n).toString(16);t.isPlatRole&&s.update("tuin",i)})}var a=e("@tencent/im-edu-user/index"),u=e("@tencent/im-edu-user/src/user.local"),s=e("@tencent/im-state/state");n.exports={init:i}});




/*!/node_modules/@tencent/im-client.share/clientShare.tpl_tpl*/
;define("/node_modules/@tencent/im-client.share/clientShare.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="count-down-ctn"><p class="count-down-tips"><span class="count-down-got"></span><span class="count-down-count">5</span>秒后为您打开客户端</p><p>如果跳转失败，请<a href="',url,'" data-target="',url,'" class="count-down-manual nor-link">手动进入</a></p></div>'),_$out_.join("")}}});
/*!@tencent/im-client.share/client.share*/
;define("@tencent/im-client.share/client.share",function(e){var t=e("jquery"),n=e("@tencent/im-edu-db/edu-db"),i=e("@tencent/im-edu-login/edu-login"),r=e("@tencent/im-check/check"),o=e("@tencent/im-util.bom/util.bom"),c=(e("@tencent/im-edu-dialog/edu-dialog"),e("@tencent/im-edu-render/edu-render"),{});c.clientShare=e("/node_modules/@tencent/im-client.share/clientShare.tpl_tpl");var l,u=function(){function e(){r&&clearTimeout(r)}function n(n){t.Dialog.alert({title:"",isDisabled:!1,confirmText:"取消",globalClass:"",content:c.clientShare(n),onAccept:e,onCancel:e,onClose:e})}function i(e){e=parseInt(e)||5;{var n=t(".count-down-ctn .count-down-count"),i=t(".count-down-ctn .count-down-manual");t(".modal-close")}r=setInterval(function(){e--,n.html(e),0==e&&(clearTimeout(r),t(".count-down-tips").html("已为您打开客户端"),t.render.url.liveForOpenRoom(i[0],!0))},1e3)}var r;return{show:function(e){n(e),i(5)}}}(),a=function(){function e(e){t.Dialog.alert({title:"",isDisabled:!1,confirmText:"确定",globalClass:"no-free-alert-tips",content:e,onAccept:function(){},onCancel:function(){},onClose:function(){}})}function c(i){m.key&&(i.key=m.key),m.term_id&&(i.term_id=m.term_id),n.extend({check:n.httpMethod({url:"/cgi-bin/agency_hall/check",type:"POST"})}),n.check({param:i,succ:function(n){if(n.result)if(n.result.tencent_src&&(m.roomUrl=n.result.tencent_src),1==n.result.type)l(),u.show({url:m.roomUrl});else if(2==n.result.type){var i=n.result.result;1==i?(l(!0),e("很遗憾，免费名额已被抢完！下次记得早出手哟…")):3==i&&(l(),u.show({url:m.roomUrl}),t(".count-down-got").html("您已报名。"))}}})}function a(e,n,o){if(l=o||function(){},m.isOpen&&(n.course_id&&(m.cid=n.course_id),n.term_id&&(m.term_id=n.term_id),m.key||!r.isWeixinUser())){var a=!0;if(m.term_id&&metaData&&metaData.terms){a=!1;for(var s=0,d=metaData.terms.length;d>s;s++)m.term_id==metaData.terms[s].term_id&&(a=!0)}if(a)if(m.type=e,m.roomUrl=n.room_url,m.price=n.price||0,2==e)if(0==m.price)u.show({url:m.roomUrl}),l();else{var f=t.bom.query("client_uin");f&&f!=t.cookie.uin()?i.show({succ:function(){setTimeout(function(){c({cid:m.cid})},200)}}):c({cid:m.cid})}else 1==e&&u.show({url:m.roomUrl})}}var m={isOpen:o.query("open_room"),cid:o.query("course_id"),type:0,roomUrl:"",price:0,key:o.query("key"),term_id:o.query("term_id")};return{init:a}}();return a});

/*!/node_modules/@tencent/im-pagectrl/page.tpl_tpl*/
;define("/node_modules/@tencent/im-pagectrl/page.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];if(total>1){_$out_.push(" ");var index="undefined"!=typeof idx?idx:1,isFirst=1==index?!0:!1,isLast=index==total?!0:!1,from=parseInt(index-max/2),to=parseInt(index+max/2);(2==from||to==total-2)&&(max+=2);var pager_id="pager_id_"+Math.random().toString().replace(/\D/g,"");if(_$out_.push(" "),max>=total-2){_$out_.push(' <div class="page-box"> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> ');for(var i=1,len=total;len>=i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i,'" href="javascript:void(0);" data-index="',i,'" class="page-btn'),1==i&&_$out_.push(" page-first"),i==len&&_$out_.push(" page-last"),i==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i,"</a> ");_$out_.push(' <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn '),isLast&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-right"></i></a> </div> ')}else{if(_$out_.push(" "),from>2&&total-2>to){_$out_.push(' <div class="page-box"> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> <a auto-test="',pager_id,'_1" href="javascript:void(0);" data-index="1" class="page-btn page-first">1</a> <a auto-test="',pager_id,'_2" href="javascript:void(0);" data-index="2" class="page-btn">2</a> <span>…</span> ');for(var i=from,len=total;to>i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i+1,'" href="javascript:void(0);" data-index="',i+1,'" class="page-btn'),i+1==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i+1,"</a> ");_$out_.push(' <span>…</span> <a auto-test="',pager_id,"_",len-1,'" href="javascript:void(0);" data-index="',len-1,'" class="page-btn">',len-1,'</a> <a auto-test="',pager_id,"_",len,'" href="javascript:void(0);" data-index="',len,'" class="page-btn page-last">',len,'</a> <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn"><i class="icon-font i-v-right"></i></a> </div> ')}else{if(_$out_.push(' <div class="page-box"> '),2>=from){_$out_.push(' <a auto-test="',pager_id,'_prev" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> ');for(var i=1,len=total;i<=Math.max(max,to);i++)_$out_.push(' <a auto-test="',pager_id,"_",i,'" href="javascript:void(0);" data-index="',i,'" class="page-btn'),1==i&&_$out_.push(" page-first"),i==len&&_$out_.push(" page-last"),i==index&&_$out_.push(" page-btn-cur"),_$out_.push('">',i,"</a> ");_$out_.push(' <span>…</span> <a auto-test="',pager_id,"_",len-1,'" href="javascript:void(0);" data-index="',len-1,'" class="page-btn">',len-1,'</a> <a auto-test="',pager_id,"_",len,'" href="javascript:void(0);" data-index="',len,'" class="page-btn page-last">',len,'</a> <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn"><i class="icon-font i-v-right"></i></a> ')}if(_$out_.push(" "),to>=total-2){_$out_.push(' <a auto-test="',pager_id,'_1" href="javascript:void(0);" class="page-prev-btn '),isFirst&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-left"></i></a> <a auto-test="',pager_id,'_prev" href="javascript:void(0);" data-index="1" class="page-btn page-first">1</a> <a auto-test="',pager_id,'_2" href="javascript:void(0);" data-index="2" class="page-btn">2</a> <span>…</span> ');for(var i=Math.min(from,total-max),len=total;total>i;i++)_$out_.push(' <a auto-test="',pager_id,"_",i+1,'" href="javascript:void(0);" data-index="',i+1,'" class="page-btn'),i==index-1&&_$out_.push(" page-btn-cur"),i==total-1&&_$out_.push(" page-last"),_$out_.push('">',i+1,"</a> ");_$out_.push(' <a auto-test="',pager_id,'_next" href="javascript:void(0);" class="page-next-btn '),isLast&&_$out_.push("page-btn-dis"),_$out_.push('"><i class="icon-font i-v-right"></i></a> ')}_$out_.push(" </div> ")}_$out_.push(" ")}}return _$out_.join("")}}});
/*!@tencent/im-pagectrl/pagectrl*/
;define("@tencent/im-pagectrl/pagectrl",function(t){var i=t("jquery"),n={};n.page=t("/node_modules/@tencent/im-pagectrl/page.tpl_tpl");var e=function(){var t="defClk",e=(navigator.userAgent.match(/\bMSIE\s+(\d+)\b/)||[0,10])[1]<9,a=function(t,i){return t=parseInt(t)||parseInt(i)||0,0>t?0:t},o=function(t,n,e){this.$container=t instanceof i?t:i(t),this.pageFn=n,this.inited=!1,e&&"object"==typeof e&&this.init(e)};return o.prototype.init=function(t){var i=this;return i.inited?void i.reset(t):(t=t||{},i.begin=t.begin||0,i.total=a(void 0!==t.total?t.total:i.total,0),i.max=a(void 0!==t.max?t.max:i.max,5),i.idx=a(void 0!==t.idx?t.idx:i.idx,1),i.idx=a(t.idx-i.begin||i.idx,0),i.idx>i.total&&(i.idx=Math.max(0,i.total-1)),i.delCurPage=function(){return i.reset({total:i.total-1,max:i.max,idx:i.idx}),i.idx},i.$container.html(n.page({total:i.total,max:i.max,idx:i.idx})),void(this.inited||(this.bindEvent(),this.inited=!0)))},o.prototype.reset=function(t){t=t||{};var i=a(t.idx,0),e=a(t.max,5),o=a(t.total,0);i>o&&(i=Math.max(0,o)),(i!=this.idx||o!=this.total)&&(this.$container,this.$container.html(n.page({total:o,max:e,idx:i})),this.total=o,this.idx=i,this.max=e,this.inited||(this.bindEvent(),this.inited=!0))},o.prototype.select=function(i,e){e=e||{};var a=this,o=a.total,r=a.max;a.$container.html(n.page({total:o,max:r,idx:i}));var c=a.idx;a.idx=i,e.silent||a.pageFn(i,c,t)},o.prototype.bindEvent=function(){var n=this;n.$container.on("click",".page-btn",function(){var e=i(this),o=a(e.attr("data-index"));n.select(o),t="defClk"}),e&&n.$container.on("dblclick",".page-next-btn,page-prev-btn",function(){i(this).trigger("click")}),n.$container.on("click",".page-prev-btn",function(){var e=i(this);e.hasClass("page-btn-dis")||(t="preClk",n.$container.find(".page-btn.page-btn-cur").prev().trigger("click"))}),n.$container.on("click",".page-next-btn",function(){var e=i(this);e.hasClass("page-btn-dis")||(t="nextClk",n.$container.find(".page-btn.page-btn-cur").next().trigger("click"))})},o.prototype.getIdx=function(){return this.idx},o.prototype.getTotal=function(){return this.total},o.prototype.destroy=function(){this.$container.unbind("click dblclick"),this.$container.html("")},o}();return e});
/*!@tencent/im-edu-course-slide/index*/
;define("@tencent/im-edu-course-slide/index",function(t,i,e){function s(t){this.opt=n.extend({},o,t),this.$container=n(this.opt.container),this.$list=this.$container.find(this.opt.list),this.$itemList=this.$list.children(this.opt.item),this.$btnNext=n(this.opt.btnNext),this.$btnForward=n(this.opt.btnForward),this.curIndex=0,this.isSliding=!1,this._bindEvents(),this.resetBtn()}var n=t("jquery"),o={slideStep:1,stepLength:250,beforeSlide:function(){},afterSlide:function(){},duration:300,container:"",list:"ul",item:"li",btnForward:".slide-forward",btnNext:".slide-next"},d=n(document);s.prototype.slideTo=function(t,i){if(t!==this.curIndex){var e=this.curIndex,s=this,n=-t*this.opt.stepLength+"px",o={left:n};this.opt.beforeSlide(e,t,i)||0>t||t>this.$itemList.length-1||(this.opt.duration?(this.isSliding=!0,this.$list.animate(o,this.opt.duration,"swing",function(){s.curIndex=t,s.isSliding=!1,s.resetBtn(),s.opt.afterSlide(e,t,i)})):(this.$list.css(o),this.resetBtn(),this.opt.afterSlide(e,t,i),this.curIndex=t))}},s.prototype.slideNext=function(t,i){t=t||1;var e=this.curIndex+t*this.opt.slideStep;this.slideTo(e,i)},s.prototype.slideForward=function(t,i){t=t||1;var e=this.curIndex-t*this.opt.slideStep;this.slideTo(e,i)},s.prototype.lastItemInSight=function(){var t=this.$container.offset().left+this.$container.outerWidth(),i=this.$itemList.eq(this.$itemList.length-1),e=i.offset().left+i.outerWidth();return t>=e},s.prototype.resetBtn=function(){0===this.curIndex?this.$btnForward.addClass("disabled").removeClass("active"):this.$btnForward.addClass("active").removeClass("disabled"),this.lastItemInSight()?this.$btnNext.addClass("disabled").removeClass("active"):this.$btnNext.addClass("active").removeClass("disabled")},s.prototype._bindEvents=function(){var t=this,i=this.opt;d.on("click",i.btnForward,function(){t.slideForward()}).on("click",i.btnNext,function(){t.slideNext()})},e.exports=s});
/*!/modules/courseDetail/template/recommend.tpl_tpl*/
;define("/modules/courseDetail/template/recommend.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];if("free"===data.type)_$out_.push(' <h4>该课程关联的免费讲座</h4> <a class="aside-recommend-link clearfix" report-tdw="module=course&action=Coursecard_Coursecover-clk&ver1=',data.from_course_id,"&ver2=",data.to_course_id,'&ver3=2" href="//ke.qq.com/course/',data.to_course_id,'" target="_blank"> <img class="aside-recommend-cover" src="',data.to.cover_url,'220" > </a> <div class="aside-recommend-cnt"> <a class="aside-recommend-tit" report-tdw="module=course&action=Coursecard_Coursename-clk&ver1=',data.from_course_id,"&ver2=",data.to_course_id,'&ver3=2" href="//ke.qq.com/course/',data.to_course_id,'" target="_blank">',data.to.name,'</a> <span class="aside-recommend-price">免费</span> <span class="aside-recommend-num">月学习人数 ',data.to.recent_sign_num,"</span> </div>");else{_$out_.push(' <section class="section--relation"> <div class="relation inner-center clearfix"> <div class="relation-head"> <h4 class="relation-head-l">当前课程享有</h4> <h4 class="relation-head-r">VIP课程尊享</h4> </div> <div class="relation-main clearfix"> <div class="recommend recommend-l"> <div class="recommend-course l"> <a class="recommend-course-cover"> <img src="',data.from.cover_url,'220" /> </a> <a class="recommend-course-tit">',data.from.name,'</a> </div> <ul class="recommend-benefit r"> ');for(var i=0,len=data.from_items.length;len>i;i++)_$out_.push(' <li class="recommend-benefit-item clearfix"> '),_$out_.push(data.from_items[i].face?' <i class="i-smile icon-font recommend-benefit-icon r"></i> ':' <i class="i-cry icon-font recommend-benefit-icon r"></i> '),_$out_.push(' <span class="recommend-benefit-des r">',data.from_items[i].desc,"</span> </li> ");_$out_.push(' </ul> </div> <div class="recommend recommend-r"> <div class="recommend-course r"> <a class="recommend-course-cover" report-tdw="module=course&action=Coursecard_Coursecover-clk&ver1=',data.from_course_id,"&ver2=",data.to_course_id,'&ver3=2" href="//ke.qq.com/course/',data.to_course_id,'" target="_blank"> <img src="',data.to.cover_url,'220" /> </a> <a class="recommend-course-tit" report-tdw="module=course&action=Coursecard_Coursename-clk&ver1=',data.from_course_id,"&ver2=",data.to_course_id,'&ver3=2" href="//ke.qq.com/course/',data.to_course_id,'" target="_blank">',data.to.name,'</a> </div> <ul class="recommend-benefit l"> ');for(var i=0,len=data.to_items.length;len>i;i++)_$out_.push(' <li class="recommend-benefit-item clearfix"> '),_$out_.push(data.to_items[i].face?' <i class="i-smile icon-font recommend-benefit-icon l"></i> ':' <i class="i-cry icon-font recommend-benefit-icon l"></i> '),_$out_.push(' <span class="recommend-benefit-des l">',data.to_items[i].desc,"</span> </li> ");_$out_.push(" </ul> </div> </div> </div> </section>")}return _$out_.join("")}}});
/*!courseDetail/modules/recommend*/
;define("courseDetail/modules/recommend",function(e,r,t){var i,n,o=e("jquery"),a=e("/modules/courseDetail/template/recommend.tpl_tpl"),d=e("@tencent/im-edu-db/edu-db"),c=(e("@tencent/im-util.bom/util.bom"),e("@tencent/im-edu-report/edu-report")),u={url:"/cgi-bin/agency/course/relationship"},m={getRelation:function(){var e,r=o.Deferred();return e=n.isPreviewMode?1:0,d.httpMethod({url:u.url})({param:{from_course_ids:"["+n.cid+"]",preview_flag:e},succ:function(e){e&&e.result||r.reject();var t=e.result.relationships;t&&t[0]&&r.resolve(t[0])},fail:function(e){r.reject(e)}}),r.promise()}},s={getData:function(){return m.getRelation()},renderData:function(e){e.to&&"undefined"!=typeof e.to.price&&(n.to=e.to_course_id,n.from=n.from||e.from_course_id,e.to.price?s.renderDataCharge(e):s.renderDataFree(e))},renderDataFree:function(e){if(i.$recommendFree){var r=o.extend(e,{type:"free"});i.$recommendFree.html(a({data:r})),i.$recommendFree.removeClass("hide"),c.tdw({module:"course",action:"freecourse_expo",ver1:n.from,ver2:n.to})}},renderDataCharge:function(e){if(i.$sectionMain){var r=o.extend(e,{type:"charge"});i.$sectionMain.before(a({data:r})),c.tdw({module:"course",action:"vipcourse_expo",ver1:n.from,ver2:n.to})}}},f={initElement:function(){i={},i.$sectionMain=o("#js-section-main"),i.$sidebar=i.$sectionMain.find(".aside-right"),i.$recommendFree=i.$sidebar.find(".aside-recommend")},initData:function(e){n=o.extend({},e),n.rawData=window.metaData,n.cid=n.rawData?n.rawData.cid||o.bom.query("course_id"):o.bom.query("course_id"),n.from=n.cid,n.cid&&"undefined"!=typeof n.isPreviewMode&&s.getData().then(function(e){s.renderData(e)})}},r={init:function(e){f.initElement(),f.initData(e)}};t.exports=r});

/*!/modules/courseDetail/template/couponInfo.tpl_tpl*/
;define("/modules/courseDetail/template/couponInfo.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];if(singleList.length>0){var couponItem=singleList[0];_$out_.push('<ul class="coupon-list coupon-list--single"> <li class="coupon-item"> <span class="icon-font i-coupon-pc"></span><span class="coupon-item-name">',couponItem.price/100,'元现金券</span> <a href="javascript:void(0);" class="coupon-item-link js-coupon-get" data-end="',couponItem.end_time,'" data-id="',couponItem.cou_id,'" data-price="',couponItem.price/100,'" data-type="2">领取</a> </li></ul>')}if(allList.length>0){_$out_.push('<div class="coupon-multi--wrap"> <ul class="coupon-list coupon-list--multi"> ');for(var i=0,l=allList.length;l>i;++i){var couponItem=allList[i];_$out_.push(' <li class="coupon-item'),0===i&&_$out_.push(" coupon-item--first"),_$out_.push('"> <span class="coupon-logo--warp"><i class="icon-font i-coupon-pc"></i></span><span class="coupon-item-name">满',couponItem.limit.min_cost/100,"元减",couponItem.price/100,'元</span> <a href="javascript:void(0);" class="coupon-item-link js-coupon-get" data-end="',couponItem.end_time,'" data-id="',couponItem.cou_id,'" data-price="',couponItem.price/100,'" data-type="3">领取</a> </li> ')}_$out_.push(" "),allList.length>1&&_$out_.push(' <i class="arrow-down"></i> '),_$out_.push(" </ul></div>")}return _$out_.join("")}}});
/*!/modules/courseDetail/template/discountPrice.tpl_tpl*/
;define("/modules/courseDetail/template/discountPrice.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];if(_$out_.push('<span class="price "> ¥<span class="fontsize-22">',discount_price,'</span> <span class="origin-price"> ¥<span class="fontsize-16">',original_price,'</span> </span> <span class="discount-timer js-discount-timer" data-now="',now,'" data-endtime="',end_time,'" data-bgtime="',start_time,'" data-term-id="',termId,'" data-origin-price="',original_price,'"></span> '),it.available_count){_$out_.push(" ");var count=it.available_count-it.locked_count;_$out_.push(' <span class="discount-remain">仅剩',count,"名</span> ")}return _$out_.push("</span>"),_$out_.join("")}}});
/*!/modules/courseDetail/template/qqWalletPrivilege.tpl_tpl*/
;define("/modules/courseDetail/template/qqWalletPrivilege.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<span class="price"> ¥ <span class="fontsize-22">',opt.renderPrice(100*original_price,!0),'</span></span><div class="qq_wallet"> <span>进入专场0.02元购课</span><i class="qq_wallet-arrow"></i> <div class="qq_wallet-hover"> <div class="qq_wallet-logo"> <i class="icon-qq"></i> </div> <div id="privilege-qrcode" class="qq_wallet-qrcode"></div> 请用QQ扫码 </div></div>'),_$out_.join("")}}});
/*!/modules/courseDetail/template/svipPrivilege.tpl_tpl*/
;define("/modules/courseDetail/template/svipPrivilege.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<span class="price"> ¥ <span class="fontsize-22">',opt.renderPrice(100*original_price,!0),'</span></span><div class="qq_wallet"> <span>QQ超级会员免费领课</span><i class="qq_wallet-arrow"></i> <div class="qq_wallet-hover"> <div class="qq_wallet-logo"> <i class="icon-qq"></i> </div> <div id="privilege-qrcode" class="qq_wallet-qrcode"></div> 请用QQ扫码 </div></div>'),_$out_.join("")}}});
/*!/modules/courseDetail/template/yellowDiamondPrivilege.tpl_tpl*/
;define("/modules/courseDetail/template/yellowDiamondPrivilege.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<span class="price"> ¥ <span class="fontsize-22">',opt.renderPrice(100*original_price,!0),'</span></span><div class="qq_wallet"> <span>豪华黄钻免费领课</span><i class="qq_wallet-arrow"></i> <div class="qq_wallet-hover"> <div class="qq_wallet-logo"> <i class="icon-qq"></i> </div> <div id="privilege-qrcode" class="qq_wallet-qrcode"></div> 请用QQ扫码 </div></div>'),_$out_.join("")}}});
/*!courseDetail/modules/countDown*/
;define("courseDetail/modules/countDown",function(t,i){function n(t){var i=new Date,n=parseInt(t.attr("data-now")),a=parseInt(t.attr("data-bgtime")),r=parseInt(t.attr("data-endtime"));return n=n?1e3*n:n,a=a?1e3*a:n,r=r?1e3*r:n,n>=r||a>=n?void o(t):void setTimeout(function(){e(t,r,n,i)},0)}function e(t,i,n,a){var r,f,l,h,m=i-n-(new Date-a);return 0>=m?void o(t):(r=Math.floor(m/d),f=Math.floor((m-r*d)/c),l=Math.floor((m-(r*d+f*c))/u),h=Math.floor((m-(r*d+f*c+l*u))/s),l=l>=10?l:"0"+l,h=h>=10?h:"0"+h,t.html('<i class="icon-font i-time"></i>'+r+"天"+f+"小时"+l+"分"+h+"秒"),void setTimeout(function(){e(t,i,n,a)},1e3))}function o(t){var i=t.siblings(".origin-price"),n=t.siblings(".fontsize-22"),e=t.siblings(".discount-remain"),o=t.attr("data-origin-price");t.hide(),i.hide(),e.hide(),n.html(o)}function a(){r(".js-discount-timer").each(function(t,i){var e=r(i);n(e)})}var r=t("jquery"),s=1e3,u=60*s,c=60*u,d=24*c;i.init=a});
/*!courseDetail/db.courseDetail*/
;define("courseDetail/db.courseDetail",function(t){var e=t("@tencent/im-edu-db/edu-db");return e.extend({getDirList:e.httpMethod({url:"/cgi-bin/courseDetail_json"}),addFav:e.httpMethod({url:"/cgi-bin/fav/add_pl",type:"POST",noNeedLogin:!0}),cancelFav:e.httpMethod({url:"/cgi-bin/fav/cancel_pl",type:"POST",noNeedLogin:!0}),getCourseDiscountList:e.httpMethod({url:"/cgi-bin/discount/list_suitable_discounts"}),getBindedFiles:e.httpMethod({url:"/cgi-bin/file/getBindedFiles",type:"POST"}),record_get_expr_ticket:e.httpMethod({url:"/cgi-bin/user/record_get_expr_ticket ",type:"POST"}),getPublicCoupon:e.httpMethod({url:"/cgi-bin/coupon/get_course_detail_coupon"}),requestCoupon:e.httpMethod({url:"/cgi-bin/coupon/get_coupon",type:"POST"}),getCountDown:e.httpMethod({url:"/cgi-bin/discount/get_discounts"}),getBalance:e.httpMethod({url:"/cgi-bin/pay_access/user_account"}),getPaytoken:e.httpMethod({url:"/cgi-bin/pay_access/paytoken"}),getPartnerInfo:e.httpMethod({url:"/cgi-bin/activity/get_user_partner_info",noNeedLogin:!0}),getUserContact:e.httpMethod({url:"/cgi-bin/user/get_user_info"}),applySmsCode:e.httpMethod({url:"/cgi-bin/tool/apply_sms_code"}),checkSmsCode:e.httpMethod({url:"/cgi-bin/tool/check_sms_code"}),setUserContact:e.httpMethod({url:"/cgi-bin/user/set_user_info",type:"POST"}),getLatestLiveTask:e.httpMethod({url:"/cgi-bin/get_course_latest_liveTask",type:"GET"}),getPrivilege:e.httpMethod({url:"//sas.qq.com/cgi-bin/ke_ad_privilegeSeries"}),getCommentCount:e.httpMethod({url:"/cgi-bin/comment_new/course_comment_stat"})}),e});
/*!coupon/db.coupon*/
;define("coupon/db.coupon",function(o,t,n){var e=o("@tencent/im-edu-db/edu-db");e.extend({getCouponInfo:e.httpMethod({url:"/cgi-bin/coupon/get_coupon_status"}),acceptCoupon:e.httpMethod({url:"/cgi-bin/coupon/get_coupon",type:"POST"})}),n.exports=e});
/*!/modules/coupon/couponSucc.tpl_tpl*/
;define("/modules/coupon/couponSucc.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<span style="position: relative;top: 10px;font-size: 16px;">优惠券领取成功</span><p class="gray" style="position: relative;top: 10px;">个人中心可查看我的优惠券</p>'),_$out_.join("")}}});
/*!coupon/acceptCoupon*/
;define("coupon/acceptCoupon",function(o,e,n){function t(o,e,n){e.addClass("loading"),c.acceptCoupon({param:{cou_id:o},succ:function(){var o=l({},{renderTime:a.render.time.formatDate.bind(null,"YYYY-MM-DD hh:mm")});a.modal.success(o,{title:"操作成功"}),e.removeClass("loading"),n&&n()},err:function(o){var n=o&&o.retcode||"_default",t=r[n]||r._default+"("+n+")";return a.modal.alert(t,{title:"操作失败"}),e.removeClass("loading"),!0}})}function u(o,e,n){t(o,e,n)}var a=o("jquery"),c=o("coupon/db.coupon"),l=o("/modules/coupon/couponSucc.tpl_tpl"),r={113134:"你已经领取该优惠券",113135:"该优惠券已被领完",_default:"领取失败"};n.exports=u});
/*!courseDetail/modules/discount*/
;define("courseDetail/modules/discount",function(e,t){function r(e){return T[e]}function i(){for(var e=0;e<h.terms.length;e++){var t=h.terms[e];E.push(t.term_id),T[t.term_id]=t.price}h.passcard&&(E.push(0),T[0]=h.passcard_price)}function o(e,t){for(var r=[],i=0,o=e.length;o>i;++i){var n=e[i],c=n.limit&&n.limit.min_cost;t>=c&&r.push(n)}return r}function n(e,t){var i=o(Q,r(t)),n=e.closest(".js-course-price-discount");O.length>0&&i.length>0?e.addClass("course-coupon--both"):e.removeClass("course-coupon--both"),0===O.length&&i.length>0?e.addClass("course-coupon--multi"):e.removeClass("course-coupon--multi"),e.html(D({singleList:O,allList:i})),O.length||i.length?(e.removeClass("hide"),n.addClass("show")):e.hide(),O.length>0&&b.tdw({action:"course_coupon_expo",ver1:h.cid,ver2:h.aid}),i.length>0&&b.tdw({action:"manj_coupon_expo",ver1:h.cid,ver2:h.aid,ver5:i.length})}function c(){g.each(function(e,t){var r=w(t),i=r.data("termid"),o=r.find(".js-coupon-wrap");n(o,i)})}function l(){L.getPublicCoupon({param:{cid:h.cid},succ:function(e){var t=e.result||{single:[],all:[]};O=t.for_this_course||[],Q=t.for_all_course||[],c()},err:function(){}})}function u(){w(document).on("click",".js-coupon-get",function(e){var t=w(this);t.hasClass("loading")||(e.stopPropagation(),I(t.data("id"),t,function(){b.tdw({action:"get_coupon_suc",obj1:t.data("type"),obj2:t.data("id"),ver1:h.cid,ver2:h.aid,ver3:t.data("price")})}),b.tdw({action:"coupon_clk",obj1:t.data("type"),obj2:t.data("id"),ver1:h.cid,ver2:h.aid,ver3:t.data("price")}))})}function d(e,t){var r=e.term_id,i=w.extend({},e,{termId:r,now:P}),o=g.filter('[data-termid="'+r+'"]').find(".course-price-info");o.html(q[t](i,{renderPrice:w.render.price}))}function a(e){e=e||{};var t=V.replace(/\${(\w+)}/g,function(t,r){return e[r]});new y("privilege-qrcode",{text:t,width:100,height:100,colorDark:"#000000",colorLight:"#ffffff",correctLevel:y.CorrectLevel.M})}function s(e){for(var t,i=0;i<e.length;i++)t=e[i],t.original_price=r(t.term_id)/100,t.discount_price=t.discount_price/100,1===t.discount_type&&0!==t.available_count?d(t,"discountPriceTpl"):"QQ_wallet"===t.channel?(d(t,"qqWalletPrivilege"),a({cid:h.cid,ptype:2})):t.priviType===W.QQ_SVIP?(d(t,"svipPrivilege"),a({cid:h.cid,ptype:3})):t.priviType===W.YELLOW_VIP&&(d(t,"yvipPrivilege"),a({cid:h.cid,ptype:4}));C.init()}function p(){var e=w.Deferred();return L.getCountDown({param:{cid:h.cid,term_id_list:JSON.stringify(E),need_channel:!0},succ:function(t){var r=t&&t.result||{},i=r.discounts||[];P=r.server_time,e.resolve(i),window.BJ_REPORT&&BJ_REPORT.debug({msg:"discount_succ_pv",ext:{msid:2508103}}),j.tdw({module:"course",action:"discount_succ",opername:"Edu",uin:"11111"},!0),b.tdw({module:"course",action:"discount_succ_local",opername:"Edu"},!0)},err:function(){e.resolve([])}}),e}function v(e){for(var t,r,i,o=0;o<e.length;o++)if(t=e[o],w.inArray(t.type,x)>=0){r=t.courses||[];for(var n=0;n<r.length;n++)if(i=r[n],i.cid===h.cid)return{priviType:t.type,term_id:h.terms[0].term_id}}return null}function m(){var e=w.Deferred();return L.getPrivilege({param:{},succ:function(t){e.resolve(v(t&&t.result||[]))},err:function(){e.resolve(null)}}),e}function f(){l(),w.when(p(),m()).done(function(e,t){for(var r,i=e.concat([]),o=h.terms[0].term_id,n=0;n<i.length&&(r=i[n],r.term_id!==o);n++);n===i.length&&t&&i.push(t),s(i)})}function _(e){g=w(".js-course-price"),h=e,i(),f(),u()}var g,h,P,w=e("jquery"),y=e("@tencent/im-qrcode/qrcode"),D=e("/modules/courseDetail/template/couponInfo.tpl_tpl"),q={discountPriceTpl:e("/modules/courseDetail/template/discountPrice.tpl_tpl"),qqWalletPrivilege:e("/modules/courseDetail/template/qqWalletPrivilege.tpl_tpl"),svipPrivilege:e("/modules/courseDetail/template/svipPrivilege.tpl_tpl"),yvipPrivilege:e("/modules/courseDetail/template/yellowDiamondPrivilege.tpl_tpl")},C=e("courseDetail/modules/countDown"),L=e("courseDetail/db.courseDetail"),b=e("@tencent/im-edu-report/edu-report"),j=e("@tencent/im-edu-report/edu-report-nolocal"),j=e("@tencent/im-edu-report/edu-report-nolocal"),I=e("coupon/acceptCoupon"),O=[],Q=[],E=[],T={},V="http://m.ke.qq.com/freePro.html?_wv=4097&course_id=${cid}&ptype=${ptype}",W={ZHAO_PING:1,QIAN_BAO:2,QQ_SVIP:3,YELLOW_VIP:4},x=[W.QQ_SVIP,W.YELLOW_VIP];e("@tencent/im-edu-render/edu-render"),window.reportOld=j,t.init=_});
/*!/modules/sale/saleDialog/index.tpl_tpl*/
;define("/modules/sale/saleDialog/index.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="sale-url-wrapper"> <h3>通过以下途径转发</h3> <div class="url-card-wrapper"> <div class="url-card"> <p class="url-card-tt">电脑端</p> <div class="url-card-info"> <input type="text" class="url-string" value="',url,'"> <button class="btn btn-m btn-default js-copy-url">复制</button> <p class="js-copy-tip gray-wordings"></p> </div> </div> <div class="url-card"> <p class="url-card-tt">手机端</p> <div class="url-card-info url-card-info--qrcode"> <div id="js-url-qrcode" class="url-qrcode"></div> <p class="qrcode-tip"> 使用',opt.isWeiXin?"微信":"手机QQ",'扫码<br> <span class="gray-wordings">',opt.isWeiXin?"手Q":"微信","扫码帐号会被切换</span> </p> </div> </div> </div></div>"),_$out_.join("")}}});
/*!/node_modules/@tencent/im-jquery.msg/msg.tpl_tpl*/
;define("/node_modules/@tencent/im-jquery.msg/msg.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="jq-message-wrapper"> <div class="jq-message jq-message--',align,'"> <i class="icon-font i-',type,'"></i><span class="js-msg-txt">',msg,"</span> </div></div>"),_$out_.join("")}}});
/*!@tencent/im-jquery.msg/jquery.msg*/
;define("@tencent/im-jquery.msg/jquery.msg",function(t){function n(t,n){return this.config(t),this.$el=n,this.init(),this}var i=t("jquery"),s=t("/node_modules/@tencent/im-jquery.msg/msg.tpl_tpl"),e={align:"top",type:"success",msg:"",time:1500,duration:100,onMsgShow:function(){},onMsgHide:function(){}};i.fn.msg=function(t){var s;return s=this.jquery&&this.length?this:i(document.body),"string"==typeof t&&(t={msg:t}),t.msg?s.each(function(){var s=i(this),e=s.data("msg");e||(e=new n(t,s),s.data("msg",e)),e.config(t,!0),e.render(t.msg)}):!1},i.extend(n.prototype,{init:function(){this.fill()},config:function(t,n){i.extend(this,e,t),n&&this.fill()},fill:function(){this.$msg&&this.$msg.remove(),this.$msg=i(s(this)).hide().appendTo(this.$el)},render:function(t){var n=this,i=n.$msg;t=t||this.msg,i.find(".js-msg-txt").text(t),i.fadeIn(this.duration,function(){n.onMsgShow(),setTimeout(function(){i.fadeOut(n.duration,n.onMsgHide)},n.time)})}})});
/*!sale/saleDialog/index*/
;define("sale/saleDialog/index",function(e,t,r){function n(e,t){t=o.extend({},u,t),t.beforeRender(),m(e,function(r){1===e.id_type?(r.url=location.protocol+o.render.url.course_detail(e.id)+"?saleToken="+r.token,r.h5Url="//m.ke.qq.com/courseDetail.html?course_id="+e.id+"&saleToken="+r.token):(r.url=location.protocol+o.render.url.package_detail(e.id)+"?saleToken="+r.token,r.h5Url="//m.ke.qq.com/coursePackage.html?pkg_id="+e.id+"&saleToken="+r.token);var n=c(r,{isWeiXin:i.isWeixinUser()});o.modal({width:580,enableDrag:!1,body:n}),new a("js-url-qrcode",{text:location.protocol+r.h5Url+"&isDis=1&dis_ratio="+e.rate+"&_bid=167&_wv=1",width:100,height:100,colorDark:"#000000",colorLight:"#ffffff",correctLevel:a.CorrectLevel.H}),t.afterRender(r)})}var o=e("jquery"),i=e("@tencent/im-check/check"),a=e("@tencent/im-qrcode/qrcode"),c=e("/modules/sale/saleDialog/index.tpl_tpl"),l=e("@tencent/im-edu-db/edu-db");e("@tencent/im-modal/modal"),e("@tencent/im-jquery.msg/jquery.msg");var d={},s={type:1},u={beforeRender:function(){},afterRender:function(){}};l.extend({generateSaleURL:l.httpMethod({type:"POST",url:"/cgi-bin/ke_distribution/generate_url"})}),o(document).on("click",".js-copy-url",function(){var e=o(this).siblings(".url-string"),t="复制成功",r=!1;try{e[0].select(),r=document.execCommand("copy")}catch(n){try{r||window.clipboardData.setData("text",e.val())}catch(n){t="复制失败，请手动复制"}}finally{o.fn.msg(t)}});var m=function(e,t){e=o.extend({},s,e);var r=d[e.id];return r?t(r):void l.generateSaleURL({param:e,succ:function(r){var n=r.result||{};n.token=n.dst_dealer_id,d[e.id]=n,t(n)},err:function(e){t(),o.modal.alert("生成链接失败，请稍后重试!("+e.retcode+")")}})};r.exports={render:n}});
/*!@tencent/im-edu-pay-coursepkg/db.courseOperation*/
;define("@tencent/im-edu-pay-coursepkg/db.courseOperation",function(e){var t=e("@tencent/im-edu-db/edu-db");return t.extend({checkPackageConflict:t.httpMethod({url:"/cgi-bin/user/check_signed_course_in_pkg",type:"POST",noNeedLogin:!0}),signFreePackage:t.httpMethod({url:"/cgi-bin/user/apply_free_course_package",type:"POST"}),acceptCourse:t.httpMethod({url:"/cgi-bin/user/accept_course_in_pkg",type:"POST"}),getBalance:t.httpMethod({url:"/cgi-bin/pay_access/user_account"}),getDiscount:t.httpMethod({url:"/cgi-bin/coupon/get_suitable_coupons_for_cpkg"}),getPayToken:t.httpMethod({url:"/cgi-bin/pay_access/paytoken",noNeedLogin:!0}),getUserAddress:t.httpMethod({url:"/cgi-bin/user/get_user_address"})}),t});
/*!/node_modules/@tencent/im-edu-pay-coursepkg/template/acceptCourse.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay-coursepkg/template/acceptCourse.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push("确定接受课程 ",name," 的赠送吗？"),_$out_.join("")}}});
/*!@tencent/im-edu-pay-coursepkg/accept-pkg-course*/
;define("@tencent/im-edu-pay-coursepkg/accept-pkg-course",function(e,c,t){function n(e,c){var t=r.extend({},p,c);o.acceptCourse({param:{pkg_id:e.pkgId,term_id:e.termId,passcard:0===parseInt(e.termId,10),cid:e.cid,platform:1},succ:function(){t.onAcceptSuccess()},err:function(e){if(!t.onAcceptError(e)){var c=e&&e.retcode||-1,n=a[c]||a._default+"("+c+")";return r.modal.alert(n),!0}}})}{var r=e("jquery"),o=e("@tencent/im-edu-pay-coursepkg/db.courseOperation");e("/node_modules/@tencent/im-edu-pay-coursepkg/template/acceptCourse.tpl_tpl")}e("@tencent/im-modal/modal");var p={onAcceptSuccess:function(){},onAcceptCancel:function(){},onAcceptError:function(){}},a={_default:"接受失败",900005:"该系列课已截止报名，无法接受新增课程"};t.exports={accept:n}});
/*!@tencent/im-edu-pay/loadPayScript*/
;define("@tencent/im-edu-pay/loadPayScript",function(n){var i=(n("jquery"),{fusion:{url:"https:"===location.protocol?"//fusion.qzone.qq.com/fusion_loader?appid=1450000627&platform=qzone":"//fusion.qq.com/fusion_loader?appid=1450000627&platform=qzone",backUrl:"//7.url.cn/edu/js/pay/fusion_bak.9964.js",isLoad:function(){return!!window.fusion2},loadTimes:0,asyncLoad:function(i){return n.async(["@tencent/im-edu-pay/fusion_loader.nowrap"],i)},errMsid:428269,timesMsid:2050769},cashier:{url:"//midas.gtimg.cn/app_goods/api/cashier.js?t=https",backUrl:"//7.url.cn/edu/jslib/cashier/cashier.js",isLoad:function(){return!!window.cashier},loadTimes:0,asyncLoad:function(i){return n.async(["@tencent/im-edu-pay/cashier.nowrap"],i)},errMsid:2040322,timesMsid:2040321},enterprise:{url:"//midas.gtimg.cn/enterprise/js/enterpriseAPI_v1.0.2.js",backUrl:"//7.url.cn/edu/jslib/enterprise/enterpriseAPI_v1.0.2.js",isLoad:function(){return!!(window.TEG&&window.TEG.Service&&window.TEG.Service.EnterprisePay)},loadTimes:0,asyncLoad:function(){},errMsid:2531948,timesMsid:2531947}}),r=function(n){return function(){var i=window.require.attrs;window.require.attrs={};var r=n.apply(this,arguments);return window.require.attrs=i,r}},e=r(function(i,r){r=r||function(){},n.loadJs(i,r)}),s=!1,o=function(n,i){return function(o){return i.isLoad()?void("function"==typeof o&&o()):(i.loadTimes++>=1&&(BJ_REPORT.debug({msg:i.url,ext:{msid:i.errMsid}}),i.url=i.backUrl),s?r(i.asyncLoad)(o):e(i.url,o),void BJ_REPORT.debug({msg:n+" 加载次数",ext:{msid:i.timesMsid}}))}},t=function(n){return o("fusion",i.fusion)(n)},a=function(n){return o("cashier",i.cashier)(n)},u=function(n){return o("enterprise",i.enterprise)(n)};return u(),{loadFusion:t,loadCashier:a,loadEnterPrise:u}});
/*!@tencent/im-group-tencent/group-tencent*/
;define("@tencent/im-group-tencent/group-tencent",function(){var n=function(){function n(n,e,o,t){var r="",p="",a="";switch(n){case"commonGroup":r="groupwpa",p="all",a='{"groupUin":'+o+',"timeStamp":1383552440}';break;case"openGroup":r="groupwpa",p="OpenGroup",a='{"ExtParam":{"appId":"0"},"groupUin":'+e+',"visitor":1}';break;case"openGroupVideo":r="groupwpa",p="OpenGroup",a='{"ExtParam":{"appId":"21"},"groupUin":'+e+',"visitor":1}';break;case"openGroupCourse":r="groupwpa",p="OpenGroup",a='{"ExtParam":{"appId":"1101123802"},"groupUin":'+e+',"visitor":1}'}var i,u,c;if(r){if(i="tencent://"+r+"/?subcmd="+p+"&param=",a=a){for(a+="",u=[],c=0,r=a.length;r>c;c++)u.push(a.charCodeAt(c).toString(16).toUpperCase());a=u.join("")}else a=a;a=i+a+(t?"&fuin="+t:"")}else a="";return a}function e(n,e){$.bom.checkPlatform()&&null!==n&&(n.src?n.src=e:null!==n.contentWindow&&null!==n.contentWindow.location?n.contentWindow.location=e:n.setAttribute("src",e))}var o=document.createElement("iframe");o.style.display="none",o.name="tencent_iframe",o.id="tencent_iframe",document.getElementsByTagName("body")[0].appendChild(o);var t=document.getElementById("tencent_iframe");return{join:function(o,r){e(t,n("commonGroup","",o,r))},open:function(o,r){e(t,n("openGroup",o,"",r))},openVideo:function(o,r){e(t,n("openGroup",o,"",r))}}}();return n});
/*!/node_modules/@tencent/im-edu-pay/vc.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/vc.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];_$out_.push('<div class="vc-line clearfix"> ');var captchaUrl="https:"===location.protocol?"https://ssl.captcha.qq.com":"http://captcha.qq.com";return captchaUrl+="/getimage?aid=715021410&r="+ +new Date,_$out_.push(' <img width="136" height="40" title="看不清？点击刷新一下" class="js-vc-img" src="',captchaUrl,'" > <input type="text" class="js-vc-ipt input-text_short" maxlength="4" placeholder="请输入验证码"><br><span class="js-vc-ipt-error">&nbsp;</span></div>'),_$out_.join("")}}});
/*!@tencent/im-edu-pay/vc*/
;define("@tencent/im-edu-pay/vc",function(t){var c=t("jquery"),n={vc:t("/node_modules/@tencent/im-edu-pay/vc.tpl_tpl")};return{show:function(t){var e,i=n.vc({}),o=c.Dialog.confirm(i,{title:"请输入验证码",onAccept:function(){var n=c.trim(c(".js-vc-ipt").val());if(n.length<4){var i=c(".js-vc-ipt-error");return i.html("请输入正确的验证码！"),e&&window.clearTimeout(e),e=window.setTimeout(function(){i.html("&nbsp;")},2e3),!0}t.succ&&t.succ(n)},onCancel:function(){t.cancel&&t.cancel()}});o.find(".js-vc-img").click(function(){var t="https:"===location.protocol?"https://ssl.captcha.qq.com":"http://captcha.qq.com";t+="/getimage?aid=715021410&r="+ +new Date,c(this).attr("src",t)})}}});
/*!/node_modules/@tencent/im-edu-pay/remindBoxInfo.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/remindBoxInfo.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<ul class="mycourse-remind-subtitle"><li>设置提醒的方式</li></ul><div class="mycourse-remind-dl"> <p class="mycourse-remind-dd">该课程已有提醒：</p> '),notifyNum?(_$out_.push(" "),1==tips&&_$out_.push(' <div class="mycourse-remind-dt" data-propety="tips"> <label class="mycourse-remind-dt-rol1">QQ</label> <span class="mycourse-remind-dt-rol2">',uin,'</span><a class="mycourse-remind-dt-rol3 nor-link">取消提醒</a> </div> '),_$out_.push(" "),1==public_account&&_$out_.push(' <div class="mycourse-remind-dt" data-propety="public_account"> <label class="mycourse-remind-dt-rol1">公众账号</label> <span class="mycourse-remind-dt-rol2 nor-link"> <a class="mycourse-remind-public nor-link"><i class="icon-font i-logo"></i>腾讯课堂 <span class="mycourse-remind-public-cover"> <span class="mycourse-remind-public-cover-arrow"></span> <span class="mycourse-remind-public-cover-arrow-outer"></span> <span class="mycourse-remind-public-cover-avatar"><span class="qr-qq-public"></span></span> </span> </a> </span><a class="mycourse-remind-dt-rol3 nor-link">取消提醒</a> </div> '),_$out_.push(" "),1==sms&&(_$out_.push(' <div class="mycourse-remind-dt" data-propety="sms"> <label class="mycourse-remind-dt-rol1">手机</label> '),mobile_number?_$out_.push(' <span class="mycourse-remind-dt-rol2">',mobile_number,'</span><a class="mycourse-remind-dt-rol3 nor-link">取消提醒</a> '):_$out_.push(' <a class="mycourse-remind-dt-rol3 nor-link">设置提醒</a> '),_$out_.push(" </div> ")),_$out_.push(" "),1==email&&(_$out_.push(' <div class="mycourse-remind-dt" data-propety="email"> <label class="mycourse-remind-dt-rol1">邮箱</label> '),email_string?_$out_.push(' <span class="mycourse-remind-dt-rol2">',email_string,'</span><a class="mycourse-remind-dt-rol3 nor-link">取消提醒</a> '):_$out_.push(' <a class="mycourse-remind-dt-rol3 nor-link">设置提醒</a> '),_$out_.push(" </div> ")),_$out_.push(" ")):_$out_.push(' <div class="mycourse-remind-dt"><label class="mycourse-remind-dt-rol1">暂无</label></div> '),_$out_.push('</div><div class="mycourse-remind-dl"> <p class="mycourse-remind-dd">可设置其他提醒：</p> '),4-notifyNum>0?(_$out_.push(" "),2==tips&&_$out_.push(' <div class="mycourse-remind-dt" data-propety="tips"> <label class="mycourse-remind-dt-rol1">QQ</label> <span class="mycourse-remind-dt-rol2">',uin,'</span><a class="mycourse-remind-dt-rol3 nor-link">添加提醒</a> </div> '),_$out_.push(" "),2==public_account&&_$out_.push(' <div class="mycourse-remind-dt" data-propety="public_account"> <label class="mycourse-remind-dt-rol1">公众账号</label> <span class="mycourse-remind-dt-rol2"> <a class="mycourse-remind-public nor-link"><i class="icon-font i-logo"></i>腾讯课堂 <span class="mycourse-remind-public-cover"> <span class="mycourse-remind-public-cover-arrow"></span> <span class="mycourse-remind-public-cover-arrow-outer"></span> <span class="mycourse-remind-public-cover-avatar"><span class="qr-qq-public"></span></span> </span> </a> </span><a class="mycourse-remind-dt-rol3 nor-link">添加提醒</a> </div> '),_$out_.push(" "),2==sms&&(_$out_.push(' <div class="mycourse-remind-dt" data-propety="sms"> <label class="mycourse-remind-dt-rol1">手机</label> '),mobile_number?_$out_.push(' <span class="mycourse-remind-dt-rol2">',mobile_number,'</span><a class="mycourse-remind-dt-rol3 nor-link js-remind-cancel">添加提醒</a> '):_$out_.push(' <a class="mycourse-remind-dt-rol3 nor-link">设置提醒</a> '),_$out_.push(" </div> ")),_$out_.push(" "),2==email&&(_$out_.push(' <div class="mycourse-remind-dt" data-propety="email"> <label class="mycourse-remind-dt-rol1">邮箱</label> '),email_string?_$out_.push(' <span class="mycourse-remind-dt-rol2">',email_string,'</span><a class="mycourse-remind-dt-rol3 nor-link">添加提醒</a> '):_$out_.push(' <a class="mycourse-remind-dt-rol3 nor-link">设置提醒</a> '),_$out_.push(" </div> ")),_$out_.push(" ")):_$out_.push(' <div class="mycourse-remind-dt"><label class="mycourse-remind-dt-rol1">暂无</label></div> '),_$out_.push("</div>"),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-pay/remindBox.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/remindBox.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<p class="mycourse-remind-title">设置《<a href="//ke.qq.com/course/',cid,'" class="mycourse-remind-title-name nor-link" target="_blank" title="',course,'">',course,"</a>》的课前提醒</p>"),passcard&&_$out_.push(' <div class="mycourse-remind-passcard"> <ul class="mycourse-remind-subtitle"><li>请选择希望接收上课提醒的班级时间（可多选）：</li></ul> <div class="mycourse-remind-passcard-selector"></div> </div>'),_$out_.push('<div class="mycourse-remind-info"> </div>'),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-pay/remindTime.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/remindTime.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];_$out_.push('<div class="tips-bd"><i class="icon-font i-success icon-msg-large"></i><div class="remindt-header',opt.noheader?" hide":"",'">报名成功<a href="/myCourse/index.html#sid=plan" class="remindt-header-link nor-link" target="_blank">我的课表</a><br>请选择希望接收上课提醒的班级（可多选）：</div><div class="mod-choose-time mod-choose-time_pop" style="position:relative;display:block;"><ul>');for(var i=0,len=terms.length;len>i;i++){var e=terms[i];_$out_.push('<li class="mod-choose-time__li',terms[i].isRemind?" mod-choose-time__li_current":"",'" data-termid="',terms[i].term_id,'" data-index="',i,'"><span class="icon-corner-selected"> <i class="icon-font i-right"></i></span><span class="choose-class-tt">',e.name,'</span><span class="mod-choose-time__time">',$.render.time.formatDate("M月D日",1e3*e.bgtime)+"至"+$.render.time.formatDate("M月D日",1e3*e.endtime),"</span></li>")}return _$out_.push('</ul></div></div><div class="modal-ft"> <a href="javascript:void(0);" title="继续找课" class="modal-ft-btn--link js-modal-close modal-cancel" target="_blank">继续找课</a> <a href="javascript:void(0);" title="立即学习" class="btn-default js-modal-close modal-accept" target="_blank">立即学习</a></div>'),_$out_.join("")}}});
/*!@tencent/im-edu-pay/remind*/
;define("@tencent/im-edu-pay/remind",function(e){function i(e){d=null,u=e}function r(e){i(e),o.getRemindTerm({param:{cid:e.cid,passcard:e.passcard,term_id:e.term_id},succ:function(i){s=i.result,s.uin=m.cookie.uin(),s.course=e.cName,s.passcard=e.passcard,s.cid=e.cid,s.term_id=e.term_id,s.terms=e.terms,n()},err:function(e){101404==e.retcode&&m.Dialog.alert("该课程已经下架！",{onAccept:function(){location.reload()},onClose:function(){location.reload()}})}})}function n(){s.notifyNum=0;for(var e=0,i=a.length;i>e;e++)1===s[a[e]]&&s.notifyNum++;if(!d){var r="mycourse-remind";s.passcard&&(1===s.terms.length?r+=" mycourse-remind-p1":2===s.terms.length?r+=" mycourse-remind-p2":s.terms.length>=3&&(r+=" mycourse-remind-p3")),m.Dialog.confirm(c.remindBox(s),{title:"设置提醒",globalClass:r,onAccept:function(){for(var e=d.find(".mod-choose-time__li_current"),i=[],r=0,n=0,t=e.length;t>n;n++)i.push(m(e[n]).data("termid"));o.setRemindTerm({param:{cid:s.cid,shake:s.shake,passcard:s.passcard,term_id:s.term_id,tips:s.tips,email:s.email,sms:s.sms,public_account:s.public_account},succ:function(){r++,2===r&&m.Dialog.remove()},err:function(){}}),1===u.passcard&&o.remindTime({param:{tids:JSON.stringify(i),cid:s.cid},succ:function(){r++,2===r&&m.Dialog.remove()},err:function(){return!0}})}}),d=m(".mycourse-remind"),t()}if(d.find(".mycourse-remind-info").html(c.remindBoxInfo(s)),s.passcard){var n=c.remindTime({terms:s.terms},{getTermTimeString:m.render.courseTime,noheader:!0});d.find(".mycourse-remind-passcard-selector").html(n)}}function t(){d.on("click","a.mycourse-remind-dt-rol3",function(){for(var e=m(this).closest(".mycourse-remind-dt").data("propety"),i=0,r=a.length;r>i;i++)e===a[i]&&(s[e]=1===s[e]?2:1);"email"===e&&!s.email_string||"sms"===e&&!s.mobile_number?m("#js_con_live .live-clock").trigger("click",[{remind:!0,opt:u}]):n()}),d.on("click",".mod-choose-time__li",function(){var e=m(this),i=e.data("index");s.terms[i].isRemind=e.hasClass("mod-choose-time__li_current")?!1:!0,e.toggleClass("mod-choose-time__li_current")})}var m=e("jquery"),o=e("@tencent/im-edu-db/edu-db"),c=(e("@tencent/im-edu-report/edu-report"),{remindBoxInfo:e("/node_modules/@tencent/im-edu-pay/remindBoxInfo.tpl_tpl"),remindBox:e("/node_modules/@tencent/im-edu-pay/remindBox.tpl_tpl"),remindTime:e("/node_modules/@tencent/im-edu-pay/remindTime.tpl_tpl")});o.extend({setRemindTerm:o.httpMethod({url:"/cgi-bin/course/set_remind_term",type:"POST"}),getRemindTerm:o.httpMethod({url:"/cgi-bin/course/get_remind_term"})});var d,s={},a=["tips","email","sms","public_account"],u={};return{init:r}});
/*!@tencent/im-edu-pay/notify*/
;define("@tencent/im-edu-pay/notify",function(e){var t=e("jquery"),o=e("@tencent/im-edu-db/edu-db"),r=e("@tencent/im-edu-report/edu-report"),i=e("@tencent/im-check/check"),n=e("@tencent/im-edu-pay/remind");o.extend({setApplyInfo:o.httpMethod({url:"/cgi-bin/tool/set_user_apply_info",type:"POST"}),getIdCode:o.httpMethod({url:"/cgi-bin/tool/apply_sms_code"}),checkIdCode:o.httpMethod({url:"/cgi-bin/tool/check_sms_code"})});var a,l,d,s=[],u=[],c={},m=function(e){var t=e.data,o=e.tmpl;return t.isweixin=i.isWeixinUser(),d=o(t),c=e,this},p={},f=function(){function e(){c.extraObj&&c.extraObj.remind&&n.init(c.extraObj.opt)}function i(){function r(){o.setApplyInfo({param:i,succ:function(o){e(),t.Dialog.remove(),submitBtn.text("确定"),c.onSubmit&&c.onSubmit(o)},err:function(e){return 106501===e.retcode?w.showError(a,"验证码错误"):w.showError(a,"验证失败"),submitBtn.text("确定"),!0}})}if(s.length<=0&&u.length<=0)return t.Dialog.remove(),e(),!1;var i={email:s.val(),mobile:u.val()},n=!1;i.email==p.email&&(n=!0);var l=!1;if(i.mobile==p.mobile&&(l=!0),c.hadProhibit&&a.val().length>0&&(l=!1),l&&n)return t.Dialog.remove(),e(),!1;var d=w.validate(s,w.rules.email),m=w.validate(u,w.rules.mobile);if(!d||!m)return c.onValidatedFail&&c.onValidatedFail(),t.Dialog.remove(),!0;if(!l&&u.val().length>0&&m&&!w.validate(a,w.rules.idCode,"请输入验证码",!1))return c.onValidatedFail&&c.onValidatedFail(),!0;if(c.submitDataFilter&&(i=c.submitDataFilter(i)),c.data.userInfo&&(i.token=c.data.userInfo.token),submitBtn.text("提交中..."),u.val().length<=0)return r(),!0;if(l){var f=t("#moblie-no-change-token").val();return f.length>0&&(i.token=f),r(),!0}return o.checkIdCode({param:{code:a.val(),phone:u.val()},succ:function(e){i.token=e.result.token,r()},err:function(e){return 106501===e.retcode?w.showError(a,"验证码错误"):w.showError(a,"验证失败"),submitBtn.text("确定"),!0}}),!0}var m=t.extend({title:"",globalClass:"",confirm:!0},c.confirmOpt);t.Dialog.confirm(d,{title:m.title,globalClass:m.globalClass,confirm:m.confirm}),c.data.price>0&&t("."+m.globalClass).css("margin-top",parseInt(t("."+m.globalClass).css("margin-top"))-90),s=t(c.emailNode),u=t(c.mobileNode),a=t(c.idCodeNode),l=t(c.idCodeBtn),submitBtn=t(c.submitNode),p={email:s.val(),mobile:u.val()},h(s),h(u),h(a),c.onShow&&c.onShow({emailNode:s,mobileNode:u,idCodeNode:a,idCodeBtn:l}),submitBtn.on("click",i),C(),r.tdw({action:"window-expo"})},h=function(e){if(t.fn.placeholder)e.placeholder();else{var o="[object OperaMini]"==Object.prototype.toString.call(window.operamini),r="placeholder"in document.createElement("input")&&!o;!r&&t.loadScript("//7.url.cn/edu/js/1.2.0/jquery.placeholder.js",function(){t.fn.placeholder&&e.placeholder()})}},v="重新获取",b=0,g=function(e,t,r){if(1!=b){b=1;var i=60;t.addClass("disabled").text(v+"("+i+")"),o.getIdCode({param:{phone:r},succ:function(){},err:function(){return!0}});var n=setInterval(function(){1>=i?(clearTimeout(n),t.text(v),t.removeClass("disabled"),b=0):t.text(v+"("+--i+")")},1e3)}},C=function(){s.on("blur",function(){w.validate(s,w.rules.email)}),s.on("focus",function(){s.removeClass("form-item-input-error"),s.closest(".part-row").find(".error-tip").addClass("error-tip-hidden")}),u.on("blur",function(){w.validate(u,w.rules.mobile)}),u.on("focus",function(){u.removeClass("form-item-input-error"),u.closest(".part-row").find(".error-tip").addClass("error-tip-hidden")}),a.on("focus",function(){a.removeClass("form-item-input-error"),a.closest(".part-row").find(".error-tip").addClass("error-tip-hidden")}),l.click(function(e){e.preventDefault(),t(this).hasClass("disabled")||w.validate(u,w.rules.mobile,!1)&&g(a,l,u.val())}),u.on("keyup paste",function(){var e=t(this),o=e.val();return/\D/.test(o)?(o=o.replace(/\D/g,""),e.val(o),!1):!0})},w={rules:{email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,mobile:/^1\d{10}$/,idCode:/^.+$/},validate:function(e,t,o,r){var i=e.val();return("boolean"==typeof o&&!o||!r)&&i.length<=0?(this.showError(e,o),!1):i&&!t.test(i)?(this.showError(e,o),!1):!0},showError:function(e,t){e.addClass("form-item-input-error");var o=e.closest(".part-row").find(".error-tip");o.removeClass("error-tip-hidden"),t&&"string"==typeof t&&o.find("span").html("<i></i>"+t)}};return{init:m,show:f}});
/*!@tencent/im-edu-pay/errWordings*/
;define("@tencent/im-edu-pay/errWordings",function(){return{106409:"报名失败，您报名的课程已经结束",166411:"报名失败，此课程已经开始上课",166412:"报名失败，请稍候重试",166415:"您已购买该课程，不需要再次付款",166416:"购买失败，免费课程请走免费的流程",101402:"您已经报名了此课程",106437:"报名失败，超出直播类型最大500人的限制",106446:"报名失败，机构创建者不能报名此课程",106447:"报名失败，此课程的老师或助教不能报名",106410:"报名失败，您报名的课程为付费课程",106666:"报名失败，您输入的验证码错误",106438:"您选择的优惠券不存在，请重新尝试！",106439:"您选择的优惠券已被锁定，请重新尝试！",106440:"您选择的优惠券已被使用，请重新尝试！",106441:"您选择的优惠券已被删除，请重新尝试！",106442:"您选择的优惠券已过期，请重新尝试！",166417:"购买失败，该课程还在审核中！",114103:"购买人数已达优惠人数上限，无法参与优惠，请重新点击购买。",106631:"该班级名额已报满，请选择名额未满班级报名。",106633:"购买失败，该机构已被清退。",166418:" 由于课程变化，该订单已失效 ，请选择其他可报名班级购买。",113137:"优惠券不适用于本课程",101401:"未支持的商品类型",101403:"企业支付已经支付，请勿重复支付",101404:"报名失败，该商品不存在",101405:"机构不存在",106632:"期不存在",113138:"确认付款失败，已经做了任务",114101:"折扣优惠不存在",114102:"折扣优惠不适合于本课程、班级",114104:"不在优惠的有效时间内",167001:"错误的会员类型",167002:"请使用全红包支付",1677013:"课程包不存在",1677014:"有待重试的订单在发货队列，拒绝支付",1677015:"已经支付过了课程，拒绝再次支付",1677016:"老师不能报名自己的授课",1677017:"红包使用时出错",1677018:"该班级被惩罚"}});

/*!@tencent/im-edu-pay/db.courseOperation*/
;define("@tencent/im-edu-pay/db.courseOperation",function(e){var t=e("@tencent/im-edu-db/edu-db");return t.extend({checkPayState:t.httpMethod({url:"/cgi-bin/paycheck",noNeedLogin:!0}),checkPkgPayState:t.httpMethod({url:"/cgi-bin/paycheck_cpkg",noNeedLogin:!0}),getPayToken:t.httpMethod({url:"/cgi-bin/paytoken",noNeedLogin:!0}),getPkgPayToken:t.httpMethod({url:"/cgi-bin/paytoken_cpkg",noNeedLogin:!0}),getInstallPayToken:t.httpMethod({url:"/cgi-bin/paytoken_installment",noNeedLogin:!0}),getEnterprisePayToken:t.httpMethod({url:"/cgi-bin/paygroup/paytoken",noNeedLogin:!0}),getEnterprisePkgPayToken:t.httpMethod({url:"/cgi-bin/paygroup/paytoken_cpkg",noNeedLogin:!0}),getEnterpriseInstallPayToken:t.httpMethod({url:"/cgi-bin/paygroup/paytoken_installment",noNeedLogin:!0}),getPayConfig:t.httpMethod({url:"/cgi-bin/tool/get_configure"}),getPayTokenWeixin:t.httpMethod({url:"/cgi-bin/paytoken_m",noNeedLogin:!0}),getApplyInfo:t.httpMethod({url:"/cgi-bin/tool/get_user_apply_info"}),getPkgApplyInfo:t.httpMethod({url:"/cgi-bin/tool/get_course_package_user_apply_info"}),setApplyInfo:t.httpMethod({url:"/cgi-bin/tool/set_user_apply_info",type:"POST"}),applyFree:t.httpMethod({url:"/cgi-bin/apply_course_sect",type:"POST",noNeedLogin:!0}),payConfirm:t.httpMethod({url:"/cgi-bin/payConfirm",type:"POST"}),pkgPayConfirm:t.httpMethod({url:"/cgi-bin/payConfirm_cpkg",type:"POST"}),installPayConfirm:t.httpMethod({url:"/cgi-bin/payConfirm_installment",type:"POST"}),checkTimeConflict:t.httpMethod({url:"/cgi-bin/tool/check_apply_time_conflict",type:"POST",noNeedLogin:!0}),notifyStatus:t.httpMethod({url:"/cgi-bin/tool/user_notify_status",type:"POST"}),remindTime:t.httpMethod({url:"/cgi-bin/passcard/remind",type:"POST"}),receiveSend:t.httpMethod({url:"/cgi-bin/user/accept_present_course",type:"POST"}),receiveSendOld:t.httpMethod({url:"/cgi-bin/user/accept_course",type:"POST"}),reserve:t.httpMethod({url:"/cgi-bin/reserve_course_sect",type:"POST"}),applyCourseUseCdkey:t.httpMethod({url:"/cgi-bin/train_course/apply_course",type:"POST"}),checkCdkey:t.httpMethod({url:"/cgi-bin/train_course/check_cdkey",type:"POST"}),getCourseDiscountList:t.httpMethod({url:"/cgi-bin/discount/list_suitable_discounts"}),payWithBalance:t.httpMethod({url:"/cgi-bin/pay_access/pay_with_balance",type:"POST"}),payCommonToken:t.httpMethod({url:"/cgi-bin/pay_access/paytoken",type:"POST"})}),t});



/*!/node_modules/@tencent/im-edu-pay/cashierPay.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/cashierPay.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<!--<div class="cashier-tip"></div>--><div class="fusion_dialog_footer_ext cashier-agreement"> <input checked="checked" id="js_accept_pay_contact" type="checkbox">同意<a target="_blank" class="nor-link cashier-checkbox" href="//ke.qq.com/proService.html">腾讯课堂服务协议</a></div>'),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-pay/checkTimeConflict.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/checkTimeConflict.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="icon-font i-info icon-msg-large"></div><p class="msg conflict-msg"> 上课时间与已报名课程冲突。您可以选择继续报名或<a class="nor-link" href="//ke.qq.com/myCourse/index.html#sid=signup" target="_blank">取消冲突课程</a>。</p>'),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-pay/paySucc.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/paySucc.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],flag=!1,packageId=packageId||null;return 1!==c.flag&&1==payid&&"undefined"==typeof qunid&&(flag=!0),_$out_.push('<i class="icon-font i-success icon-msg-large ',flag?"icon-msg-large-ex":"",'"></i><div class="mrl22 ',flag?"mrl22-ex":"",'"> <div class="part-left ',flag?"part-left-ex":"",'"> <div class="part part-title">'),_$out_.push(1===payid||isweixin?"报名成功":'购买成功，机构已将您加入付费服务群[<a href="/faq.html#/2/2/9" target="_blank" class="nor-link">?</a>]'),_$out_.push(" </div> "),1===c.flag&&_$out_.push(' <ul class="part-list"><li class="part part-content">您已报名多门上课时间冲突的课程，您可以在<a class="nor-link" href="//ke.qq.com/myCourse/index.html#sid=signup" report-tdw="action=window-coursemanege&ver1=',packageId||courseId,'" target="_blank">课程管理</a>中进行管理。</li></ul> '),_$out_.push(" "),"undefined"!=typeof qunid&&0!=qunid&&(_$out_.push(" "),1===payid?_$out_.push(' <ul class="part-list"> <li class="part part-content">您还可以加入课程讨论群，获得专业辅导：</li> </ul> <div class="part part-content"><i class="icon-font i-group"></i> <a href="javascript:void(0)" report-tdw="action=window-qun&ver1=',packageId||courseId,'" id="js_addgroup_tencent" class="part-action nor-link">',userInfo.gname,"</a>(",qunid,") </div> "):_$out_.push(' <ul class="part-list"> <li class="part part-content"> <span class="part-content-desc">付费服务群：</span><i class="icon-font i-group"></i><a href="javascript:void(0)" report-tdw="action=window-qun&ver1=',packageId||courseId,'" id="js_discuss_tencent" class="part-action nor-link">',userInfo.gname,"</a>(",qunid,") </li> </ul> "),_$out_.push(" ")),_$out_.push(" "),1===payid||"undefined"!=typeof packageId&&packageId||(_$out_.push(' <ul class="part-list"> <li class="part part-row part-row-desc"> '),_$out_.push(1==user_notify_status?" 您的手机号已屏蔽了开课提醒，建议重新开启 ":" 我们会在上课前通过QQ、短信或邮件通知您 "),_$out_.push(" "),"undefined"!=typeof qunid&&0!=qunid&&_$out_.push(' <a class="part-action nor-link" id="part-expand">开课提醒设置</a> '),_$out_.push('</li> </ul> <div class="part-form'),("undefined"==typeof qunid||0==qunid)&&_$out_.push(" part-form-expand"),_$out_.push('"> <div class="part part-row">QQ<span class="part-row-cont">',userInfo.qq,'</span></div> <div class="part part-row"> <label for="js_pay_mobile">手机</label> <input maxlength="11" class="ipt" type="text" id="js_pay_mobile" value="',"undefined"!=typeof userInfo.mobile?userInfo.mobile:"",'" placeholder="填写手机号"/> <div class="error-tip error-tip-hidden"><span><i></i>格式不正确</span></div> </div> <div class="part part-row part-id-code"> <input maxlength="6" class="ipt" type="text" id="js_id_code" placeholder="填写验证码"/> <a href="javascript:void(0) " class="btn-weak btn" id="js_id_code_btn" >获取验证码</a> <div class="error-tip error-tip-hidden"><span><i></i>验证码错误</span></div> </div> <div class="part part-row"> <label for="js_pay_email">邮箱</label> <input class="ipt" type="text" id="js_pay_email" value="',"undefined"!=typeof userInfo.email?userInfo.email:"",'" placeholder="填写常用邮箱"/> <div class="error-tip error-tip-hidden"><span><i></i>格式不正确</span></div> </div> <div class="part part-row"> <button class="btn-weak part-info-submit" id="js_pay_submit">确定</button> </div><!-- <div class="part part-link"> <a href="/faq.html#/0/1" target="_blank" class="nor-link hide">下载新版QQ，畅享在线教育新体验</a> </div> --> <input type="hidden" id="moblie-no-change-token" value="',"undefined"!=typeof userInfo.token?userInfo.token:"",'"> </div> ')),_$out_.push(' </div> <div class="part-right ',flag?"part-right-ex":"",'"> <div class="ptab"> <div class="ptab-title"> <a class="active" href="javascript:void(0);">APP下载</a><a href="javascript:void(0);">微信公众号</a> </div> <div class="ptab-panel-wrap"> <div class="ptab-panel"><div class="qrcode-bg"></div></div> <div class="ptab-panel" style="display: none;"> <img width="100" height="100" data-src="//9.url.cn/edu/node_modules/@tencent/im-edu-ui/img/nohash/wechat-qrcode-source.jpg" alt="微信公众号"> </div> </div> </div> <p class="qrcode-title">获取精选课程推荐</p> </div></div><div class="modal-ft"> <a href="javascript:void(0);" title="继续找课" report-tdw="action=window-morecourse&ver1=',packageId||courseId,'" class="modal-ft-btn--link js-pay-continue">继续找课</a> <a href="javascript:void(0);" title="立即学习" report-tdw="action=window-study&ver1=',packageId||courseId,'" class="btn-default js-pay-studynow">立即学习</a></div>'),_$out_.join("")}}});
/*!@tencent/im-edu-pay/applyPay*/
;define("@tencent/im-edu-pay/applyPay",function(e){function n(e,n){function o(){s&&clearTimeout(s),i&&i.remove(),i=null}function a(){var e=k(".fusion_dialog_frame");return e.length||(e=k(".cash_dialog_frame")),e.length?void e.bind("load",function(){}):void(new Date-d<1e4?setTimeout(function(){a()},16):BJ_REPORT.debug({msg:"加载支付组件超时",ext:{msid:I.isWeixinUser()?2043808:462656}}))}function t(){s=setTimeout(function(){var n=k(".fusion_dialog_wrap"),a=k(".fusion_dialog_header h3").html();if(s=0,1===n.length&&a.indexOf("购买课程")>-1){var r=k(".fusion_dialog_footer_ext");r.length||(n.append('<div style="height:28px;line-height:28px;" class="fusion_dialog_footer_ext"><input checked="checked" id="js_accept_pay_contact" type="checkbox" style="border:none;margin: 0 2px 0 10px;padding:0;">同意<a target="_blank" class="nor-link" href="//ke.qq.com/proService.html">腾讯课堂服务协议</a></div>'),k("#js_accept_pay_contact").change(function(){k(".fusion_dialog_wrap").remove(),k(".fusion_dialog_mask").remove(),o(),k.Dialog.confirm('您好，购买课程需同意<a target="_blank" class="nor-link" href="//ke.qq.com/proService.html">腾讯课堂服务协议</a>。',{title:"购买课程",submit:"同意",onAccept:function(){e.repay()},onCancel:function(){e.cancel({noQuery:!0})}})}))}t()},300)}function r(){R&&R.dialogBody&&(k(R.dialogBody).append(J.cashierPay()),k("#js_accept_pay_contact").change(function(){k(this).off(),R.close(),k(".fusion_dialog_mask").remove(),o(),k.Dialog.confirm('您好，购买课程需同意<a target="_blank" class="nor-link" href="//ke.qq.com/proService.html">腾讯课堂服务协议</a>。',{title:"购买课程",submit:"同意",onAccept:function(){e.repay()},onCancel:function(){e.cancel({noQuery:!0})}})}))}var i=k('<div class="mask"></div>').appendTo(document.body),c=e.param,s=0,d=new Date;I.isWeixinUser()?(BJ_REPORT.debug({msg:"微信账号支付次数",ext:{msid:2050780}}),R=cashier.create({title:"购买课程",hideBorder:!0,size:{w:480,h:450},methods:{onPaySuccess:function(){R.close(),o(),e.succ(),BJ_REPORT.debug({msg:"微信账号支付成功次数",ext:{msid:2050783}})},onPaying:function(){}},onError:function(){BJ_REPORT.debug({msg:"微信账号支付失败次数",ext:{msid:2465486}})},onCancel:function(){e.cancel()},onClose:function(){o(),e.close()}},{offerid:"1450000627",pf:"qq_m_qq-2001-iap-2015-edu",pfkey:"pfkey",params:encodeURIComponent(c.url_params),session_id:"hy_gameid",session_type:"st_dummy",sandbox:n,openid:k.cookie.get("uid_uin"),openkey:k.cookie.get("uid_a2")})):(BJ_REPORT.debug({msg:"QQ账号支付次数",ext:{msid:2050781}}),fusion2.dialog.buy({param:c.url_params,token:c.token,sandbox:n,title:"购买课程",context:"henryguo_seq001",onSuccess:function(){o(),e.succ(),BJ_REPORT.debug({msg:"QQ账号支付成功次数",ext:{msid:2050784}})},onError:function(){BJ_REPORT.debug({msg:"QQ账号支付失败次数",ext:{msid:2478493}})},onCancel:function(){e.cancel()},onClose:function(){o(),e.close()}})),a(),I.isWeixinUser()?r():t()}function o(){k(".fusion_dialog_wrap").remove(),k(".fusion_dialog_mask").remove()}function a(e,n){function o(){if(0!==O.price&&2!=O.souce&&N.pflag){var e=J.checkTimeConflict(N);e=e.replace("继续报名","继续购买"),e=e.replace("已报名课程","已购买课程"),k.Dialog.confirm(e,{submit:"仍然购买",onAccept:function(){n&&n()},onCancel:function(){E.openFail&&E.openFail({retcode:10002}),p({})},onClose:function(){E.openFail&&E.openFail({retcode:10003}),p({})}})}else n&&n()}e||(e={}),v.checkTimeConflict({param:{cid:e.courseId,term_id:e.term_id},succ:function(e){N=e.result||N,o()},err:function(e){return 1e5===e.retcode||100021===e.retcode||-1001===e.retcode||111===e.retcode?u():o(),!0}})}function t(){var e=r();location.href=e}function r(e){var n=location.protocol+"//ke.qq.com/applySuccess.html?";return"agency_recharge"===O.type?location.protocol+"//ke.qq.com/agency/index/index.html?fid="+O.productId+"&sid="+O.orderId+"&token="+e+"#tab=financial_management#refund_management":(O.packageId?n+="pkg_id="+O.packageId:(n+="cid="+O.courseId,O.term_id&&(n+="&term_id="+O.term_id)),n=n+"&platform="+O.platform+"&pagelocation="+O.pagelocation,B&&(n+="&pay_succ=1"),n)}function i(){var e=E,n=e.isShowSuccWin;n===!0?c():t()}function c(){function e(){var e;return O.packageId?e="//ke.qq.com/user/index/index.html#sid=plan":(e="//ke.qq.com/user/index/index.html#cid="+O.courseId,e+=O.term_id?"&tid="+O.term_id+"&fr=2":"&fr=2"),e}function n(){function n(){var e,n=document.referrer,o={},a=/ke.qq.com\/course\/[(list)|(\d+)]/.test(n),t=location.pathname.split("/"),r=t[t.length-1],i=!1;if(a){var c=T.get("course_report_"+r);c&&(o=JSON.parse(c),i=!0)}if(!i){e=b.getPageLocation("course");for(var s=0,d=e.length;d>s;++s){var u=e[s];u.cid==O.courseId&&(o=u.ext)}}return o}C.init({data:O,tmpl:J.paySucc,emailNode:"#js_pay_email",idCodeNode:"#js_id_code",idCodeBtn:"#js_id_code_btn",mobileNode:"#js_pay_mobile",submitNode:"#js_pay_submit",hadProhibit:1==O.user_notify_status,confirmOpt:{title:a,globalClass:"pay-succ",confirm:!0},onShow:function(){k(".part-form").hasClass("part-form-expand")||k("#js_pay_mobile").focus(),k("#part-expand").on("click",function(){var e=k(".part-form");k(this).text(e.hasClass("part-form-expand")?"开课提醒设置":"收起"),e.toggleClass("part-form-expand")}),k(".js-pay-continue").click(function(){window.open("/course/list","_blank"),k.Dialog.remove()}),k(".js-pay-studynow").click(function(){window.open(e(),"_blank"),k.Dialog.remove()}),k(".pay-succ").delegate("#js_addgroup_tencent, #js_discuss_tencent","click",function(){q.join(O.qunid,k.cookie.uin())}),k(".tips .tips-er-code").hover(function(){k(this).find(".tips-er-code-float").show()},function(){k(this).find(".tips-er-code-float").hide()})},submitDataFilter:function(e){return e.cid=O.courseId,e.term_id=O.term_id,e},onValidatedFail:function(){var e=k(".part-form");e.hasClass("part-form-expand")||(k("#part-expand").text("收起"),e.toggleClass("part-form-expand"))}}).show(),b.tdw(k.extend({action:"ApplySuccess",module:O.packageId?"coursegroup":"course",opername:"Edu",uin:k.cookie.uin(),ver1:O.packageId||O.courseId,ver2:O.has_record?2:1},n())),k.cookie.uin()||BJ_REPORT.debug({msg:"报名成功上报没uin",ext:{msid:2064167}})}O.c=N,o();var a="报名成功";O&&(O.price>0||location.href.indexOf("#sid=signup")>0)&&(2!=O.source||2===O.source&&10==O.pay_status)&&(a="购买课程"),v.notifyStatus({succ:function(e){O.user_notify_status=e.result.status,n()},err:function(){O.user_notify_status=0,n()}}),O.couponId&&(b.tdw({module:"youhuiquan",action:"coursepage_realpay",ver3:O.price,ver1:O.courseId}),b.tdw({module:"index",action:2!=O.type?"payment_coupon_livecourse_result":"payment_coupon_videocourse_result",ver3:O.price,ver1:O.courseId}))}function s(){var e,n;O.packageId?(e="checkPkgPayState",n={pkg_id:O.packageId}):(e="checkPayState",n={courseid:O.courseId,term_id:O.term_id,passcard:O.passcardClass?1:0}),v[e]({param:n,succ:function(e){var n=e.result.order_state;if(5===n)O.passcardClass?m({stateSrc:"server"},d):d({stateSrc:"server"});else{var o="unknown";1==n||4==n||10==n||11==n?o="nopay":2==n||3==n||6==n||7==n?o="confirm":(8==n||9==n)&&(o="back"),E.err&&E.err({orderState:o})}},err:function(){E.err&&E.err({orderState:"confirm"})}})}function d(e){var n,o,a,t;e||(e={}),O.packageId?(n="pkgPayConfirm",o="getPkgApplyInfo",t=a={pkg_id:O.packageId,platform:O.platform,from:O.from,pagelocation:O.pagelocation}):"undefined"!=typeof O.instalmentSeq?(n="installPayConfirm",E.succ&&E.succ(e),t=a={term_id:O.term_id,installment_seq:O.instalmentSeq}):(n="payConfirm",o="getApplyInfo",a={courseid:O.courseId,term_id:O.term_id,passcard:O.passcardClass?1:0},t={cid:O.courseId,platform:O.platform,from:O.from,pagelocation:O.pagelocation}),v[o]({param:t,succ:function(n){O.userInfo||(O.userInfo={}),O.has_record=n.result.has_record;var o=n.result,a=O.userInfo;a.mobile=o.mobile,a.qq=k.cookie.uin(),a.email=o.email,a.gname=o.gname,a.token=o.token,o.gcode&&(O.qunid=o.gcode,e.discussQun=o.gcode),E.succ&&E.succ(e),2!==E.param.type&&i()},err:function(){return O.userInfo||(O.userInfo={}),O.userInfo.qq=k.cookie.uin(),O.has_record=0,E.succ&&E.succ(e),i(),!0}}),0!==O.price&&"server"!==e.stateSrc&&2!==O.source&&v[n]({param:a})}function u(){E.nologin?E.nologin():x.show({succ:function(){location.reload()},close:function(){O.price&&E.openFail&&E.openFail({retcode:1e5}),E.err&&E.err({})}})}function p(e){var n;return P[106457]="您已接受《"+O.name+"》第"+O.term_id+"期的赠送，您可进入我的报名记录（可直接点击进入）里查询并上课",e.retcode&&(n=P[e.retcode],n||(n="服务器繁忙，请稍后再试("+e.retcode+")"),k.modal.alert(n,{onAccept:function(){location.reload()},onClose:function(){location.reload()}})),E.err&&E.err(e),!0}function l(){var e=null;k(document).off(".ptab").on("mouseenter.ptab",".ptab-title a",function(){var n=k(this);if(!n.hasClass("active")){n.addClass("active").siblings("a").removeClass("active");var o=n.parent().siblings(".ptab-panel-wrap").find(".ptab-panel").eq(n.index()).show();o.siblings("div").hide(),e||(e=o.find("img"),e.length&&!e.data("a")&&e.prop("src",e.data("src")).data("a",1))}})}function m(e,n){function a(){for(var o=c.find(".mod-choose-time__li_current"),a=[],t=0,r=o.length;r>t;t++)a.push(k(o[t]).data("termid"));v.remindTime({param:{tids:JSON.stringify(a),cid:O.courseId},succ:function(){n&&n(e)},err:function(){return!0}})}var t=O.terms.slice();o();for(var r=0;r<t.length;r++)0===t[r].term_id?t.splice(r,1):t[r].isRemind=!0;var i=J.remindTime({terms:t},{getTermTimeString:k.render.courseTime});k.Dialog.alert({body:i,title:"上课提醒",type:"succ",globalClass:"remindt",onAccept:function(){a()},onCancel:function(){a()},onClose:function(){a()}});var c=k(".remindt");c.on("click",".mod-choose-time__li",function(){k(this).toggleClass("mod-choose-time__li_current")})}function f(e,n){if(!e||!n)return{};var o={discount:{cou_id:"cou_id",discount_id:"discount_id",redenvelope_price:"balance"},course:{fid:"courseid",sid:"term_id"},agency_recharge:{fid:"productId",sid:"orderId"},course_package:{fid:"pkg_id"},report:["platform","from","pagelocation","pay_channel","ext"]},a=o.discount,t=o[n]||{},r=o.report,i={},c={},s={};for(var d in a)a.hasOwnProperty(d)&&e[a[d]]&&(i[d]=e[a[d]]);for(d in t)t.hasOwnProperty(d)&&(c[d]=e[t[d]]);for(c.type=n,d=0;d<r.length;d++){var u=r[d];e[u]&&(s[u]=e[u])}var p={discountinfo:JSON.stringify(i),productid:JSON.stringify(c),report:JSON.stringify(s),source:0,order_report:JSON.stringify(w.getInfo())};return e.ext_msg&&(p.ext_msg=e.ext_msg),p}function _(e){var n=e.result.token||{};S.loadEnterPrise(function(){if(TEG&&TEG.Service&&TEG.Service.EnterprisePay){var e=new TEG.Service.EnterprisePay({appId:"1450008443",env:n.is_sandbox?"sandbox":void 0,isSeparatePage:!0,epExt:{backUrl:r(n.token_id),guideUrl:"//ke.qq.com/midas.html",native_wxpay:"true"},secure:!1,sessionType:"UNL",user:k.cookie.uin(),allowChannels:["wechat","bank","qqwallet"]});n.is_sandbox||(BJ_REPORT.debug({msg:"企业支付次数",ext:{msid:2532587}}),BJ_REPORT.report()),e.pay({token:n.token_id,tokenUrl:n.url_params})}else p({retcode:10001})})}function g(){var e,o={courseid:O.courseId,term_id:O.term_id,passcard:O.passcardClass?1:0,order_report:JSON.stringify(w.getInfo())};O.ext_msg&&(o.ext_msg=O.ext_msg);var a={param:o,succ:function(e){var o={param:e.result,succ:function(e){O.passcardClass?m(e,d):d(e)},cancel:function(e){e&&e.noQuery?(b.tdw({action:"pay-cancelAgreement",ver1:O.courseId}),E.cancel&&E.cancel(e)):s()},close:function(e){E.close&&E.close(e)},repay:function(){b.tdw({action:"pay-show-again",ver1:O.courseId}),h(E)}},a=e.result.is_sandbox;return B?void S.loadEnterPrise(function(){if(TEG&&TEG.Service&&TEG.Service.EnterprisePay){var n=new TEG.Service.EnterprisePay({appId:"1450008443",env:a?"sandbox":void 0,isSeparatePage:!0,epExt:{backUrl:r(e.result.token_id),guideUrl:"//ke.qq.com/midas.html",native_wxpay:"true"},secure:!1,sessionType:"UNL",user:k.cookie.uin(),allowChannels:["wechat","bank","qqwallet"]});a||(BJ_REPORT.debug({msg:"企业支付次数",ext:{msid:2532587}}),BJ_REPORT.report()),n.pay({token:e.result.token,tokenUrl:e.result.url_params})}else p({retcode:10001})}):void(I.isWeixinUser()?S.loadCashier(function(){cashier?(E.openSucc&&E.openSucc(),n(o,a)):(p({retcode:10001}),E.openFail&&E.openFail({retcode:10001}))}):S.loadFusion(function(){fusion2?(E.openSucc&&E.openSucc(),n(o,a)):(p({retcode:10001}),E.openFail&&E.openFail({retcode:10001}))}))},err:function(e){return 1e5===e.retcode?u():(E.openFail&&E.openFail(e),p(e)),!0}};O.couponId&&(a.param.cou_id=O.couponId),O.discount_id&&(a.param.discount_id=O.discount_id),!!O.platform&&(a.param.platform=O.platform),!!O.from&&(a.param.from=O.from),!!O.pagelocation&&(a.param.pagelocation=O.pagelocation),"agency_recharge"===O.type?(a.param.orderId=O.orderId,a.param.productId=O.productId,a.param.balance=O.balance||0,a.param.ext=O.ext&&JSON.stringify(O.ext),O.couponId&&(a.param.cou_id=O.couponId),O.pay_channel&&(a.param.pay_channel=parseInt(O.pay_channel,10)),a.param=f(a.param,O.type),a.succ=_,e=v.payCommonToken(a)):O.packageId?(a.param={pkg_id:O.packageId,platform:O.platform||1,from:O.from||"",pagelocation:O.pagelocation||"",balance:O.balance||0,ext_msg:O.ext_msg||""},B?(a.param.pkg_id=a.param.pkg_id+"",a.param.balance=O.balance||0,a.param.ext=O.ext&&JSON.stringify(O.ext),O.couponId&&(a.param.cou_id=O.couponId),O.pay_channel&&(a.param.pay_channel=parseInt(O.pay_channel,10)),a.param=f(a.param,"course_package"),a.succ=_,e=v.payCommonToken(a)):e=v.getPkgPayToken(a)):"undefined"!=typeof O.instalmentSeq?(a.param.installment_seq=O.instalmentSeq,e=B?v.getEnterpriseInstallPayToken(a):v.getInstallPayToken(a)):B?(a.param.courseid=a.param.courseid+"",a.param.term_id=a.param.term_id+"",a.param.balance=O.balance||0,a.param.ext=O.ext&&JSON.stringify(O.ext),O.pay_channel&&(a.param.pay_channel=parseInt(O.pay_channel,10)),a.param=f(a.param,"course"),a.succ=_,e=v.payCommonToken(a)):(O.ext_msg&&(a.param.ext_msg=O.ext_msg),a.param.order_report=JSON.stringify(w.getInfo()),e=v.getPayToken(a))}function y(){O.passcardClass||O.packageId||"agency_recharge"===O.type?g():a({courseId:O.courseId,term_id:O.term_id},function(){g()}),O.couponId&&b.tdw({module:"index",action:2!=O.type?"payment_use_coupon_livecourse":"payment_use_coupon_videocourse",ver3:O.price,ver1:O.courseId})}function h(e){E=e,O=k.extend({},E.param);O.aid||0;y()}var k=e("jquery"),v=e("@tencent/im-edu-db/edu-db"),x=e("@tencent/im-edu-login/edu-login"),b=e("@tencent/im-edu-report/edu-report"),I=e("@tencent/im-check/check"),S=e("@tencent/im-edu-pay/loadPayScript"),q=e("@tencent/im-group-tencent/group-tencent"),C=(e("@tencent/im-edu-pay/vc"),e("@tencent/im-edu-pay/notify")),T=e("@tencent/im-local.data/local.data"),P=e("@tencent/im-edu-pay/errWordings"),w=e("@tencent/im-order-info/index");e("@tencent/im-edu-pay/db.courseOperation"),e("@tencent/im-modal/modal"),e("@tencent/im-report.pagelocation/report.pagelocation");var E,O,R,J={cashierPay:e("/node_modules/@tencent/im-edu-pay/cashierPay.tpl_tpl"),checkTimeConflict:e("/node_modules/@tencent/im-edu-pay/checkTimeConflict.tpl_tpl"),paySucc:e("/node_modules/@tencent/im-edu-pay/paySucc.tpl_tpl"),remindTime:e("/node_modules/@tencent/im-edu-pay/remindTime.tpl_tpl")},N={},B=!0;return l(),{init:h}});
/*!@tencent/im-edu-pay/applyBalance*/
;define("@tencent/im-edu-pay/applyBalance",function(e,n,r){var c=e("jquery"),o=e("/node_modules/@tencent/im-edu-pay/checkTimeConflict.tpl_tpl"),t=e("@tencent/im-edu-login/edu-login"),i=e("@tencent/im-edu-db/edu-db"),a=e("@tencent/im-edu-pay/errWordings");e("@tencent/im-edu-dialog/edu-dialog");var u={param:{},conflictData:{}},d={DISCOUNT:{cou_id:"couponId",discount_id:"discount_id",redenvelope_price:"balance"},TYPE:{course:{fid:"courseId",sid:"term_id"},course_package:{fid:"packageId",tid:"aid"},installment:{fid:"term_id",sid:"instalmentSeq"}},REPORT:["platform","from","pagelocation"]},l={dealError:function(e){{var n;u.param||{}}return e.retcode&&(n=a[e.retcode],n||(n="服务器繁忙，请稍后再试("+e.retcode+")"),c.modal.alert(n,{onAccept:function(){location.reload()},onClose:function(){location.reload()}})),u.err&&u.err(e),!0},confirmDialog:function(){var e=u.conflictData||{},n=c.Deferred();if(e.pflag){var r=o(e);setTimeout(function(){c.Dialog.confirm(r,{submit:"仍然报名",onAccept:function(){n.resolve()},onCancel:function(){u.openFail&&u.openFail({retcode:10002}),l.dealError({}),n.reject()},onClose:function(){u.openFail&&u.openFail({retcode:10003}),l.dealError({}),n.reject()}})},0)}else n.resolve();return n},handleLogin:function(){u.nologin?u.nologin():t.show({succ:function(){location.reload()},close:function(){u.openFail&&u.openFail({retcode:1e5}),u.err&&u.err({})}})}},f={checkTimeConflict:function(){var e=u.param||{},n=c.Deferred();return i.checkTimeConflict({param:{cid:e.courseId,term_id:e.term_id},succ:function(e){u.conflictData=e.result,n.resolve()},err:function(e){return 1e5===e.retcode||100021===e.retcode||-1001===e.retcode||111===e.retcode?(l.handleLogin(),n.reject()):n.resolve(),!0}}),n.promise()},payWithBalance:function(){var e,n=u.param||{},r=c.Deferred(),o=d.DISCOUNT,t=d.REPORT,a=d.TYPE,f=n.type||"course",p=a[f]||{},s={},m={},g={};for(var h in o)e=o[h],o.hasOwnProperty(h)&&n[e]&&(s[h]=n[e]);for(h in p)e=p[h],p.hasOwnProperty(h)&&n.hasOwnProperty(e)&&(m[h]=n[e]+"");for(m.type=f,h=0;h<t.length;h++)e=t[h],n[e]&&(g[e]=n[e]);var y={discountinfo:JSON.stringify(s),productid:JSON.stringify(m),report:JSON.stringify(g),source:0};return n.ext_msg&&(y.ext_msg=n.ext_msg),i.payWithBalance({param:y,succ:function(){r.resolve()},err:function(e){return 1e5===e.retcode?l.handleLogin():(u.openFail&&u.openFail(e),l.dealError(e)),r.reject(),!0}}),r}},p={jumpSuccPage:function(){var e="/applySuccess.html?",n=u.param;n.packageId?e+="pkg_id="+n.packageId:(e+="cid="+n.courseId,n.termId&&(e+="&term_id="+n.termId)),e+="&pay_succ=1",location.href=e},payWithBalance:function(){return f.payWithBalance()},checkTimeConflict:function(){u.param;return f.checkTimeConflict().then(function(){return l.confirmDialog()})},check:function(){var e=u.param;return e.passcardClass||"course_package"===e.type?c.when():p.checkTimeConflict()},initConfig:function(e){u=c.extend({},e)}},s={init:function(e){p.initConfig(e),p.check().then(function(){return p.payWithBalance()}).then(function(){return u.succ&&u.succ(),p.jumpSuccPage()})}};r.exports=s});
/*!/node_modules/@tencent/im-edu-instalment-pay/src/dialog.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-instalment-pay/src/dialog.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="instalment-title">分期购买</div><div class="instalment-dialog"> '),_$out_.push(200==order_state?' <div class="instalment-rules-tips js-installment-rules-tips">查看分期规则说明</div> <div class="instalment-rules"> <span class="arrow"><i class="icon-arrow"></i></span> <p>1、分期金额由机构与学员共同商定，学员支付首付后，即认为学员认可当前分期计划；</p> <p>2、支付分期款后，学员将获得相应上课权限；</p> <p>3、分期订单不支持退款。</p> <br> <div> <label class="f-checkbox js-instal-checkbox"><i class="icon-checkbox"></i><span class="f-rc-text">我已阅读并同意上述规则(勾选后，方可进行购买)</span></label> <span class="err-tip hide">请先确认并勾选上述条款</span> </div> </div> ':' <div class="instalment-rules-tips js-installment-rules-tips">查看分期规则说明</div> <div class="instalment-rules hide"> <span class="arrow"><i class="icon-arrow"></i></span> <p>1、分期金额由机构与学员共同商定，学员支付首付后，即认为学员认可当前分期计划；</p> <p>2、支付分期款后，学员将获得相应上课权限；</p> <p>3、分期订单不支持退款。</p> </div> '),_$out_.push(" <div> ",opt.content," </div></div>"),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-instalment-pay/src/instalment-by-time.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-instalment-pay/src/instalment-by-time.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],chapterMap=["","一","二","三","四","五","六",""];_$out_.push('<ul> <li class="clearfix instalment-item"> <div class="col-1">首付</div> <div class="col-right clearfix"> <div class="col-2"> <p class="instalment-specify">首付支付后，开始执行合约</p> <p class="instalment-price"> ',$.render.price(installments[0].price),' </p> </div> <div class="col-3"> '),_$out_.push(installments[0].order_state>1?' <span class="btn-paid">已支付</span> ':' <a class="btn-primary btn-button js-pay-btn disabled" data-installseq="0">待支付</a> <div class="installments-first-tip">请先阅读上方分期说明</div> '),_$out_.push(" </div> </div> </li> ");for(var k=1;k<installments.length&&1!=installments[k].order_state;k++);var shouldPayIndex=k;_$out_.push(" ");for(var i=1,len=installments.length;len>i;i++){_$out_.push(" ");var stage=installments[i];_$out_.push(' <li class="clearfix instalment-item"> <div class="col-1">第',chapterMap[i],'期</div> <div class="col-right clearfix"> <div class="col-2"> <p class="instalment-specify">可于',$.render.time.formatDate("YYYY-MM-DD",1e3*stage.installment_begin),"至",$.render.time.formatDate("YYYY-MM-DD",1e3*stage.installment_end),'间学习全部课程内容</p> <p class="extra-tip">有时效性的章节除外，如不在有效时间内开课的直播课</p> <p class="instalment-price">分期款：',$.render.price(stage.price),'</p> </div> <div class="col-3"> '),shouldPayIndex>i?_$out_.push(' <span class="btn-paid">已支付</span> '):shouldPayIndex==i?(_$out_.push(' <a class=" btn-primary btn-button js-pay-btn '),1==installments[0].order_state&&_$out_.push("disabled"),_$out_.push(' " data-installseq="',stage.installment_seq,'" > '),_$out_.push(1!=installments[0].order_state?" 立即支付 ":" 待支付 "),_$out_.push("</a> ")):_$out_.push(' <a class=" btn-primary btn-button js-pay-btn disabled " data-installseq="',stage.installment_seq,'" >待支付</a> '),_$out_.push(" <p>最迟还款日：",$.render.time.formatDate("YYYY-MM-DD",1e3*stage.pay_expire_time),"</p> </div> </div> </li> ")}return _$out_.push("</ul>"),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-instalment-pay/src/instalment-by-chapter.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-instalment-pay/src/instalment-by-chapter.tpl_tpl",function(require,exports,module){return function(it,opt){function chapterChange(t){for(var s=0;s<chNo.length;s++){var a=chNo[s],e=0;if(chapter_list&&chapter_list.length>0&&s>0)for(var l=s-1;l>=0;)e+=chapter_list[l].sub_info.length,l--;if(1e4==t)return"结束";if(!(t-a>0))return"第"+(t+e)+"节";t-=a}}with(it=it||{}){var _$out_=[];chNo=courseInfo.chNo||[],installments=courseInfo.installments;var chapterMap=["","一","二","三","四","五","六",""],chapter_list=chapterList;_$out_.push('<ul> <li class="clearfix instalment-item"> <div class="col-1">首付</div> <div class="col-right clearfix"> <div class="col-2"> <p class="instalment-specify">首付支付后，开始执行合约</p> <p class="instalment-price"> ',$.render.price(installments[0].price),' </p> </div> <div class="col-3"> '),_$out_.push(installments[0].order_state>1?' <span class="btn-paid">已支付</span> ':' <a class="btn-primary btn-button js-pay-btn disabled" data-installseq="0">待支付</a> <div class="installments-first-tip">请先阅读上方分期说明</div> '),_$out_.push(" </div> </div> </li> ");for(var k=1;k<installments.length&&1!=installments[k].order_state;k++);var shouldPayIndex=k;_$out_.push(" ");for(var i=1,len=installments.length;len>i;i++){_$out_.push(" ");var stage=installments[i];_$out_.push(' <li class="clearfix instalment-item"> <div class="col-1">第',chapterMap[i],'期</div> <div class="col-right clearfix"> <div class="col-2"> <p class="instalment-specify">本期课程内容适用于',chapterChange(stage.installment_begin),"至",chapterChange(stage.installment_end),'</p> <p class="instalment-price">分期款：',$.render.price(stage.price),'</p> </div> <div class="col-3"> '),shouldPayIndex>i?_$out_.push(' <span class="btn-paid">已支付</span> '):shouldPayIndex==i?(_$out_.push(' <a class=" btn-primary btn-button js-pay-btn '),1==installments[0].order_state&&_$out_.push("disabled"),_$out_.push(' " data-installseq="',stage.installment_seq,'" > '),_$out_.push(1!=installments[0].order_state?" 立即支付 ":" 待支付 "),_$out_.push(" </a> ")):_$out_.push(' <a class=" btn-primary btn-button js-pay-btn disabled " data-installseq="',stage.installment_seq,'" >待支付</a> '),_$out_.push(" </div> </div> </li> ")}return _$out_.push("</ul>"),_$out_.join("")}}});
/*!@tencent/im-edu-instalment-pay/src/edu-instalment-pay*/
;define("@tencent/im-edu-instalment-pay/src/edu-instalment-pay",function(e,t,n){var i=e("@tencent/im-edu-db/edu-db"),a=e("@tencent/im-edu-pay/applyPay"),l=e("@tencent/im-edu-pay/applyBalance"),s=e("@tencent/im-edu-login/edu-login"),c=e("/node_modules/@tencent/im-edu-instalment-pay/src/dialog.tpl_tpl"),o=e("/node_modules/@tencent/im-edu-instalment-pay/src/instalment-by-time.tpl_tpl"),r=e("/node_modules/@tencent/im-edu-instalment-pay/src/instalment-by-chapter.tpl_tpl");e("@tencent/im-modal/modal"),e("@tencent/im-edu-render/edu-render");var d,u,m,p=[],f=1,y=2,_=function(e,t){d=e,u=t,h()},h=function(){i.cgiHttp({url:"/cgi-bin/user/get_usr_installment_order",param:{cid:d,term_id:u},succ:function(e){m=e.result,g()},err:function(e){$.modal.alert(e.retcode,{title:"提示"})}})},g=function(){var e="",t="";m.installment_type===f?(t=o(m),e=c(m,{content:t}),$.Dialog.confirm(e,{title:"分期购买",onAccept:function(){},onClose:function(){}})):m.installment_type===y&&i.cgiHttp({url:"/cgi-bin/user/get_term_detail",param:{cid:d,term_id:u},succ:function(n){for(var i=n.result&&n.result.chapter_info,a=0;a<i.length;a++)p.push(i[a].sub_info.length);m.chNo=p,t=r({courseInfo:m,chapterList:i}),e=c(m,{content:t}),$.Dialog.confirm(e,{title:"分期购买",onAccept:function(){},onClose:function(){}}),$(".instalment-dialog").closest(".alert-tips").addClass("instalment-pay-dialog")},err:function(){}}),$(".instalment-dialog").closest(".alert-tips").addClass("instalment-pay-dialog")},b=function(e){var t={succ:function(e){location.reload()},cancel:function(){},err:function(e){},openFail:function(){},openSucc:function(){$.Dialog.remove()},nologin:function(){s.show({succ:function(){b()},close:function(){}})}};t.param={instalmentSeq:e,courseId:m.cid,name:m.name,passcardClass:1===m.passcard,terms:m.terms||[],price:m.price,aid:m.aid,billInfo:m,cou_id:m.cou_id,cou_price:m.cou_price,agency:m.agency_name,type:m.type,billno:m.billno,term_id:m.term_id,termId:m.term_id};var n={fid:d+"",sid:u+"",type:"installment"};i.getBalance({param:{productid:JSON.stringify(n)},succ:function(i){var s=!1;i.result&&(s=i.result.red_envelope_balance>=m.installments[e].price),s?(t.param.balance=m.installments[e].price,t.param.platform=1,t.param.type=n.type,l.init(t)):a.init(t)},err:function(){a.init(t)}}),m.balance};$(document).on("click",".js-pay-btn",function(e){e.preventDefault();var t=$(this),n=t.data("installseq");t.hasClass("disabled")||b(n)}),$(document).on("click",".js-installment-rules-tips",function(){var e=$(".instalment-rules");e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")}),$(document).on("click",".js-instal-checkbox",function(){$(this).hasClass("checked")?($(this).removeClass("checked"),$(".js-pay-btn").eq(0).addClass("disabled").text("待支付"),$(".installments-first-tip").show()):($(this).addClass("checked"),$(".js-pay-btn").eq(0).removeClass("disabled").text("立即支付"),$(".installments-first-tip").hide())}),n.exports=_});
/*!@tencent/im-edu-instalment-pay/index*/
;define("@tencent/im-edu-instalment-pay/index",function(e,n,t){var i=e("@tencent/im-edu-instalment-pay/src/edu-instalment-pay");t.exports=i});











































/*!/node_modules/@tencent/im-edu-pay/reserveSucc.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/reserveSucc.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],bgtime=1e3*termInfo.sub_bgtime,endtime=1e3*termInfo.sub_endtime,objBgtime=new Date(bgtime),mapWeekday=(new Date(endtime),["周日","周一","周二","周三","周四","周五","周六"]);return _$out_.push('<div class="custom_msg"> <p class="succ-wording">试听课预约成功 <a class="to-my-course" target="_blank" href="//ke.qq.com/myCourse/index.html#sid=plan">查看我的课表</a></p> <p class="class-notice">请准时上课，上课前您将收到QQ提醒</p> <p class="class-time"> 最近一节课上课时间：',$.render.time.formatDate("M月DD日",bgtime),"（",mapWeekday[objBgtime.getDay(mapWeekday)],"） ",$.render.timeSpan([{bgtime:termInfo.sub_bgtime,endtime:termInfo.sub_endtime}]),"</p></div>"),_$out_.join("")}}});
/*!@tencent/im-edu-pay/reserve*/
;define("@tencent/im-edu-pay/reserve",function(e){function c(){r.Dialog.alert({globalClass:"dialog-reservation-succ",type:"succ",title:"免费试听",content:a.reserveSucc(i)})}function n(){var e={cid:i.courseId,term_id:i.term_id,from_uin:i.from_uin||0,reserve_flag:1},n={param:e,succ:function(){2!=i.type&&c(),u.succ&&u.succ()},err:function(c){if(2==i.type)return!0;var o;return 99999===c.retcode?(d.show({succ:function(c){e.vfcode=c,t.reserve(n)},cancel:function(){}}),!0):(106411==c.retcode?o="您已经报名此课程，无需再次预约！":106601==c.retcode?o="您已经预约此课程，无需再次预约！":104103==c.retcode?o="预约失败，该课程还在审核中！":106409==c.retcode&&(o="该课程的试听已结束，继续学习请付费后进行！"),o&&r.Dialog.alert(o,{onAccept:function(){location.reload()},onClose:function(){location.reload()}}),u.err&&u.err(c),!0)}};t.reserve(n)}var r=e("jquery"),t=e("@tencent/im-edu-db/edu-db"),o=(e("@tencent/im-edu-report/edu-report"),e("@tencent/im-edu-login/edu-login"));e("@tencent/im-edu-pay/db.courseOperation");var u,i,a={reserveSucc:e("/node_modules/@tencent/im-edu-pay/reserveSucc.tpl_tpl")},d=e("@tencent/im-edu-pay/vc");return{init:function(e){u=e,i=u.param,o.isLogin()?n():o.show({succ:function(){n()},close:function(){u.cancel&&u.cancel()}})}}});
/*!@tencent/im-edu-pay/present*/
;define("@tencent/im-edu-pay/present",function(e){function t(){function e(){var e="//ke.qq.com/user/index/index.html#cid="+s.courseId;return e+=s.term_id?"&tid="+s.term_id+"&fr=2":"&fr=2"}function t(){u.init({data:s,tmpl:d.paySucc,emailNode:"#js_pay_email",idCodeNode:"#js_id_code",idCodeBtn:"#js_id_code_btn",mobileNode:"#js_pay_mobile",submitNode:"#js_pay_submit",hadProhibit:1==s.user_notify_status,confirmOpt:{title:a,globalClass:"pay-succ",confirm:!0},onShow:function(){c(".part-form").hasClass("part-form-expand")||c("#js_pay_mobile").focus(),c("#part-expand").on("click",function(){var e=c(".part-form");c(this).text(e.hasClass("part-form-expand")?"开课提醒设置":"收起"),e.toggleClass("part-form-expand")}),c(".js-pay-continue").click(function(){window.open("/course/list","_blank"),c.Dialog.remove()}),c(".js-pay-studynow").click(function(){window.open(e(),"_blank"),c.Dialog.remove()}),c(".pay-succ").delegate("#js_addgroup_tencent, #js_discuss_tencent","click",function(){l.join(s.qunid,c.cookie.uin())}),c(".tips .tips-er-code").hover(function(){c(this).find(".tips-er-code-float").show()},function(){c(this).find(".tips-er-code-float").hide()})},submitDataFilter:function(e){return e.cid=s.courseId,e.term_id=s.term_id,e},onValidatedFail:function(){var e=c(".part-form");e.hasClass("part-form-expand")||(c("#part-expand").text("收起"),e.toggleClass("part-form-expand"))}}).show()}s.c={};var a="报名成功";s&&(s.price>0||location.href.indexOf("#sid=signup")>0)&&(2!=s.source||2===s.source&&10==s.pay_status)&&(a="购买课程"),o.notifyStatus({succ:function(e){s.user_notify_status=e.result.status,t()},err:function(){s.user_notify_status=0,t()}}),s.couponId&&report.tdw({module:"youhuiquan",action:"coursepage_realpay",ver3:s.price,ver1:s.courseId})}function a(){var e={},i={cid:s.courseId,term_id:s.term_id||0,platform:s.platform||1,from:s.from||"",pagelocation:s.pagelocation||""};2===s.source&&0===s.term_id&&(i.passcard=1);var d='<div style="height:70px;">';d+='<div style="float:left;margin-right:10px;"><img src="'+metaData.cover_url+'" width=90 heiht=50></div>',d+='<div><h3 style="font-size: 18px;line-height: 1.5;text-overflow: ellipsis;overflow: hidden;height: 28px;white-space: nowrap;">',d+=metaData.name+"-"+metaData.termObj[metaData.cur_term_id||metaData.terms[0].term_id].name,d+='</h3><p class="gray">'+metaData.agency_name+"</p></div>",d+='</div><div class="clear"></div>',d+='<label class="js-agree-accept  f-checkbox" data-name="" data-value="1" style="line-height:26px;"> <i class="icon-checkbox" style="margin-top:4px;"></i> <span class="f-label-text" style="float: right;width: 580px;">我已阅读并同意<a target="_blank" class="nor-link js-agree-accept-protocol" href="//ke.qq.com/proService.html">《腾讯课堂服务协议》</a>  并同意：通过非腾讯课堂平台与机构进行的支付交易，如果产生纠纷与责任，均由交易双方承担，与腾讯课堂无关。</span></label>';var u=c.modal({className:".tips-buy-course .mod-course-banner__c-light",title:"接受赠送",content:d,enableYes:!1,width:700,txtYes:"接受赠送",yes:function(){return n.tdw({module:"accept_present",action:"click",obj1:"accept_present_accept",ver1:s.courseId,ver2:s.term_id}),o[2===metaData.source?"receiveSendOld":"receiveSend"]({param:i,succ:function(){o.getApplyInfo({param:{cid:s.courseId},succ:function(a){s.userInfo||(s.userInfo={});var o=a.result,n=s.userInfo;n.mobile=o.mobile,n.qq=c.cookie.uin(),n.email=o.email,n.gname=o.gname,n.token=o.token,o.gcode&&(s.qunid=o.gcode,e.discussQun=o.gcode),r.succ&&r.succ(e),2!==r.param.type&&t()},err:function(){return s.userInfo||(s.userInfo={}),s.userInfo.qq=c.cookie.uin(),r.succ&&r.succ(e),2!==r.param.type&&t(),!0}})},err:function(e){e=e||{},n.tdw({action:"get-clk",ver1:s.courseId,ver2:0});var t;switch(e.retcode){case 101402:t="已接受过赠送，无法再接受了";break;case 106409:t="课程已结束，无法接受赠送了";break;case 106447:t="您为该课程的老师、助教，无需赠送";break;case 106357:t="接受赠送失败，您已经接受过该门课程的赠送";break;case 106458:t="接受赠送失败，你已购买该门课的任意学，可进入任意课堂进行上课";break;case 106457:t="接受赠送课程失败，请重试。";case 107043:t="接受赠送失败，该课程已下架！";break;case 106633:t="接受赠送失败，该机构已被清退！"}return t?c.Dialog.alert(t,{onAccept:function(){location.reload()},onClose:function(){location.reload()}}):c.Dialog.alert("服务器繁忙，请稍后再试("+e.retcode+")"),r.err&&r.err(),!0}}),!0},no:function(e){e&&n.tdw({module:"accept_present",action:"click",obj1:"cancel"===e.btnName?"accept_present_cancel":"accept_present_close",ver1:s.courseId,ver2:s.term_id})}});a.isInitedEvents||(a.isInitedEvents=!0,c(document.body).on("click",".js-agree-accept",function(){var e=c(this);e.toggleClass("checked"),u.enableYes(e.hasClass("checked"))}).on("click",".js-agree-accept-protocol",function(e){e.stopPropagation()})),n.tdw({module:"accept_present",action:"exposure",obj1:"all",ver1:s.courseId,ver2:s.term_id})}var c=e("jquery"),o=e("@tencent/im-edu-db/edu-db"),n=e("@tencent/im-edu-report/edu-report"),i=e("@tencent/im-edu-login/edu-login");e("@tencent/im-edu-pay/db.courseOperation");var r,s,d={paySucc:e("/node_modules/@tencent/im-edu-pay/paySucc.tpl_tpl")},u=e("@tencent/im-edu-pay/notify"),l=e("@tencent/im-group-tencent/group-tencent");return{init:function(e){r=e,s=r.param,i.isLogin()?a():i.show({succ:function(){a()},close:function(){r.cancel&&r.cancel()}})}}});
/*!@tencent/im-get-client-version/get-client-version*/
;define("@tencent/im-get-client-version/get-client-version",function(){function e(){var e=!0;try{e=window.ActiveXObject||window.ActiveXObject.prototype?!0:!1}catch(t){e=!1}return e}function t(e,t){var n=document.createElement(e),i={"class":function(){n.className=t["class"]},style:function(){n.style.cssText=t.style}};for(var c in t)i[c]?i[c]():n.setAttribute(c,t[c]);return n}var n=function(){return this.clientVersion||(this.clientVersion=function(){for(var n,i=-1,c=0,r=function(){try{e()?i=new ActiveXObject("TimwpDll.TimwpCheck").GetHummerQQVersion()||-1:(n=$("webkit_embed").length||document.body.appendChild(t("embed",{id:"webkit_embed",type:"application/qscall-plugin",width:0,height:0,hidden:"true"})),n.InitActiveX("TimwpDll.TimwpCheck"),i=n.GetHummerQQVersion())}catch(c){}finally{n=null}};-1==i&&3>c;)r(),c++;return i}())};return n});
/*!/modules/courseDetail/template/taskinfo.tpl_tpl*/
;define("/modules/courseDetail/template/taskinfo.tpl_tpl",function(require,exports,module){return function(it,opt){function dealTime(e,t,i){return'<span class="tt-suffix">('+opt.formatDate("M月D日 hh:mm",1e3*e)+"-"+(new Date(1e3*t).getDate()-new Date(1e3*e).getDate()>=1?"次日":"")+opt.formatDate("hh:mm",1e3*t)+i+")</span>"}function dealEndReplayTime(e,t,i){return'<span class="tt-suffix">('+opt.formatDate("M月D日 hh:mm",1e3*e)+"-"+(new Date(1e3*t).getDate()-new Date(1e3*e).getDate()>=1?"次日":"")+opt.formatDate("hh:mm",1e3*t)+i+"已结束，回放将在24小时内上传)</span>"}function getFileSizeText(e){if(e>1048576)return(e/1024/1024).toFixed(1)+"MB";var t=(e/1024).toFixed(1)+"KB";return"0.0KB"===t?"0.1KB":t}with(it=it||{}){for(var _$out_=[],k=0,len=taskList.length;len>k;k++){var item=taskList[k],fontClass="",title="",suffixHTML="",specialHTML="",taskAttrStr="",finishedTag=!1,isOver=($.cookie.uin(),!1);switch(1===item.special_flag&&(specialHTML='<span class="flag-orange-bg">班级特色</span>'),item.type){case 1:switch(4==item.status?(fontClass="i-course-replay",title="回放"):(fontClass="i-course-live",title="直播"),item.status){case 1:suffixHTML=dealTime(item.bgtime,item.endtime,"");break;case 2:suffixHTML='<span class="flag-orange js-expr-on">正在直播</span>',item.play_ts>0&&(finishedTag=!0);break;case 3:suffixHTML=price>0?dealEndReplayTime(item.bgtime,item.endtime,""):'<span class="tt-suffix">('+opt.formatDate("M月D日",1e3*item.bgtime)+" 已结束)</span>",item.play_ts>0&&(finishedTag=!0),isOver=!0;break;case 4:suffixHTML=dealTime(item.bgtime,item.endtime,""),isOver=!0}break;case 2:fontClass="i-course-record",title="录播",item.resid_ext&&item.resid_ext.times>0&&(item.total_ts=item.resid_ext.times>>0,suffixHTML='<span class="tt-suffix">('+Math.ceil(item.total_ts/60)+"分钟)</span>");break;case 3:if(fontClass="i-course-data",title="资料",item.file=item.file||{},item.file_name=item.file.cw_name||"",item.file_size=item.file.cw_size||0,item.file_name&&item.file_size){var tempArr=item.file_name.split(".");fileType=tempArr.length>1?tempArr[tempArr.length-1]:"",suffixHTML='<span class="tt-suffix">('+fileType+(fileType?"，":"")+getFileSizeText(item.file_size)+")</span>"}break;case 4:fontClass="i-course-test",title="习题",item.resid_ext&&item.resid_ext.list&&item.resid_ext.list.length>0&&item.resid_ext.list[0].count>0&&(suffixHTML='<span class="tt-suffix">('+item.resid_ext.list[0].count+"道)</span>")}taskAttrStr=opt.getTaskTagAttr({room_url:room_url,pay_status:pay_status,role_type:role_type,price:price,is_study_over:is_study_over},item),_$out_.push(" <a ",taskAttrStr,'> <i class="icon-font ',fontClass,' item-icon"></i> <p class="task-tt"> <span class="task-tt-text" title="【',title,"】",item.name,'">【',title,"】",item.name,"</span>",specialHTML,"",suffixHTML," "),item.expr_flag&&(4!==pay_status&&5!==pay_status||3!==role_type)&&_$out_.push(' <span class="task-tt-expr">免费试学</span> '),_$out_.push(" </p> </a>")}return _$out_.push("<!-- end for -->"),_$out_.join("")}}});
/*!/modules/courseDetail/template/tasklist.tpl_tpl*/
;define("/modules/courseDetail/template/tasklist.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){for(var _$out_=[],i=0,len=chapter_info.length;len>i;i++){var chapter=chapter_info[i],add_num=0;if(chapter.sub_info=chapter.sub_info||[],chapter_info.length>1&&i>0)for(var k=i-1;k>=0;)add_num+=chapter_info[k].sub_info.length,k--;_$out_.push('<div class="task-chapter"><!-- <h3 class="chapter-tt">第',opt.number_cn(i+1),"章 ",chapter.name,'</h3> --> <div class="task-part-list"> ');for(var j=0,jLen=chapter.sub_info.length;jLen>j;j++){var part=chapter.sub_info[j];_$out_.push(' <div class="task-part-item"> <div class="task-part-hd"> <span class="tt-prefix">第',j+1+add_num,'节</span> <h3 class="part-tt">',part.name,'</h3> </div> <div class="task-task-list"> ');var html=[],_data={taskList:part.task_info||[],room_url:room_url,pay_status:pay_status,role_type:role_type,isCycleCourse:cycle>0,price:price,is_study_over:is_study_over};html.push(tmplTask(_data,{getTaskTagAttr:getTaskTagAttr,formatDate:opt.time.formatDate})),_$out_.push(" ",html.join("")," </div> </div> ")}_$out_.push(" </div></div>")}return _$out_.join("")}}});
/*!courseDetail/modules/state*/
;define("courseDetail/modules/state",function(e){function o(e,o){var t=location.hash||"",a=e+"="+o;t?"#"==t?t+=a:t="#"+a+"&"+t.slice(1):t="#"+a,location.hash=t.replace(/&+$/,"")}function t(e){var o=location.hash||"";o&&(o=o.replace(new RegExp("(#|&)("+e+"=[^&]*)(&|$)"),"$1$3").replace(/(&+$)|(#+$)/,"").replace(/(^#)&+/,"$1"),o||!history.replaceState?location.hash=o:history.replaceState({},document.title,location.href.split("#")[0]))}function a(e,t){if(o(e,1),"object"==typeof t)for(var a in t)o(a,t[a]);location.reload()}function n(e){for(var o in e){var a=e[o],n=c.bom.getHash(o);"function"==typeof a&&a(n),t(o)}}var c=e("jquery");return{save:a,load:n,update:function(e,a){t(e),o(e,a)},remove:t}});
/*!/modules/sale/saleRule/index.tpl_tpl*/
;define("/modules/sale/saleRule/index.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="sale-rule"> <a class="sale-rule-tt" href="javascript:;" title="分销规则">分销规则</a> <span class="sale-rule-triangle"></span> <i class="icon-font i-v-top sale-rule-arrow"></i> <div class="sale-rule-pop"> 点击我要分销生成专属链接。把课程专属链接分享给好友（QQ/微信/微博），好友购买后您可获得相应的提成。在分销主页可 <a href="//ke.qq.com/sale.html?tab=1" target="_blank" title="查看记录">查看记录</a>，并联系机构获取提成。 <a href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=1306" target="_blank" title="详细说明">详细说明</a> </div></div >'),_$out_.join("")}}});
/*!sale/saleRule/index*/
;define("sale/saleRule/index",function(e,l,n){var t=e("/modules/sale/saleRule/index.tpl_tpl");n.exports={html:function(e){return t(e)}}});
/*!courseDetail/modules/taskAttribute*/
;define("courseDetail/modules/taskAttribute",function(t,s,i){function e(t,s){c=["task-task-item"],_="javascript:void(0);",m=[],k=[],j="",v=s.task_bit_flag,f=t.room_url||"",g=t.pay_status,x=t.role_type,b=t.price,w=t.is_study_over,y=s.type,A=s.status,D=s.expr_flag,O=s.cid,$=s.aid,q=s.term_id,z=s.taid,B=s.video,C=s.resid_ext,E=s.file,F=s.exam}function u(t,s){c.push("js-task-live-open"),2===A||s?(c.push("task-item-jump"),c.push("js-task-login"),0===_.indexOf("http")&&m.push('target="_blank"'),m.push('data-cid="'+O+'"'),m.push('data-aid="'+$+'"'),m.push('data-tid="'+q+'"'),m.push('data-taid="'+z+'"'),m.push('data-streambitflag="'+task_bit_flag+'"'),m.push('data-target="'+f+'"'),m.push('onclick="$.render.url.live(this);"'),(t||!b)&&(c.push("js-expr-live-link"),c.push("js-expr-item")),s||(d(),m.push('report-close="1"'))):h()}function a(t,s){c.push("task-item-jump"),c.push(0!==b?"js-task-login":"js-task-without-login"),_=G+"#course_id="+O+"&term_id="+q+"&taid="+z,B&&B.vid&&(_+="&vid="+B.vid),(t||!b)&&(c.push("js-expr-video-link"),c.push("js-expr-item")),s||d(),m.push('target="_blank"')}function p(t,s){c.push("task-item-jump"),c.push(0!==b?"js-task-login":"js-task-without-login"),_=G+"#course_id="+O+"&term_id="+q+"&taid="+z,C&&C.list&&C.list[0]&&C.list[0].id&&(_+="&vid="+C.list[0].id),(t||!b)&&(c.push("js-expr-relive-link"),c.push("js-expr-item")),s||d(),m.push('target="_blank"')}function r(t,s){c.push("task-item-jump"),c.push("js-task-login"),_=G+"?cw_id="+E.cw_id+"&ac_type=3#course_id="+O+"&term_id="+q+"&taid="+z+"&vid=",(t||!b)&&(c.push("js-expr-doc-link"),c.push("js-expr-item")),s||d(),m.push('target="_blank"')}function n(t,s){s?(c.push("task-item-jump"),c.push("js-task-login"),_=G+"#course_id="+O+"&term_id="+q+"&taid="+z,F&&F.eid&&(_+="&exam_id="+F.eid),m.push('target="_blank"'),(t||!b)&&(c.push("js-expr-exam-link"),c.push("js-expr-item")),s||d()):h()}function d(){var t=["ver1="+O,"ver2="+q,"ver3="+z,"ver5="+y,"ver7="+A||null,"module=watch_without_sign","action=access_class"];m.push("report-tdw="+t.join("&"))}function o(t,s){1===y&&4!==A?u(t,s):1===y&&4===A?p(t,s):2===y?a(t,s):3===y?r(t,s):4===y?n(t,s):h()}function h(){c.push("task-item-nojump")}function l(t,s){return e(t,s),w?h():x&&3!==x?o(!1,!0):4===g||5===g?o(!1,!0):0===b?o(!1,!1):D?o(!0,!1):h(),k.push('class="'+c.join(" ")+'"'),k.push('href="'+_+'"'),k.push(m.join(" ")),j=k.join(" ")}var c,_,m,k,j,v,f,g,x,b,w,y,A,D,O,$,q,z,B,C,E,F,G="/webcourse/index.html";i.exports=l});
/*!/modules/courseDetail/template/liveNowCover.tpl_tpl*/
;define("/modules/courseDetail/template/liveNowCover.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="banner-cover-live"> <a class="banner-cover-play js-expr-btn" href="javascript:void(0);"> <i class="icon-play"></i> </a> <div class="banner-cover-live-below"> <div class="banner-cover-bar"></div> <span class="banner-cover-live-tips">正在直播</span> </div></div>'),_$out_.join("")}}});
/*!/modules/courseDetail/template/videoPlayCover.tpl_tpl*/
;define("/modules/courseDetail/template/videoPlayCover.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="banner-cover-video"> <a class="banner-cover-play js-expr-btn" href="javascript:void(0);"> <i class="icon-play"></i> </a></div>'),_$out_.join("")}}});
/*!/modules/courseDetail/template/tryStudyCover.tpl_tpl*/
;define("/modules/courseDetail/template/tryStudyCover.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="banner-cover-live"> <a class="banner-cover-play js-expr-btn" href="javascript:void(0);"> <i class="icon-play"></i> </a> <div class="banner-cover-live-below"> <span class="banner-cover-live-tips">试听</span> </div></div>'),_$out_.join("")}}});
/*!/modules/courseDetail/template/latestLiveCover.tpl_tpl*/
;define("/modules/courseDetail/template/latestLiveCover.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="banner-cover-latest"> <h2>下节直播：',name,"</h2> <p> ",$.render.time.format(bgtime)," "),isApplied||_$out_.push(' <a href="javascript:void(0);" class="js-sign-up">预约直播</a> '),_$out_.push(" </p></div>"),_$out_.join("")}}});
/*!courseDetail/modules/bannerCover*/
;define("courseDetail/modules/bannerCover",function(t,e,i){function a(){c.getLatestLiveTask({param:{course_id:h.cid},succ:function(t){y=t.result||{},u(f.getCurTerm())},err:function(){return!0}})}function n(){v.on("click",".js-expr-btn",function(){if(!k){var t=$(".js-chapter-list .task-item-jump[data-type=live] span"),e=$(".js-chapter-list .task-item-jump[data-type=replay] span"),i=$(".js-chapter-list .task-item-jump[data-type=video] span"),a=$(".js-chapter-list .task-item-jump[data-type=file] span"),n=$(".js-chapter-list .task-item-jump[data-type=exam] span");t.length>0?$(t[0]).click():i.length>0?$(i[0]).click():e.length>0?$(e[0]).click():a.length>0?$(a[0]).click():n.length>0?$(n[0]).click():$.modal.alert("暂无可学习的任务。"),d.tdw({action:"audition-now",ver1:h.cid+"-"+h.cur_term_id})}}).on("click",".js-sign-up",function(){$(".js-apply-btn").eq(0).click()})}function l(){return $(".task-task-item[data-type=live]").length}function r(){return $(".task-task-item[data-type=replay]").length}function s(){return $(".task-task-item[data-type=video]").length}function o(t){return t.try_study&&!t.is_applied}function p(t){$.extend(f,t),a(),n()}function u(t){var e=t.term_id,i=y[e];0!==e&&(o(t)?v.html(m.tryStudy()).show():l()?v.html(m.live()).show():s()||r()?v.html(m.video()).show():i&&i.name?(i.isApplied=t.is_applied,v.html(m.nextTask(i)).show()):v.hide().html(""))}var c=t("courseDetail/db.courseDetail"),d=t("@tencent/im-edu-report/edu-report"),m={live:t("/modules/courseDetail/template/liveNowCover.tpl_tpl"),video:t("/modules/courseDetail/template/videoPlayCover.tpl_tpl"),tryStudy:t("/modules/courseDetail/template/tryStudyCover.tpl_tpl"),nextTask:t("/modules/courseDetail/template/latestLiveCover.tpl_tpl")},h=window.metaData,v=$("#js-banner-cover"),k=$.bom.query("preview")>>0===1,y={},f={getCurTerm:function(){return{}}};i.exports={init:p,update:u}});
/*!/node_modules/@tencent/im-edu-task-list/template/taskinfo.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-task-list/template/taskinfo.tpl_tpl",function(require,exports,module){return function(it,opt){function dealTime(e,t,i){return'<span class="tt-suffix">('+opt.formatDate("M月D日 hh:mm",1e3*e)+"-"+(new Date(1e3*t).getDate()-new Date(1e3*e).getDate()>=1?"次日":"")+opt.formatDate("hh:mm",1e3*t)+i+")</span>"}function dealEndReplayTime(e,t,i){return'<span class="tt-suffix">('+opt.formatDate("M月D日 hh:mm",1e3*e)+"-"+(new Date(1e3*t).getDate()-new Date(1e3*e).getDate()>=1?"次日":"")+opt.formatDate("hh:mm",1e3*t)+i+"已结束，回放将在24小时内上传)</span>"}function getFileSizeText(e){if(e>1048576)return(e/1024/1024).toFixed(1)+"MB";var t=(e/1024).toFixed(1)+"KB";return"0.0KB"===t?"0.1KB":t}with(it=it||{}){for(var _$out_=[],k=0,len=taskList.length;len>k;k++){var item=taskList[k],fontClass="",title="",suffixHTML="",specialHTML="",taskAttrStr="",finishedTag=!1,isOver=!1;switch(1===item.special_flag&&(specialHTML='<span class="flag-orange-bg">班级特色</span>'),item.type){case 1:switch(4==item.status?(fontClass="i-course-replay",title="回放"):(fontClass="i-course-live",title="直播"),item.status){case 1:suffixHTML=dealTime(item.bgtime,item.endtime,"");break;case 2:suffixHTML='<span class="flag-orange js-expr-on">正在直播</span>',item.play_ts>0&&(finishedTag=!0);break;case 3:suffixHTML=price>0?dealEndReplayTime(item.bgtime,item.endtime,""):'<span class="tt-suffix">('+opt.formatDate("M月D日",1e3*item.bgtime)+" 已结束)</span>",item.play_ts>0&&(finishedTag=!0),isOver=!0;break;case 4:suffixHTML=dealTime(item.bgtime,item.endtime,""),isOver=!0}break;case 2:fontClass="i-course-record",title="录播",item.resid_ext&&item.resid_ext.times>0&&(item.total_ts=item.resid_ext.times>>0,suffixHTML='<span class="tt-suffix">('+Math.ceil(item.total_ts/60)+"分钟)</span>");break;case 3:if(fontClass="i-course-data",title="资料",item.file=item.file||{},item.file_name=item.file.cw_name||"",item.file_size=item.file.cw_size||0,item.file_name&&item.file_size){var tempArr=item.file_name.split(".");fileType=tempArr.length>1?tempArr[tempArr.length-1]:"",suffixHTML='<span class="tt-suffix">('+fileType+(fileType?"，":"")+getFileSizeText(item.file_size)+")</span>"}break;case 4:fontClass="i-course-test",title="习题",item.resid_ext&&item.resid_ext.list&&item.resid_ext.list.length>0&&item.resid_ext.list[0].count>0&&(suffixHTML='<span class="tt-suffix">('+item.resid_ext.list[0].count+"道)</span>")}taskAttrStr=opt.getTaskTagAttr({room_url:room_url,pay_status:pay_status,role_type:role_type,price:price,is_study_over:is_study_over},item),_$out_.push(" <a ",taskAttrStr,'> <i class="icon-font ',fontClass,' item-icon"></i> <p class="task-tt"> <span class="task-tt-text" title="【',title,"】",item.name,'">【',title,"】",item.name,"</span>",specialHTML,"",suffixHTML," "),item.expr_flag&&(4!==pay_status&&5!==pay_status||3!==role_type)&&_$out_.push(' <span class="task-tt-expr">免费试学</span> '),_$out_.push(" </p> </a>")}return _$out_.push("<!-- end for -->"),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-task-list/template/tasklist.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-task-list/template/tasklist.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){for(var _$out_=[],i=0,len=chapter_info.length;len>i;i++){var chapter=chapter_info[i],add_num=0;if(chapter.sub_info=chapter.sub_info||[],chapter_info.length>1&&i>0)for(var k=i-1;k>=0;)add_num+=chapter_info[k].sub_info.length,k--;_$out_.push('<div class="js-chapter-list pt20"> <div class="task-chapter"> <!-- <h3 class="chapter-tt">第',opt.number_cn(i+1),"章 ",chapter.name,'</h3> --> <div class="task-part-list"> ');for(var j=0,jLen=chapter.sub_info.length;jLen>j;j++){var part=chapter.sub_info[j];_$out_.push(' <div class="task-part-item"> <div class="task-part-hd"> <span class="tt-prefix">',opt.formatNumberPart(j+1+add_num),'</span> <h3 class="part-tt">',part.name,'</h3> </div> <div class="task-task-list"> ');var html=[],_data={taskList:part.task_info||[],room_url:room_url,pay_status:pay_status,role_type:role_type,isCycleCourse:cycle>0,price:price,is_study_over:is_study_over};html.push(tmplTask(_data,{getTaskTagAttr:getTaskTagAttr,formatDate:opt.time.formatDate})),_$out_.push(" ",html.join("")," </div> </div> ")}_$out_.push(" </div> </div> ")}return _$out_.push("</div>"),_$out_.join("")}}});
/*!@tencent/im-edu-task-list/modules/taskAttribute*/
;define("@tencent/im-edu-task-list/modules/taskAttribute",function(t,s,i){function e(t,s){m=["task-task-item"],c="javascript:void(0);",k=[],j=[],_="",v=s.task_bit_flag,f=t.room_url||"",x=t.pay_status,g=t.role_type,y=t.price,b=t.is_study_over,w=s.type,A=s.status,O=s.expr_flag,S=s.cid,q=s.aid,z=s.term_id,B=s.taid,C=s.video,D=s.resid_ext,E=s.file,F=s.exam}function a(t,s){m.push("js-task-live-open"),3===A&&m.push("task-task-item--end"),1!==A||s?2===A||s&&3!==A?(m.push("task-item-jump"),m.push("js-task-login"),m.push("js-open-tencent"),m.push("js-expr-live-link"),0===c.indexOf("http")&&k.push('target="_blank"'),2===A&&k.push('data-type="live"'),k.push('data-cid="'+S+'"'),k.push('data-aid="'+q+'"'),k.push('data-tid="'+z+'"'),k.push('data-taid="'+B+'"'),k.push('data-streambitflag="'+v+'"'),k.push('data-target="'+f+'"'),(t||!y)&&m.push("js-expr-item"),s||(h(),k.push('report-close="1"'))):o():(m.push("task-item-jump"),m.push("js-task-needSign"))}function p(t,s){m.push("task-item-jump"),m.push("js-expr-video-link"),m.push(0!==y?"js-task-login":"js-task-without-login"),c=G+"#course_id="+S+"&term_id="+z+"&taid="+B,C&&C.vid&&(c+="&vid="+C.vid),(t||!y)&&m.push("js-expr-item"),s||h(),k.push('data-type="video"'),k.push('target="_blank"')}function u(t,s){m.push("task-item-jump"),m.push("js-expr-relive-link"),m.push(0!==y?"js-task-login":"js-task-without-login"),c=G+"#course_id="+S+"&term_id="+z+"&taid="+B,D&&D.list&&D.list[0]&&D.list[0].id&&(c+="&vid="+D.list[0].id),(t||!y)&&m.push("js-expr-item"),s||h(),k.push('data-type="replay"'),k.push('target="_blank"')}function n(t,s){m.push("task-item-jump"),m.push("js-task-login"),m.push("js-expr-doc-link"),c=G+"?cw_id="+E.cw_id+"&ac_type=3#course_id="+S+"&term_id="+z+"&taid="+B+"&vid=",(t||!y)&&m.push("js-expr-item"),s||h(),k.push('data-type="file"'),k.push('target="_blank"')}function d(t,s){s?(m.push("task-item-jump"),m.push("js-task-login"),k.push('data-type="exam"'),m.push("js-expr-exam-link"),c=G+"#course_id="+S+"&term_id="+z+"&taid="+B,F&&F.eid&&(c+="&exam_id="+F.eid),k.push('target="_blank"'),(t||!y)&&m.push("js-expr-item"),s||h()):o()}function h(){var t=["ver1="+S,"ver2="+z,"ver3="+B,"ver5="+w,"ver7="+A||null,"module=watch_without_sign","action=access_class"];k.push("report-tdw="+t.join("&"))}function r(t,s){1===w&&4!==A?a(t,s):1===w&&4===A?u(t,s):2===w?p(t,s):3===w?n(t,s):4===w?d(t,s):o()}function o(){m.push("task-item-nojump")}function l(t,s){return e(t,s),b?o():g&&3!==g?r(!1,!0):4===x||5===x?r(!1,!0):0===y?r(!1,!1):O?r(!0,!1):1===w&&1===A?r(!1,!1):o(),j.push('class="'+m.join(" ")+'"'),j.push('href="'+c+'"'),j.push(k.join(" ")),_=j.join(" ")}var m,c,k,j,_,v,f,x,g,y,b,w,A,O,S,q,z,B,C,D,E,F,G="/webcourse/index.html";i.exports=l});
/*!/node_modules/@tencent/im-edu-task-list/template/codingTasklist.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-task-list/template/codingTasklist.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];_$out_.push('<div class="coding-tasklist"> ');for(var i=0,len=virtual_chapter_list.length;len>i;i++){var chapter=virtual_chapter_list[i],totalSuggestHours=0,chapterTitle="Part "+(chapter.num-1)+"："+chapter.vch_name;chapter.virtual_big_sub_course_list.forEach(function(t){t.virtual_sub_course_list.forEach(function(t){var i=parseFloat(t.vsc_timespan);totalSuggestHours+=i})});var hoursWording,isInproduction=0===totalSuggestHours;hoursWording=isInproduction?"制作中":"约需"+totalSuggestHours+"小时完成",_$out_.push(' <div class="coding-tasklist-chapter"> <div class="coding-tasklist-chapter-title"> ',chapterTitle,' <div class="coding-tasklist-chapter-hours"> ',hoursWording,' </div> </div> <div class="coding-tasklist-chapter-introduce">',chapter.vch_detail,"</div> </div> ")}return _$out_.push("</div>"),_$out_.join("")}}});
/*!@tencent/im-edu-task-list/edu-task-list*/
;define("@tencent/im-edu-task-list/edu-task-list",function(e,t,n){function i(){y.$container.on("click",".js-term-li",c).on("click",".js-task-login",function(e){var t=p(this).prop("href"),n=0!==C.price&&(p(this).hasClass("js-expr-video-link")||p(this).hasClass("js-expr-relive-link"));if(k.isLogin())return!0;e.preventDefault();var i=function(){n&&window.open(t,"_blank")};v.get("login").one("weixinWillDone",i),k.show({succ:function(){i()},close:function(){}})}).on("click",".js-task-without-login",function(e){h.tdw({module:"course",action:"click_preview",obj2:p(e).prop("href"),ver1:T.cid})}).on("click",".js-expr-video-link",function(e){h.tdw({action:"audition-video",obj2:p(e).prop("href"),ver1:T.cid})}).on("click",".js-expr-relive-link",function(e){h.tdw({action:"audition-relive",obj2:p(e).prop("href"),ver1:T.cid})}).on("click",".js-expr-live-link",function(e){h.tdw({action:"audition-alive",obj2:p(e).prop("href"),ver1:T.cid+"-"+C.term_id})}).on("click",".js-expr-doc-link",function(e){h.tdw({action:"audition-material",obj2:p(e).prop("href"),ver1:T.cid})}).on("click",".js-task-needSign",r)}function r(){p.modal({content:"该直播还未开始，报名后可以收到直播提醒",title:"确认报名",txtYes:"报名",txtNo:"不报名"}).yes(function(){p(".js-apply-btn").eq(0).click()})}function o(e){x||(p.extend(y,e),$=p.bom.query("preview")>>0===1,y.$container=p(y.$container),i(),x=!0)}function s(e){for(var t=T.terms,n=0;n<t.length;n++)if(t[n].term_id===e)return t[n];return null}function c(){var e=p(this).data("termid");a(T,s(e))}function l(){if(0!==C.term_id){p(".js-schedule").removeClass("task-schedule--over").removeClass("task-schedule--no-begin");var e=0,t="";if(C&&C.current_sub&&C.current_sub.ch_id){var n=0,i=0;C.chapter_info.forEach(function(e,r){e.sub_info&&e.sub_info.forEach(function(o,s){i++,e.ch_id===C.current_sub.ch_id&&o.csid===C.current_sub.csid&&(n=i,t="第"+p.render.number_cn(r+1)+"章 ",t+="第"+(s+1)+"节",p(".js-progress-txt").html(t))})}),e=100*n/i,p(".js-progress").css("left",e+"%"),p(".js-percent").css("width",100*n/i+"%")}else p(".js-schedule").addClass("task-schedule--no-begin"),p(".js-progress-txt").html("暂未开课"),p(".js-percent").css("width","0%"),p(".js-progress").css("left",e+"%");var r=(p(window).width()>=1200?412:232)*(100-e)/100<60;if(p(".js-progress-txt").toggleClass("text--left",r),C){var o=p.render.fomartTermDuration({bgtime:C.bgtime||C.apply_time||0,endtime:C.endtime,systime:T.sys_time});p(".js-progress-start").html(o.begin),p(".js-progress-end").html(o.end)}C&&C.cycle>0?p("#js_class_task").hide():p("#js_class_task").show()}}function a(e,t,n){var i=t.term_id;y.beforeTermChange(t,n)||(T=e,C=t,i&&(C.term_type_coding_college?m():(d(),l())),y.afterTermChange(t,n))}function u(e){return("0"+e).substr(e>99?-3:-2)}function d(){var e=b({chapter_info:C.chapter_info||[],room_url:C.room_url,tmplTask:g,getTaskTagAttr:j,pay_status:C.pay_status,role_type:C.role_type,cycle:C.cycle,price:C.price,is_study_over:C.is_study_over},{number_cn:p.render.number_cn,time:p.render.time,formatNumberPart:u});y.$container.html(e)}function m(){_.getNodeTreeFree({param:{cid:T.cid,term_id:C.term_id},succ:function(e){if(0===e.retcode){var t=f(e.result);y.$container.html(w(t))}},err:function(e){}})}function f(e){if(!e)return null;var t=e.course.data.term_course.chapter_list[0];return t}{var p=e("jquery"),_=e("@tencent/im-edu-db/edu-db"),h=e("@tencent/im-edu-report/edu-report"),k=e("@tencent/im-edu-login/edu-login"),v=e("@tencent/im-observer/observer"),g=e("/node_modules/@tencent/im-edu-task-list/template/taskinfo.tpl_tpl"),b=e("/node_modules/@tencent/im-edu-task-list/template/tasklist.tpl_tpl"),j=e("@tencent/im-edu-task-list/modules/taskAttribute");e("@tencent/im-util.cookie/util.cookie")}_.extend({getNodeTreeFree:_.httpMethod({url:"/cgi-bin/activity/coding/get_node_tree_free"})});var w=e("/node_modules/@tencent/im-edu-task-list/template/codingTasklist.tpl_tpl");e("@tencent/im-edu-render/edu-render");var y={$container:"#js_dir_tab",beforeTermChange:function(e){return!1},afterTermChange:function(e){}},x=!1,T={},C={},$=!1;n.exports={init:o,render:a}});
/*!/modules/courseDetail/template/partner.tpl_tpl*/
;define("/modules/courseDetail/template/partner.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<span>分享好友免费上课</span><i class="icon-font i-qr-code"></i><i class="triangle-arrow"></i><div class="course-partner-more"> <div id="partner-qrcode" class="course-partner-qrcode"></div> <p class="course-partner-advice">',isWeixin?"请使用微信扫码":"请使用手机QQ扫码",'</p> <p class="course-partner-tips">',isWeixin?"使用手机QQ扫码账号会被切换":"使用微信扫码账号会被切换","</p></div>"),_$out_.join("")}}});
/*!courseDetail/modules/partner*/
;define("courseDetail/modules/partner",function(e,r,t){function n(e,r){var t=o.Deferred(),n={};return(n=d[r])?t.resolve(n.hasPartner):s.getPartnerInfo({param:{tid:r},succ:function(e){var n=e&&e.result&&e.result.plan_flag||!1;t.resolve(n),d[r]={hasPartner:n}},err:function(){t.resolve(!1),d[r]={hasPartner:!1}}}),t}function i(e,r,t){if(t){f.html(u({isWeixin:a.isWeixinUser()}));var n={cid:e,tid:r},i=h.replace(/\${(\w+)}/g,function(e,r){return n[r]});new l("partner-qrcode",{text:i,width:100,height:100,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.CorrectLevel.M}),f.show()}else f.hide()}function c(e,r){n(e,r).then(function(t){i(e,r,t)})}var o=e("jquery"),a=e("@tencent/im-check/check"),l=e("@tencent/im-qrcode/qrcode"),s=e("courseDetail/db.courseDetail"),u=e("/modules/courseDetail/template/partner.tpl_tpl"),d={0:!1},f=o("#js-partner"),h="http://m.ke.qq.com/courseShareMid.html?_bid=167&_wv=795&cid=${cid}&tid=${tid}#from=172945";t.exports={handlePartner:c}});
/*!courseDetail/modules/term*/
;define("courseDetail/modules/term",function(t){function e(t){for(var e=0;e<F.length;e++)if(F[e].term_id===t)return F[e];return null}function n(t){z.terms.forEach(function(e){"undefined"!=typeof e.term_id&&0!==e.term_id&&t.call(e)})}function r(){return S&&"undefined"!=typeof S.term_id&&0!==S.term_id?!1:!0}function i(){return 1!==z.passcard?!1:8===z.passcard_status?!0:!1}function s(){if(r()){var t=!1;return n(function(){[1,2,4].indexOf(this.role_type)>-1&&(t=!0)}),t}return[1,2,4].indexOf(S.role_type)>-1}function a(){return-1!==[4,5].indexOf(z.passcard_status)&&!z.can_accept_course_passcard||-1!==[4,5,101].indexOf(S.pay_status)&&!S.can_accept_course}function u(){return $.can_accept_course||r()&&z.can_accept_course_passcard}function d(){return 1==$.present_status&&31==$.source}function l(){var t=1==D.bom.query("isDis");return!J&&t&&(E.tdw({action:"exposure",obj1:"course_distribution"}),J=!0),t}function c(){return s()||a()}function m(){if(r()){var t=!0;return n(function(){this.is_study_over||(t=!1)}),t}return $.is_study_over}function o(){if(r()){var t=!0;return n(function(){this.is_apply_over||(t=!1)}),t}return $.is_apply_over}function p(){if(r()){var t=!0;return n(function(){(!this.is_small_term||!this.remain_num||this.remain_num<=0)&&(t=!1)}),t}return $.is_small_term&&$.remain_num<=0}function _(){return $.term_installment&&$.term_installment.length>0?!0:!1}function f(){var t={200:"UNPAY",201:"PAY_PARTLY",209:"PAY_OVERTIME",210:"PAY_ALL"};return t[S.installment_state+""]}function h(){return 2===z.source||1==$.present_status&&$.source>=30&&31!=$.source}function b(){var t="";_()&&"PAY_ALL"!=f()?(t='<span>分期必读</span>分期期数与费用由机构学生双方商定，详情规则请参考<a href="//ke.qq.com/faq.html?id=6" target="_blank">《平台分期规则》</a>',"PAY_OVERTIME"==f()&&(t="<span>友情提示</span>由于您未按时支付还款，上课权限已收回，无法继续该班级的课程学习。")):(S.price>0||r())&&(t="<span>交易提醒</span>请通过本页面购买，任何平台外交易均无法得到腾讯课堂保障！"),D(".js-tips").html(t)}function v(t){var e=["btn-join","js-apply-btn"],n=z.termObj||{},r=n[t];if(m())return e.push("disabled"),e.push("btn-default"),k("apply",e);if(u())return e.push("btn-default"),k("pkg-accept",e);if(l())return e.push("btn-default"),g(),k("sale",e);if(c()&&!_()){var a="";return s()&&(e.push("js-admin"),a="查看任务"),e.push("btn-default"),k("task",e,a)}if(!_()){if(h())return e.push("btn-default"),k("accept",e);p()?e.push("disabled"):o()&&e.push("disabled"),e.push("btn-default"),i()&&e.push("disabled"),r&&r.term_warn_type?e.push("disabled"):0===t&&z.hasPunishment&&e.push("disabled");var b=256===(256&z.course_bit_flag),v=b&&r&&!r.is_applied;return v&&e.push("disabled"),d()?(e.push("btn-default"),e.push("js-apply-btn-restudy"),k("restudy",e)):k("apply",e)}switch(z.cur_installment=-1,f()){case"UNPAY":if(c())k("task",["btn-join","js-apply-btn","btn-default"],"立即学习"),w("hide","分期购买");else{var j="btn-join btn-default js-apply-btn-instalment";(r&&r.term_warn_type||0===t&&z.hasPunishment)&&(j+="disabled"),k("task",["hide"]),w(j,"分期购买")}break;case"PAY_PARTLY":for(var y=null,j="js-apply-btn-instalment",A=1;A<r.term_installment.length&&5==r.term_installment[A].order_state;A++)y=r.term_installment[A],z.cur_installment=A;y?(z.sys_time<y.installment_end||2==r.installment_type?k("task",["btn-join","js-apply-btn","btn-default"],"立即学习"):k("task",["btn-join","btn-default","disabled"],"立即学习"),j+=" btn-pay"):(k("task",["hide"]),j+=" btn-join btn-default"),A===r.term_installment.length&&(j+=" hide"),w(j,"分期还款");break;case"PAY_OVERTIME":k("apply",["hide"]),w("btn-pay gray","已逾期"),D(".instalment-price-tips").text("已失效");break;case"PAY_ALL":z.cur_installment=r.term_installment.length-1,k("task",["btn-join","js-apply-btn","btn-default"]),D(".instalment-price-tips").text("已付清")}}function j(t){E.tdw({action:"audition-nowexposure",obj2:t.prop("href"),ver1:z.cid+"-"+H})}function y(t,e){var n=D(".js-expr-btn");return n.hasClass("btn-expr--free")?void(e||(D(".js-chapter-list .js-expr-item span").length>0?n.show():n.hide())):(t?n.removeClass("hide"):n.addClass("hide"),void(t&&j&&(j(n),j=D.noop)))}function g(){if(!K){var t=R.html();D(".js-advice-btn").hide(),D(t).insertAfter(D("#js_btn_bar .js-apply-btn")).find(".sale-rule-triangle").hide(),K=!0}}function k(t,e,n){var r={apply:"立即报名",task:"立即学习",accept:"接受赠送",restudy:"接受重学","pkg-accept":"免费接受",sale:"我要分销"},i=U.find(".js-apply-btn"),s=n||r[t];e.push("js-apply-btn"),e.push("js-apply-btn-"+t),"apply"===t&&2===z.payid&&(s="立即购买"),i.removeClass().addClass(e.join(" ")).html(s)}function w(t,e){var n=U.find(".js-installments-btn");n.removeClass().addClass(t+" js-installments-btn").html(e)}function A(){var t=D('.js-term-baseinfo[data-termid="'+z.cur_term_id+'"]');0===t.find("i").length&&!s()&&a()&&t.append('<i class="icon-class-applyed"></i>')}function C(t){var e=z.termObj||{},n=e[t],r=D(".js-term-item").removeClass("active").filter('[data-termid="'+t+'"]').addClass("active").index(),i=D(".js-course-price"),s=D("#js-mod-tip"),a=s.find(".js-tip-des");i.removeClass("active"),n&&n.term_warn_type?(a.html("本班因教学质量问题暂时不能报名。"),s.show()):0===t&&z.hasPunishment?(a.html("因质量问题暂时不能报名任意学。"),s.show()):(i.filter('[data-termid="'+t+'"]').addClass("active"),s.hide());var u=D("#js-weigui-tip"),d=256===(256&z.course_bit_flag),l=d&&!n.is_applied;l?u.removeClass("hide"):u.addClass("hide"),D.event.trigger("updateSelectTerm",[r])}function P(t,n,r){H=t,r||D(".js-installments-btn").addClass("hide");var i=e(t);S=i?i:S,z.cur_term_id=H,$=S,2===z.payid&&N.handlePartner(z.cid,S.term_id),V.render(z,S,r)}function x(){var t=D(window),e=D("#js_tab").offset().top,n=t.scrollTop();n>e&&t.scrollTop(e)}function T(t,e){e||(!D("#js_dir_tab").is(":visible")&&t.term_id&&G.changeTab("js_dir_tab"),C(t.term_id),v(t.term_id),b(),A(),t.term_id?D(".js-term-current").html(S.name):0===t.term_id&&D(".js-term-current").html("任意学"))}function Y(t,e){if(y(t.try_study,r),I.update(t),!e){var n=t.term_id,r=!n;E.tdw({action:"priceterm-clk",ver2:t.term_id}),x(),n===F[0].term_id&&!z.passcard||z.passcard&&r?q.remove("term_id"):q.update("term_id",n),G.prevModeALink()}}function L(){if(z){var t,e=z.terms||[],n=!1;z.termObj={};for(var r=0,i=e.length;i>r;r++)t=e[r],t&&(t.term_id&&(z.termObj[t.term_id]=t),t.term_warn_type&&(n=!0));z.hasPunishment=n}}function O(t){var e=!0,n=!1,r=!0;D.extend(G,t),U=D(document.body),z.cur_term_id=z.cur_term_id||F[0].term_id,D.each(z.terms,function(t,e){e.term_id==z.cur_term_id&&($=e)}),B=D.bom.query("preview")>>0===1,L();var i=M.getHash("term_id");i.length&&(i=+i,0===i&&z.passcard?(z.cur_term_id=i,n=!0,r=!1):i>0&&D(z.terms).each(function(t,e){i==e.term_id&&(z.cur_term_id=i,r=!1)}),(z.cur_term_id!==z.terms[0].term_id||z.passcard)&&(e=!1)),(i.length&&r||0===i.length)&&z.passcard&&!z.cur_term_id&&(z.cur_term_id=0,n=!0),!z.cur_term_id&&(z.cur_term_id=F[0].term_id),V.init({$container:"#js_dir_tab",beforeTermChange:T,afterTermChange:Y}),n&&(P(z.terms[0].term_id,!1,e),z.cur_term_id=0),P(z.cur_term_id,n,e),v(z.cur_term_id),I.init({getCurTerm:function(){return S}})}var D=t("jquery"),E=(t("edu-base"),t("@tencent/im-observer/observer"),t("@tencent/im-edu-report/edu-report")),q=(t("/modules/courseDetail/template/taskinfo.tpl_tpl"),t("/modules/courseDetail/template/tasklist.tpl_tpl"),t("@tencent/im-edu-login/edu-login"),t("courseDetail/modules/state")),R=t("sale/saleRule/index"),M=t("@tencent/im-util.bom/util.bom"),I=(t("courseDetail/modules/taskAttribute"),t("courseDetail/modules/bannerCover")),V=t("@tencent/im-edu-task-list/edu-task-list"),N=t("courseDetail/modules/partner");window.taskList=V,t("@tencent/im-edu-render/edu-render");var U,H,S,$,z=window.metaData||{},B=!1,F=z.terms||[{}],G={changeTab:function(){},prevModeALink:function(){}},J=!1,K=!1;return{init:O,changeTerm:P,isApply:c}});
/*!/node_modules/@tencent/im-edu-comments/grid.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-comments/grid.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="loading-wrap"></div><div class="section-comment-list grid-data" ></div><div class="grid-page-wrap sort-page"></div>'),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-comments/comments-new-tpl.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-comments/comments-new-tpl.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],comments_info=rows.comments_info||{},good_percentage=comments_info.good_percentage||0,all_num=comments_info.all_num||0,good_num=comments_info.good_num||0,medium_num=comments_info.medium_num||0,bad_num=comments_info.bad_num||0;_$out_.push('<div class="comment-filter"> <div class="comment-statistics"> <span class="statistics-num"> '),0!=good_percentage?_$out_.push(" ",good_percentage,"% "):_$out_.push(' <span style="color: red;">-</span> '),_$out_.push(' </span> 好评度 </div> <div class="f-rc-list filter-comment-rank js-f-rc-list"> <label report-tdw="action=detail_checkcomment_filter&obj1=4&ver1=',rows.cid,'" class="f-radio ',0==rows.filter?"checked":"",'" data-id="0"><i class="icon-radio"></i><span class="f-rc-text">全部评价(',all_num,')</span></label> <label report-tdw="action=detail_checkcomment_filter&obj1=1&ver1=',rows.cid,'" class="f-radio ',1==rows.filter?"checked":"",'" data-id="1"><i class="icon-radio"></i><span class="f-rc-text">好评(',good_num,')</span></label> <label report-tdw="action=detail_checkcomment_filter&obj1=2&ver1=',rows.cid,'" class="f-radio ',2==rows.filter?"checked":"",'" data-id="2"><i class="icon-radio"></i><span class="f-rc-text">中评(',medium_num,')</span></label> <label report-tdw="action=detail_checkcomment_filter&obj1=3&ver1=',rows.cid,'" class="f-radio ',3==rows.filter?"checked":"",'" data-id="3"><i class="icon-radio"></i><span class="f-rc-text">差评(',bad_num,')</span></label> </div></div><div class="comment-list">');for(var i=0;i<rows.items.length;i++){var item=rows.items[i],first_comment_default="";first_comment_default=5==item.first_comment_score?"五星好评！课程非常棒，点赞！":"好评！课程还不错，继续保持！",_$out_.push(' <div class="comment-item"> <div class="item-left"> <img class="user-avatar" src="',item.pic_url,'" width="40" height="40" alt="',item.nick_name,'"> <p class="user-name">',item.nick_name,'</p> </div> <div class="item-right"> <div class="star-list"> <i class="icon-font i-star ',1==item.rating?"active":"",'"></i> <i class="icon-font i-star ',2==item.rating?"active":"",'"></i> <i class="icon-font i-star ',3==item.rating?"active":"",'"></i> <i class="icon-font i-star ',4==item.rating?"active":"",'"></i> <i class="icon-font i-star ',5==item.rating?"active":"",'"></i> </div> <div class="comment-bd">',""==item.first_comment?first_comment_default:item.first_comment,'</div> <div class="comment-ft"> '),rows.courseName?_$out_.push(' <span class="comment-where"> 评价来自 <a target="_blank" href="//ke.qq.com/course/',rows.cid,'" class="nor-link">《',rows.courseName,'》</a></span> <span class="comment-where">学习进度',Math.ceil(item.first_comment_progress/100),"%时评价</span> "):(_$out_.push(" "),"teacher"!=rows.classify&&_$out_.push(' <span class="comment-where">学习进度',Math.ceil(item.first_comment_progress/100),"%时评价</span> "),_$out_.push(" ")),_$out_.push(" "),item.course_name&&_$out_.push(' <span class="comment-where"> 评价来自 <a target="_blank" href="//ke.qq.com/course/',item.cid,'" class="nor-link">《',item.course_name,"》</a></span> "),_$out_.push(" "),_$out_.push(' <span class="comment-time">',ext.timeRender(1e3*item.first_comment_time),'</span> </div> <div class="comment-reply"> '),item.first_reply&&_$out_.push(' <div class="reply-item item--agency"> <div class="reply-bd"> <strong class="reply-tt">机构回复：</strong> ',item.first_reply,'</div> <div class="comment-ft"> <span class="comment-time">',ext.timeRender(1e3*item.first_reply_time),"</span> </div> </div> "),_$out_.push(" "),item.second_comment&&_$out_.push(' <div class="reply-item"> <div class="reply-bd"><strong class="reply-tt">追加评论：</strong>',item.second_comment,'</div> <div class="comment-ft"> <span class="comment-where">学习进度',Math.ceil(item.second_comment_progress/100),'%时评价</span> <span class="comment-time">',ext.timeRender(1e3*item.second_comment_time),"</span> </div> </div> "),_$out_.push(" "),item.second_reply&&_$out_.push(' <div class="reply-item item--agency"> <div class="reply-bd"><strong class="reply-tt">机构回复：</strong>',item.second_reply,'</div> <div class="comment-ft"> <span class="comment-time">',ext.timeRender(1e3*item.second_reply_time),"</span> </div> </div> "),_$out_.push(" </div> </div> </div>")}_$out_.push("</div>");var comment_num=all_num;switch(rows.filter){case"0":comment_num=all_num;break;case"1":comment_num=good_num;break;case"2":comment_num=medium_num;break;case"3":comment_num=bad_num}return 1==rows.end_flag&&comment_num>rows.total_num&&_$out_.push(' <div style="text-align: center;color: #999;margin:60px 0px;"><span>仅有打分、无文字的评价未做展示</span></div>'),comment_num==rows.total_num&&0==rows.total_num&&_$out_.push(' <div class="section-msg"> <div class="msg-inner"> <i class="icon-font icon-msg-large i-alert"></i> <div class="msg-text">暂无评论</div> </div></div>'),_$out_.join("")}}});
/*!@tencent/im-edu-comments/grid*/
;define("@tencent/im-edu-comments/grid",function(t){var e=t("jquery"),i=t("@tencent/im-pagectrl/pagectrl"),a={};a.grid=t("/node_modules/@tencent/im-edu-comments/grid.tpl_tpl"),a.grid_data=t("/node_modules/@tencent/im-edu-comments/comments-new-tpl.tpl_tpl");var n=function(t){var n,d,r=this,s={},l=[],o=a,h=a,g=[],c=[],p=function(){if(s=e.extend(s,t),!s.header)throw"header is undefined";l=s.header,s.gridTmpl&&(o=s.gridTmpl),s.dataTmpl&&(h=s.dataTmpl),n=e(s.el),s.data&&s.data.length>0&&(g=s.data),u(l),f(),m()},u=function(t){for(var i=[],a=0,d=n.width(),r=0;r<t.length;r++)if(t[r].width){var s=parseInt((t[r].width+"").replace("px",""));t[r].width=s+"px",d-=s}else a++,i.push(r);var l=parseInt(d/a);e.each(i,function(e,i){t[i].width=l-1+"px"})},f=function(){var t="";t="function"==typeof o?o({tableId:s.tableId||"",tableClass:s.tableClass||"",headers:s.header}):o.grid({tableId:s.tableId||"",tableClass:s.tableClass||"",headers:s.header}),n.html(t),s.pageCtrl&&r.resetPageCtrl(s.pageCtrl),g.length>0&&r.render(g)},m=function(){n.find(".grid-data").delegate("tr","mouseenter mouseleave",function(t){"mouseenter"===t.type?e(this).addClass("grid-row-hover"):e(this).removeClass("grid-row-hover")})};this.pageCtrl=null,this.render=function(t,i){for(var a="",d=[],r=0;r<l.length;r++)d[r]=l[r].width;a="function"==typeof h?h({rows:t,colWidth:d,ext:i}):h.grid_data({rows:t,colWidth:d,ext:i});var s=1;a=a.replace(/(^\s*)|(\s*$)/g,"");var o=e(a).each(function(){var t=1;e(this).addClass("grid-row-"+s),e(this).find("td").each(function(){(e(this).attr("style")+"").indexOf("width")<0&&e(this).css("width",d[t-1]),e(this).addClass("grid-col-"+t),t++}),s++});n.find(".section-comment-list").html(o)},this.onPageChange=function(t){c.push(t)},this.resetPageCtrl=function(t){this.pageCtrl?this.pageCtrl.reset(t):(d=e(t.el||n.find(".sort-page")),this.pageCtrl=new i(d,function(){var t=arguments;e.each(c,function(e,i){i.apply(r,t)})},{max:t.max,total:t.total,begin:t.begin||0,idx:t.idx||1}))},this.delegate=function(t,e,i){n.delegate(t,e,function(t){i(r,t)})},this.getRowCount=function(){return n.find(".grid-data-wrap table tr").length},this.jumpPage=function(t){this.pageCtrl&&d.find(".page-btn[data-index="+t+"]").trigger("click")},this.toggleLoad=function(){var t=n.find(".loading-wrap");t.is(":hidden")?t.show().spin({top:"100px"}):t.hide()},this.showLoad=function(){var t=n.find(".loading-wrap");t.show().spin({top:"100px"})},this.hideLoad=function(){var t=n.find(".loading-wrap");t.hide()},this.destroy=function(){n.html(),n.undelegate(),n.find(".grid-data").undelegate(),this.pageCtrl&&this.pageCtrl.destroy()},p(),this.$elem=n};return n});
/*!@tencent/im-comment-star/comment-star*/
;define("@tencent/im-comment-star/comment-star",function(t,a,n){var s=(t("jquery"),function(t){function a(){s.on("click","i",function(){e.setStar(parseInt($(this).data("count"))),h.trigger(l+":click"),f=!0}),s.on("mouseenter mouseleave","i",function(t){f||c||("mouseenter"==t.type?($(this).prevAll().attr("class","star"),$(this).attr("class","star")):($(this).prevAll().attr("class","no-star"),$(this).attr("class","no-star")))})}function n(t){var a="";return a=$.isArray(o)?t?o[t-1]:"":o,u?'<span class="star-label">'+a+"</span>":""}var s,r=5,i=0,e=this,o=["很不满意","不满意","一般","满意","很满意"],c="",l="__commentStar__",u=!0,f=!1,h=$("i"),v=function(){s=$(t.el),t.maxCount&&(r=t.maxCount),t.star&&(i=t.star,f=!0),t.starLabel&&(o=t.starLabel),t.showStarLabel===!1&&(u=!1),t.clickable!==!1?a():c="no-event",s.addClass("star-list"),e.setStar(i)};this.setStar=function(t){i=t,d()},this.getStar=function(){return i},this.setStarLabel=function(t){s.find(".star-label").text(t)};var m=function(t){var a=t+"";return a.indexOf(".")<0?0:parseFloat("0"+a.substring(a.indexOf(".")))},d=function(){for(var t="",a=0,e=m(i),o=parseInt(i),l=0;o>l;l++)a++,t+='<i class="'+c+'" data-count="'+a+'"></i>';e>.25&&.75>e?(o+=1,t+='<i class="'+c+' half-star" data-count="'+a+'"></i>'):e>.75&&(o+=1,t+='<i class="'+c+'" data-count="'+a+'"></i>');var u=o-r;if(0>u)for(var f=0;f<Math.abs(u);f++)a++,t+='<i class="no-star '+c+'" data-count="'+a+'"></i>';t+=n(o),s.html(t),c||b()},b=function(){var t=0;s.find("i").each(function(){var a=o;$.isArray(o)&&(a=o[t]),$(this).attr("title",a),t++})};this.on=function(t,a){h.on(l+":"+t,a())},this.off=function(t,a){h.off(l+":"+t,a)},v()});n.exports=s});
/*!@tencent/im-edu-comments/comments*/
;define("@tencent/im-edu-comments/comments",function(e){var t=e("jquery"),n=e("@tencent/im-edu-db/edu-db"),o=e("@tencent/im-edu-comments/grid"),c=(e("@tencent/im-comment-star/comment-star"),{});c.comments=e("/node_modules/@tencent/im-edu-comments/comments-new-tpl.tpl_tpl"),c.grid=e("/node_modules/@tencent/im-edu-comments/grid.tpl_tpl");var i,s,r,m,a,u,l,d=0,f={filter:0,classify:"",comments_info:{}};n.extend({get_course_comments:n.httpMethod({url:"/cgi-bin/comment_new/course_comment_list",noNeedLogin:!0}),get_teacher_comments:n.httpMethod({url:"/cgi-bin/comment_new/teacher_comment_list",noNeedLogin:!0}),get_course_comment_stat:n.httpMethod({url:"/cgi-bin/comment_new/course_comment_stat",noNeedLogin:!0}),get_teacher_comment_stat:n.httpMethod({url:"/cgi-bin/comment_new/teacher_comment_stat",noNeedLogin:!0})});var _=function(e){m=e.courseId,u=e.courseName,a=e.tid,f.classify=e.classify?e.classify:"course",i=t("#js-comments"),r=t("#js-omments-total"),l=t('.l-side-nav li[data-hook="wraper-comment"] p'),b(),g(),d=1,w(0,!0)},g=function(){s||(s=new o({el:"#js-comments-list",tableId:"comments-list-table",dataTmpl:c.comments,gridTmpl:c.grid,header:[]}),s.onPageChange(function(e){t(".js-tab-nav").offset()&&t(window).scrollTop(t(".js-tab-nav").offset().top),w(e-1,!1)}))},h=function(){t(".js-f-rc-list").on("click","label",function(){t(this).addClass("checked").siblings().removeClass("checked"),f.filter=t(this).attr("data-id"),w(0,!0)})},p=function(e){var n=new Date,o=new Date(n.getFullYear(),n.getMonth(),n.getDate());return e-o.getTime()>0?t.render.time.formatDate("hh:mm",e):t.render.time.formatDate("YYYY-MM-DD",e)},v=function(e,n){e.items||(e.items=[]),u&&(e.courseName=u),e.cid=m,s.render(e,{timeRender:p}),n&&s.resetPageCtrl({total:e.total_page,max:3,idx:1}),setTimeout(function(){t("#js-comments-list").lazyload()},0)},b=function(){"course"==f.classify?n.get_course_comment_stat({param:{cid:m},succ:function(e){var t=e.result;f.comments_info=t},err:function(){return!0}}):"teacher"==f.classify&&n.get_teacher_comment_stat({param:{tid:a},succ:function(e){var t=e.result;f.comments_info=t},err:function(){return!0}})},w=function(e,t){function o(n){d=2,setTimeout(function(){y(),s.hideLoad(),n.result.curPage=e,n.result.filter=f.filter,n.result.comments_info=f.comments_info,n.result.classify=f.classify,v(n.result,t),h()},150),l.text("学员评论("+n.result.total+")")}return s.showLoad(),0===m?void o({result:{total:0,comments:[]}}):void("course"==f.classify?n.get_course_comments({param:{cid:m,count:10,page:e,filter_rating:f.filter},succ:function(e){o(e)},err:function(){return d=2,y(),s.hideLoad(),v({},t),!0}}):"teacher"==f.classify&&n.get_teacher_comments({param:{tid:a,count:10,page:e,filter_rating:f.filter},succ:function(e){o(e)},err:function(){return d=2,y(),s.hideLoad(),v({},t),!0}}))},y=function(){i.css("visibility","visible"),i.parent().find(".spinner").remove()},j=function(){return 2!==d?void i.parent().spin():void w(0,!0)};return{init:_,show:j}});
/*!courseDetail/modules/comments*/
;define("courseDetail/modules/comments",function(e){function t(e,t){i.getCommentCount({param:{cid:e},succ:function(e){var n=e&&e.result&&e.result.all_num;t&&t.html("("+n+")")},err:function(){}})}function n(e){kid=r.cid,c.tdw({module:"comment",action:"detail_checkcomment_view",ver1:kid,ver2:r.aid}),e&&e.fromHash||c.tdw({module:"comment",action:"detail_checkcomment_click",ver1:kid,ver2:r.aid}),m||(m=!0,o.init({courseId:kid,classify:"course"}))}var c=e("@tencent/im-edu-report/edu-report"),i=e("courseDetail/db.courseDetail"),o=e("@tencent/im-edu-comments/comments"),m=!1,r=window.metaData;return{init:n,fillCommentCount:t}});
/*!courseDetail/modules/classes*/
;define("courseDetail/modules/classes",function(e){var t=e("jquery"),a=e("@tencent/im-str-ellipsis/str-ellipsis"),s=function(e,a,s,i){var r=function(t,s,i){var r="class-more--left",n=t.hasClass(r),l=e.closest("ul"),c=l.data("more_index");if(s){var o=c>=s,d=s>c;if(o&&!n)return;if(d&&n)return}var f=function(t){var s=(t?"right":"left")+"actived",i=(t?"left":"right")+"actived",r=null,n=null,o=l.data(s)||(t?c:0);t?(n=e.filter(".active"),r=a.filter("[data-idx="+o+"]")):(n=a.filter(".active"),r=e.filter("[data-idx="+o+"]")),n.length&&l.data(i,n.data("idx")),r.length&&!r.hasClass("active")&&r.click()};if(n)i?(t.addClass("disabled"),l.animate({marginLeft:0},300,function(){t.removeClass("disabled"),t.removeClass(r),f()})):(t.removeClass(r),l.css({marginLeft:0}));else{var u=0-l.data("SIDER_WIDTH");i?(t.addClass("disabled"),l.animate({marginLeft:u},300,function(){t.removeClass("disabled"),t.addClass(r),f(!0)})):(t.addClass(r),l.css({marginLeft:u}))}};if(s){if(i){var n=s.find("[data-termid="+t.trim(i)+"]").index();r(s.find(".course-class--more .class-more"),n+1)}return s.on("click",".course-class--more .class-more",function(){var e=t(this);e.hasClass("disabled")||r(e,0,!0)})}t(document).on("click",".section--course-banner .class-more",function(){var e=t(this);e.hasClass("disabled")||r(e,0,!0)}).on("updateSelectTerm",function(e,a){r(t(".section--course-banner .class-more"),a+1)})},i=function(e){var a=0;return e.each(function(){a+=t(this).outerWidth()}),a},r=function(e,t){for(var a=0,s=100,r=e.length;i(e)>t&&s--;){var n=e.eq(a).find(".item-name"),l=n.text();l=l.substring(0,l.length-1),n.text(l),a=++a%r}},n=function(e,s,r){r=r||80;var n=e.find(".flag-orange").length;r-=10*n;var l=i(e);return l>s&&e.each(function(){var e=t(this),s=e.find(".item-name");s.html(a.substring(s.html(),r,1))}),l},l=function(e,a,l){var c=e.find(".js-term-item"),o=e.closest(".class-tt-list-wrap"),d=o.find(".class-more"),f=o.outerWidth(),u=d.outerWidth(),m=f-u;e.data("SIDER_WIDTH",m);var v=i(c);if(!(f>=v)){var h=c.length;if(3>=h)n(c,f);else{e.closest(".course-class").addClass("course-class--more");var g=2,C=0;c.each(function(){var e=t(this);g+=e.outerWidth(),m>g&&C++});var b=c.slice(0,C),x=c.slice(C,h);e.data("more_index",C);r(x,m),b.eq(C-1).css("margin-right",m-i(b)+2),s(b,x,a,l)}}},c=function(){t(document).on("termSelector:init",function(e,a,s){l(t("#box_term_master"),a,s)})},o=function(){l(t("#js_term_master")),c()};return{init:o}});
/*!@tencent/im-player.config/player.config*/
;define("@tencent/im-player.config/player.config",function(){return{width:727,height:527,vodFlashUrl:"//imgcache.qq.com/tencentvideo_v1/player/TPout.swf?playertype=11",autoplay:!0,loadingswf:"//imgcache.qq.com/minivideo_v1/vd/res/skins/ke_loading.swf",flashWmode:"opaque",vodFlashExtVars:{showend:0,searchbar:0,searchpanel:0}}});
/*!@tencent/im-edu-course-detail/modules/base32*/
;define("@tencent/im-edu-course-detail/modules/base32",function(t,e,u){function n(){var t=0,e=0;this.output="",this.readByte=function(u){return"string"==typeof u&&(u=u.charCodeAt(0)),0>t?e|=u>>-t:e=u<<t&248,t>3?(t-=8,1):(4>t&&(this.output+=r[e>>3],t+=5),0)},this.finish=function(u){var n=this.output+(0>t?r[e>>3]:"")+(u?"$":"");return this.output="",n}}function i(t){var e=new n,u=e.update(t,!0);return u}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";n.prototype.update=function(t,e){for(var u=0;u<t.length;)u+=this.readByte(t[u]);var n=this.output;return this.output="",e&&(n+=this.finish()),n};var o={Encoder:n,encode:i};u.exports=o});
/*!@tencent/im-tvp-bugfix/tvp-bugfix*/
;define("@tencent/im-tvp-bugfix/tvp-bugfix",function(e,t){!function(n){!function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,o=0;if("function"!=typeof t)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError}for(;r>o;)o in i&&(n=t.call(e,n,i[o],o,i)),o++;return n}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),o=r.length>>>0;if("[object Function]"!=={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(n=t),i=0;o>i;){var a;Object.prototype.hasOwnProperty.call(r,i)&&(a=r[i],e.call(n,a,i,r)),i++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1})}();var i=function(){function e(e){return null==e?String(e):K[Y.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(t){return"object"==e(t)}function o(e){if(!e||"[object Object]"!==e.toString()||e.nodeType||e.setInterval)return!1;if(e.constructor&&!e.hasOwnProperty("constructor")&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1;var t;for(t in e);return t===b||e.hasOwnProperty(t)}function a(e){return e instanceof Array}function s(e){return"number"==typeof e.length}function c(e){return q.call(e,function(e){return null!=e})}function l(e){return e.length>0?C.fn.concat.apply([],e):e}function u(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(e){return e in V?V[e]:V[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,t){return"number"!=typeof t||M[u(e)]?t:t+"px"}function f(e){var t,n;return P[e]||(t=x.createElement(e),x.body.appendChild(t),n=L(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),P[e]=n),P[e]}function v(e){return"children"in e?D.call(e.children):C.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function h(e,t,n){for(E in t)n&&(o(t[E])||a(t[E]))?(o(t[E])&&!o(e[E])&&(e[E]={}),a(t[E])&&!a(e[E])&&(e[E]=[]),h(e[E],t[E],n)):t[E]!==b&&(e[E]=t[E])}function g(e,t){return t===b?C(e):C(e).filter(t)}function m(e,n,i,r){return t(n)?n.call(e,i,r):n}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function w(e,t){var n=e.className,i=n&&n.baseVal!==b;return t===b?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function _(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?C.parseJSON(e):e:t):e}catch(n){return e}}function I(e,t){t(e);for(var n in e.childNodes)I(e.childNodes[n],t)}var b,E,C,S,T,O,A=[],D=A.slice,q=A.filter,x=window.document,P={},V={},L=x.defaultView?x.defaultView.getComputedStyle:x.documentElement.currentStyle,M={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},k=/^\s*<(\w+|!)[^>]*>/,N=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,U=/^(?:body|html)$/i,F=["val","css","html","text","data","width","height","offset"],R=["after","prepend","before","append"],j=x.createElement("table"),B=x.createElement("tr"),Q={tr:x.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:B,th:B,"*":x.createElement("div")},H=/complete|loaded|interactive/,G=/^\.([\w-]+)$/,X=/^#([\w-]*)$/,W=/^[\w-]+$/,K={},Y=K.toString,z={},J=x.createElement("div");return z.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,o=!r;return o&&(r=J).appendChild(e),i=~z.qsa(r,t).indexOf(e),o&&J.removeChild(e),i},T=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},O=function(e){return q.call(e,function(t,n){return e.indexOf(t)==n})},z.fragment=function(e,t,n){e.replace&&(e=e.replace(N,"<$1></$2>")),t===b&&(t=k.test(e)&&RegExp.$1),t in Q||(t="*");var i,r,a=Q[t];return a.innerHTML=""+e,r=C.each($.merge([],a.childNodes),function(){a.removeChild(this)}),o(n)&&(i=C(r),C.each(n,function(e,t){F.indexOf(e)>-1?i[e](t):i.attr(e,t)})),r},z.Z=function(e,t){return e=e||[],e.__proto__=C.fn,e.selector=t||"",e},z.isZ=function(e){return e instanceof z.Z},z.init=function(e,n){if(e){if(t(e))return C(x).ready(e);if(z.isZ(e))return e;var i;if(a(e))i=c(e);else if(r(e))i=[o(e)?C.extend({},e):e],e=null;else if(k.test(e))i=z.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==b)return C(n).find(e);i=z.qsa(x,e)}return z.Z(i,e)}return z.Z()},C=function(e,t){return z.init(e,t)},C._tvp=!0,C.extend=function(e){var t,n=D.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){h(e,n,t)}),e},z.qsa=function(e,t){var n;return i(e)&&X.test(t)?(n=e.getElementById(RegExp.$1))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:D.call(G.test(t)?e.getElementsByClassName(RegExp.$1):W.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},C.contains=function(e,t){return e!==t&&e.contains(t)},C.type=e,C.isFunction=t,C.isWindow=n,C.isArray=a,C.isPlainObject=o,C.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},C.inArray=function(e,t,n){return A.indexOf.call(t,e,n)},C.camelCase=T,C.trim=function(e){return e.trim()},C.uuid=0,C.support={},C.expr={},C.map=function(e,t){var n,i,r,o=[];if(s(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&o.push(n);else for(r in e)n=t(e[r],r),null!=n&&o.push(n);return l(o)},C.each=function(e,t){var n,i;if(s(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},C.grep=function(e,t){return q.call(e,t)},window.JSON&&(C.parseJSON=JSON.parse),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),C.fn={forEach:A.forEach,reduce:A.reduce,push:A.push,sort:A.sort,indexOf:A.indexOf,concat:A.concat,map:function(e){return C(C.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return C(D.apply(this,arguments))},ready:function(e){return H.test(x.readyState)?e(C):x.addEventListener("DOMContentLoaded",function(){e(C)},!1),this},get:function(e){return e===b?D.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return A.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):C(q.call(this,function(t){return z.matches(t,e)}))},add:function(e,t){return C(O(this.concat(C(e,t))))},is:function(e){return this.length>0&&z.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==b)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):s(e)&&t(e.item)?D.call(e):C(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return C(n)},has:function(e){return this.filter(function(){return r(e)?C.contains(this,e):C(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:C(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:C(e)},find:function(e){var t,n=this;return t="object"==typeof e?C(e).filter(function(){var e=this;return A.some.call(n,function(t){return C.contains(t,e)})}):1==this.length?C(z.qsa(this[0],e)):this.map(function(){return z.qsa(this,e)})},closest:function(e,t){var n=this[0],r=!1;for("object"==typeof e&&(r=C(e));n&&!(r?r.indexOf(n)>=0:z.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return C(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=C.map(n,function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return g(t,e)},parent:function(e){return g(O(this.pluck("parentNode")),e)},children:function(e){return g(this.map(function(){return v(this)}),e)},contents:function(){return this.map(function(){return D.call(this.childNodes)})},siblings:function(e){return g(this.map(function(e,t){return q.call(v(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return C.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==L(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=C(e).get(0),r=i.parentNode||this.length>1;return this.each(function(t){C(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){C(this[0]).before(e=C(e));for(var t;(t=e.children()).length;)e=t.first();C(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=C(this),r=i.contents(),o=n?e.call(this,t):e;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=C(this);(e===b?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return C(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return C(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return e===b?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;C(this).empty().append(m(this,e,t,n))})},text:function(e){return e===b?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,t){var n;return"string"==typeof e&&t===b?0==this.length||1!==this[0].nodeType?b:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:this.each(function(n){if(1===this.nodeType)if(r(e))for(E in e)y(this,E,e[E]);else y(this,e,m(this,t,n,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&y(this,e)})},prop:function(e,t){return t===b?this[0]&&this[0][e]:this.each(function(n){this[e]=m(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+u(e),t);return null!==n?_(n):b},val:function(e){return e===b?this[0]&&(this[0].multiple?C(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=m(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var n=C(this),i=m(this,e,t,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2&&"string"==typeof t)return this[0]&&(this[0].style[T(t)]||L(this[0],"").getPropertyValue(t));var i="";if("string"==e(t))n||0===n?i=u(t)+":"+p(t,n):this.each(function(){this.style.removeProperty(u(t))});else for(E in t)t[E]||0===t[E]?i+=u(E)+":"+p(E,t[E])+";":this.each(function(){this.style.removeProperty(u(E))});return this.each(function(){this.style.cssText+=";"+i})},index:function(e){return e?this.indexOf(C(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return A.some.call(this,function(e){return this.test(w(e))},d(e))},addClass:function(e){return this.each(function(t){S=[];var n=w(this),i=m(this,e,t,n);i.split(/\s+/g).forEach(function(e){C(this).hasClass(e)||S.push(e)},this),S.length&&w(this,n+(n?" ":"")+S.join(" "))})},removeClass:function(e){return this.each(function(t){return e===b?w(this,""):(S=w(this),m(this,e,t,S).split(/\s+/g).forEach(function(e){S=S.replace(d(e)," ")}),void w(this,S.trim()))})},toggleClass:function(e,t){return this.each(function(n){var i=C(this),r=m(this,e,n,w(this));r.split(/\s+/g).forEach(function(e){(t===b?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=U.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(C(e).css("margin-top"))||0,n.left-=parseFloat(C(e).css("margin-left"))||0,i.top+=parseFloat(C(t[0]).css("border-top-width"))||0,i.left+=parseFloat(C(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||x.body;e&&!U.test(e.nodeName)&&"static"==C(e).css("position");)e=e.offsetParent;return e})}},C.fn.detach=C.fn.remove,["width","height"].forEach(function(e){C.fn[e]=function(t){var r,o=this[0],a=e.replace(/./,function(e){return e[0].toUpperCase()});return t===b?n(o)?o["inner"+a]:i(o)?o.documentElement["offset"+a]:(r=this.offset())&&r[e]:this.each(function(n){o=C(this),o.css(e,m(this,t,n,o[e]()))})}}),R.forEach(function(t,n){var i=n%2;C.fn[t]=function(){var t,r,o=C.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:z.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(e,t){r=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null,o.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!r)return C(e).remove();I(r.insertBefore(e,t),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},C.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return C(e)[t](this),this}}),z.Z.prototype=C.fn,z.uniq=O,z.deserializeValue=_,C.zepto=z,C}();if("undefined"==typeof n&&(window.Zepto=i),function(e){function t(e){var t=this.os={},n=this.browser={},i=e.match(/WebKit\/([\d.]+)/),r=e.match(/(Android)(\s+|\/)([\d.]+)/),o=e.match(/(iPad).*OS\s([\d_]+)/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),s=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=s&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),u=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),f=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),h=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),g=e.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(t.android=!0,t.version=r[3]),a&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.webos=!0,t.version=s[2]),c&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),p&&(t.bb10=!0,t.version=p[2]),f&&(t.rimtabletos=!0,t.version=f[2]),v&&(n.playbook=!0),l&&(t.kindle=!0,t.version=l[1]),u&&(n.silk=!0,n.version=u[1]),!u&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),h&&(n.chrome=!0,n.version=h[1]),g&&(n.firefox=!0,n.version=g[1]),t.tablet=!!(o||v||r&&!e.match(/Mobile/)||g&&e.match(/Tablet/)),t.phone=!(t.tablet||!(r||a||s||d||p||h&&e.match(/Android/)||h&&e.match(/CriOS\/([\d.]+)/)||g&&e.match(/Mobile/)))}t.call(e,navigator.userAgent),e.__detect=t}(i),function(e){function t(e){return e._zid||(e._zid=f++)}function n(e,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(p[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!s.test(e.ns)||o&&t(e.fn)!==t(o)||a&&e.sel!=a)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(t,n,i){"string"!=e.type(t)?e.each(t,i):t.split(/\s/).forEach(function(e){i(e,n)})}function a(e,t){return e.del&&("focus"==e.e||"blur"==e.e)||!!t}function s(e){return h[e]||e}function c(n,r,c,l,u,d){var f=t(n),v=p[f]||(p[f]=[]);o(r,c,function(t,r){var o=i(t);o.fn=r,o.sel=l,o.e in h&&(r=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=u&&u(r,t);var c=o.del||r;o.proxy=function(e){var t=c.apply(n,[e].concat(e.data));return t===!1&&(e.preventDefault(),e.stopPropagation()),t},o.i=v.length,v.push(o),n.addEventListener?n.addEventListener(s(o.e),o.proxy,a(o,d)):n.attachEvent("on"+s(o.e),o.proxy,a(o,d))})}function l(e,i,r,c,l){var u=t(e);o(i||"",r,function(t,i){n(e,t,i,c).forEach(function(t){delete p[u][t.i],e.removeEventListener?e.removeEventListener(s(t.e),t.proxy,a(t,l)):e.detachEvent("on"+s(t.e),t.proxy,a(t,l))})})}function u(t){var n,i={originalEvent:t};for(n in t)y.test(n)||void 0===t[n]||(i[n]=t[n]);return e.each(w,function(e,n){i[e]=function(){return this[n]=g,t[e].apply(t,arguments)},i[n]=m}),i}function d(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var p=(e.zepto.qsa,{}),f=1,v={},h={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",e.event={add:c,remove:l},e.proxy=function(n,i){if(e.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=t(n),r}if("string"==typeof i)return e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){c(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){l(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,i){c(this,e,t,null,function(e,t){return function(){var n=e.apply(i,arguments);return l(i,t,e),n}})})};var g=function(){return!0},m=function(){return!1},y=/^([A-Z]|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,i){return this.each(function(r,o){c(o,n,i,t,function(n){return function(i){var r,a=e(i.target).closest(t,o).get(0);return a?(r=e.extend(u(i),{currentTarget:a,liveFired:o}),n.apply(a,[r].concat([].slice.call(arguments,1)))):void 0}})})},e.fn.undelegate=function(e,t,n){return this.each(function(){l(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i){return!n||e.isFunction(n)?this.bind(t,n||i):this.delegate(n,t,i)},e.fn.off=function(t,n,i){return!n||e.isFunction(n)?this.unbind(t,n||i):this.undelegate(n,t,i)},e.fn.trigger=function(t,n){return("string"==typeof t||e.isPlainObject(t))&&(t=e.Event(t)),d(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,i){var r,o;return this.each(function(a,s){r=u("string"==typeof t?e.Event(t):t),r.data=i,r.target=s,e.each(n(s,t.type||t),function(e,t){return o=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){"string"!=typeof e&&(t=e,e=t.type);var n=document.createEvent(v[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(i),function(e){var t,n,i,r,o,a,s;n=function(e,t){t.parentNode.removeChild(t),window[e]=void 0;try{delete window[e]}catch(n){}},i=function(e,t){var n,i,r="";for(n in e)e.hasOwnProperty(n)&&(n=t?encodeURIComponent(n):n,i=t?encodeURIComponent(e[n]):e[n],r+=n+"="+i+"&");return r.replace(/&$/,"")},r=function(){return"cb_"+tvp.$.createGUID(16)},o=function(e,t){"undefined"!=typeof e&&e(t)},a=function(e,t){"undefined"!=typeof e&&e(t)},s=function(e){"undefined"!=typeof e&&e()},t={},t.init=function(e){var n;for(n in e)e.hasOwnProperty(n)&&(t.options[n]=e[n]);return!0},t.get=function(e){e=e||{};var t=e.url,c=e.callbackParameter||"callback",l=e.data||{},u=document.createElement("script"),d=e.jsonpCallback||r(),p="?";t&&(l[c]=d,t.indexOf("?")>=0&&(p="&"),t+=p+i(l,!0),t=t.replace(/=\?/,"="+d),window[d]=function(t){"undefined"==typeof t?o(e.error,"Invalid JSON data returned"):a(e.success,t),n(d,u),s(e.complete)},u.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(u),u.onerror=function(){n(d,u),s(e.complete),o(e.error,"Error while trying to access the URL")})},e.ajax=t.get}(i),function(e){if("__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}}),"function"==typeof window.getComputedStyle)try{getComputedStyle(void 0)}catch(t){var n=window.getComputedStyle;window.getComputedStyle=function(){try{return n.apply(window,arguments)}catch(e){return null}}}}(i),tvp={},tvp.lastModify="2015-08-27 16:21:59",tvp.ts=tvp.lastModify.replace(/\D/g,""),tvp.ver="$V2.0Build5316$",tvp.name="腾讯视频统一播放器","undefined"==typeof window.DEBUG&&(window.DEBUG=1),window.FILEPATH="//imgcache.qq.com/tencentvideo_v1/tvp/js/",top!=window)try{tvp.topurl=top.location.href}catch(r){}tvp.log=function(e){if(window.DEBUG&&null!=document.getElementById("tvp_debug_console")){var t=document.getElementById("tvp_debug_console");t.innerHTML+=e+" | "}else window.console&&window.console.log("["+tvp.log.debugid++ +"] "+e)},tvp.debug=function(e){window.DEBUG||-1!==tvp.log.isDebug||(tvp.log.isDebug="true"==tvp.$.getUrlParam("debug")?1:0),(window.DEBUG||tvp.log.isDebug)&&tvp.log(e)},tvp.log.isDebug=-1,tvp.log.debugid=1,tvp.DEVICE={aphone:1,iphone:2,ipad:3,other:0},tvp.PLATFORM={wechat:1,mqq:2,qqbrowser:3,other:0},tvp.APPID={wechatPublic:1e4,news:10001,qqmusic:10007},tvp.ACTION={onVodH5Init:"tvp:vodhtml5:beforeInit",onFlashPlayerInited:"tvp:flash:inited"},function(){function e(e){return e instanceof Array}if("object"!=typeof tvp||!tvp.$||!tvp.$.Deferred){var n,r,o,a,s,c,l,u,d,p,f,v,h,g=[].slice;s="1.3.2",r="pending",a="resolved",o="rejected",d=function(e,t){return null!=e?e.hasOwnProperty(t):void 0},f=function(e){return d(e,"length")&&d(e,"callee")},u=function(t){return f(t)?u(Array.prototype.slice.call(t)):e(t)?t.reduce(function(t,n){return e(n)?t.concat(u(n)):(t.push(n),t)},[]):[t]},c=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},v=function(e,t){return function(){var n;return n=[e].concat(Array.prototype.slice.call(arguments,0)),t.apply(this,n)}},l=function(e,t,n){var i,r,o,a,s;for(a=u(e),s=[],r=0,o=a.length;o>r;r++)i=a[r],s.push(i.call.apply(i,[n].concat(g.call(t))));return s},n=function(){var e,t,i,s,c,d;return d=r,s=[],c=[],e=[],i={},this.promise=function(t){var p,f;return t=t||{},t.state=function(){return d},f=function(e,n){return function(){return d===r&&n.push.apply(n,u(arguments)),e()&&l(arguments,i),t}},t.done=f(function(){return d===a},s),t.fail=f(function(){return d===o},c),t.always=f(function(){return d!==r},e),p=function(e,i){var r,o;return r=new n,o=function(e,t,n){return e(n?function(){return t(n.apply(null,u(arguments)))}:function(){return t.apply(null,u(arguments))})},o(t.done,r.resolve,e),o(t.fail,r.reject,i),r},t.pipe=p,t.then=p,t},this.promise(this),t=function(t,n,o){return function(){return d===r&&(d=t,i=arguments,l([n,e],i,o)),this}},this.resolve=t(a,s),this.reject=t(o,c),this.resolveWith=function(){var e,n;return n=arguments[0],e=2<=arguments.length?g.call(arguments,1):[],t(a,s,n).apply(null,e)},this.rejectWith=function(){var e,n;return n=arguments[0],e=2<=arguments.length?g.call(arguments,1):[],t(o,c,n).apply(null,e)},this},h=function(){var e,t,i,r,o,a,s,l;for(r=new n,t=u(arguments),i=c(t.length,r.resolve),o=0,s=t.length;s>o;o++)e=t[o],e.done(i);for(a=0,l=t.length;l>a;a++)e=t[a],e.fail(function(e,t){return r.reject(e,t)});return r.promise()},p=function(e){return e.Deferred=function(){return new n},e.ajax=v(e.ajax,function(e,t){var i,r;return null==t&&(t={}),r=new n,i=function(e,t){return v(e,function(){var e,n;return n=arguments[0],e=2<=arguments.length?g.call(arguments,1):[],n&&n.apply(null,e),t.apply(null,e)})},t.success=i(t.success,r.resolve),t.error=i(t.error,r.reject),e(t),r.promise()}),e.when=h},"undefined"!=typeof t&&(t.Deferred=function(){return new n},t.when=h,t.installInto=p),this.Deferred=function(){return new n},this.Deferred.when=h,this.Deferred.installInto=p,this.DeferedClass=n,tvp.Deferred&&tvp.Deferred.installInto("undefined"!=typeof i?i:jq)}}.call(tvp),function(e){e.param=function(t,n){var i=[];for(var r in t)if(!e.isFunction(t[r])){var o=n?n+"["+r+"]":r,a=t[r];i.push(e.isPlainObject(a)?e.param(a,o):o+"="+encodeURIComponent(a))}return i.join("&")}}(i);var o=!1;"undefined"!=typeof i&&i._tvp?(tvp.$=i,o=!0):(tvp.$={},o=!1),function(){return o?void 0:"function"==typeof window.Zepto?void(tvp.$=window.Zepto):"function"==typeof window.jQuery&&"function"==typeof window.jQuery.Deferred?(tvp.$=window.jQuery,void(!tvp.$.os&&"undefined"!=typeof i&&i.__detect&&i.__detect.call(tvp.$,navigator.userAgent))):void("function"==typeof window.jq&&(tvp.$=window.jq,!tvp.$.os&&"undefined"!=typeof i&&i.__detect&&i.__detect.call(tvp.$,navigator.userAgent)))}(),function(){"undefined"==typeof document.DOCUMENT_NODE&&(document.DOCUMENT_NODE=9)}(),function(e){function t(t){var n=t.match(/MQQBrowser\/(\d+\.\d+)/i),i=t.match(/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i)||t.match(/V1_AND_SQ_([\d\.]+)/),r=t.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/)||t.match(/MicroMessenger\/((\d+)\.(\d+))/),o=t.match(/Mac\sOS\sX\s(\d+\.\d+)/),a=t.match(/Windows(\s+\w+)?\s+?(\d+\.\d+)/),s=t.match(/MiuiBrowser\/(\d+\.\d+)/i),c=t.match(/MI-ONE/),l=t.match(/MI PAD/),u=t.match(/UCBrowser\/(\d+\.\d+(\.\d+\.\d+)?)/)||t.match(/\sUC\s/),d=t.match(/IEMobile(\/|\s+)(\d+\.\d+)/)||t.match(/WPDesktop/),p=t.match(/(ipod).*\s([\d_]+)/i),f=t.match(/(ipad).*\s([\d_]+)/i),v=t.match(/(iphone)\sos\s([\d_]+)/i),h=t.match(/Chrome\/(\d+\.\d+)/),g=t.match(/Mozilla.*Linux.*Android.*AppleWebKit.*Mobile Safari/),m=t.match(/(android)\s([\d\.]+)/i);if(e.browser=e.browser||{},e.os=e.os||{},window.ActiveXObject){var y=6;(window.XMLHttpRequest||t.indexOf("MSIE 7.0")>-1)&&(y=7),(window.XDomainRequest||t.indexOf("Trident/4.0")>-1)&&(y=8),t.indexOf("Trident/5.0")>-1&&(y=9),t.indexOf("Trident/6.0")>-1&&(y=10),e.browser.ie=!0,e.browser.version=y}else t.indexOf("Trident/7.0")>-1&&(e.browser.ie=!0,e.browser.version=11);m&&(this.os.android=!0,this.os.version=m[2]),p&&(this.os.ios=this.os.ipod=!0,this.os.version=p[2].replace(/_/g,".")),f&&(this.os.ios=this.os.ipad=!0,this.os.version=f[2].replace(/_/g,".")),v&&(this.os.iphone=this.os.ios=!0,this.os.version=v[2].replace(/_/g,".")),a&&(this.os.windows=!0,this.os.version=a[2]),o&&(this.os.Mac=!0,this.os.version=o[1]),t.indexOf("lepad_hls")>0&&(this.os.LePad=!0),l&&(this.os.MIPAD=!0),n&&(this.browser.MQQ=!0,this.browser.version=n[1]),i&&(this.browser.MQQClient=!0,this.browser.version=i[1]),r&&(this.browser.WeChat=!0,this.browser.version=r[1]),s&&(this.browser.MIUI=!0,this.browser.version=s[1]),u&&(this.browser.UC=!0,this.browser.version=u[1]||0/0),d&&(this.browser.IEMobile=!0,this.browser.version=d[2]),g&&(this.browser.AndriodBrowser=!0),c&&(this.browser.M1=!0),h&&(this.browser.Chrome=!0,this.browser.version=h[1]),this.os.windows&&(this.os.win64="undefined"!=typeof navigator.platform&&"win64"==navigator.platform.toLowerCase()?!0:!1);var w={iPad7:"iPad; CPU OS 7",LePad:"lepad_hls",XiaoMi:"MI-ONE",SonyDTV:"SonyDTV",SamSung:"SAMSUNG",HTC:"HTC",VIVO:"vivo"};for(var _ in w)this.os[_]=-1!==t.indexOf(w[_]);e.os.phone=e.os.phone||/windows phone/i.test(t),this.os.getNumVersion=function(){return parseFloat(e.os.version,"10")},this.os.hasTouch="ontouchstart"in window,this.os.hasTouch&&this.os.ios&&this.os.getNumVersion()<6&&(this.os.hasTouch=!1),e.browser.WeChat&&e.browser.version<5&&(this.os.hasTouch=!1),e.extend(e.browser,{getNumVersion:function(){return parseFloat(e.browser.version,"10")},isFFCanOcx:function(){return e.browser.firefox&&e.browser.getNumVersion()>=3?!0:!1},isCanOcx:function(){return!(!e.os.windows||!e.browser.ie&&!e.browser.isFFCanOcx()&&!e.browser.webkit)},isNotIESupport:function(){return!!e.os.windows&&(!!e.browser.webkit||e.browser.isFFCanOcx())}}),e.userAgent={},e.extend(e.userAgent,e.os),e.extend(e.userAgent,e.browser),e.userAgent.browserVersion=e.browser.version,e.userAgent.osVersion=e.os.version,delete e.userAgent.version}t.call(e,navigator.userAgent)}(tvp.$),function(e){var t={getByID:function(e){return document.getElementById(e)},noop:function(){},isString:function(t){return"string"===e.type(t)},isUndefined:function(t){return"undefined"===e.type(t)},now:function(){return(new Date).getTime()},getISOTimeFormat:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),r=e.getHours(),o=e.getMinutes(),a=e.getSeconds();return[[t,10>n?"0"+n:n,10>i?"0"+i:i].join("-"),[10>r?"0"+r:r,10>o?"0"+o:o,10>a?"0"+a:a].join(":")].join(" ")},formatSeconds:function(e){e=parseInt(e);var t=parseInt(e/60),n=t>=60?parseInt(t/60):0,i=e%60,r="";return t>=60&&(t%=60),n>0&&(r+=10>n?"0"+n:n,r+=":"),r+=10>t?"0"+t:t,r+=":",r+=10>i?"0"+i:i},formatSecondsWithText:function(e){var t=this.formatSeconds(e),n=t.split(":"),i="";switch(n.length){case 1:i=n[0]+"秒";break;case 2:i=n[0]+"分"+n[1]+"秒";break;case 3:i=n[0]+"小时"+n[1]+"分"+n[2]+"秒";break;default:i=t}return i},formatFileSize:function(e){return e=parseInt(e,10),e=e/1024/1024,e=e.toFixed(1),e+"M"},getHost:function(){var e=window.location.hostname||window.location.host,t=location.host.split(".");return t.length>1&&(e=t.slice(t.length-2).join(".")),e},getUrlParam:function(e,t){t=t||document.location.toString();var n=new RegExp("(^|&|\\\\?)"+e+"=([^&]*)(&|$|#)"),i=null;return i=t.match(n),i?i[2]:""},setUrlParam:function(e,t,n){n=n||location.href;var i,r,o=new RegExp("[\\?&#]"+e+"=([^&#]+)","gi"),a=n.match(o),s="{key"+(new Date).getTime()+"}";if(i=a&&a.length>0?a[a.length-1]:"",r=e+"="+t,i){var c=i.charAt(0);n=n.replace(i,s),n=n.replace(s,t?c+r:"")}else t&&(n+=n.indexOf("?")>-1?"&"+r:"?"+r);return n},filterXSS:function(t){return e.isString(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;"):t},createGUID:function(e){e=e||32;for(var t="",n=1;e>=n;n++){var i=Math.floor(16*Math.random()).toString(16);t+=i}return t},newGuid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return[e(),e(),e(),e(),e(),e(),e(),e()].join("")},formatSize:function(e){var t=""+e;return t.indexOf("%")>0?t:t.indexOf("px")>0?t:/^\d+$/.test(t)?t+"px":t},compareVersion:function(e,t){e=String(e).split("."),t=String(t).split(".");try{for(var n=0,i=Math.max(e.length,t.length);i>n;n++){var r=isFinite(e[n])&&Number(e[n])||0,o=isFinite(t[n])&&Number(t[n])||0;if(o>r)return-1;if(r>o)return 1}}catch(a){return-1}return 0},isTrue:function(e){return!!tvp.$.filterXSS(e)},loadPluginCss:function(t){var n="",i=tvp.defaultConfig.pluginCssUrl;return t in i&&(n=tvp.defaultConfig.cssPath+i[t]),e.loadCss(n)},getData:function(e){return window.localStorage?window.localStorage[e]:void 0},setData:function(e,t){return window.localStorage?(window.localStorage[e]=t,!0):void 0},delData:function(e){return window.localStorage?(window.localStorage.removeItem(e),!0):void 0},formatTpl:function(t,n){if(t&&"object"===e.type(n)){for(var i in n)for(var r="${"+i+"}";t.indexOf(r)>-1;)t=t.replace(r,n[i]);return t}},loadCss:function(t){var n=e.Deferred(),i=!1;if(t){for(;t.indexOf("../")>=0;)t=t.replace("../","");t=e.filterXSS(t);var r=document,o=r.getElementsByTagName("head")[0]||r.documentElement,a=o.getElementsByTagName("base")[0],s=r.createElement("link");
s.rel="stylesheet",s.href=t,s.onload=s.onerror=function(){s.onload=s.onerror=null,i=!0,n.resolve()},setTimeout(function(){i||n.resolve()},2500),a?o.insertBefore(s,a):o.appendChild(s)}else n.reject();return n}};e.extend(e,t)}(tvp.$),function(e){e.cookie={set:function(e,t,n,i,r){if(r){var o=new Date,a=new Date;a.setTime(o.getTime()+36e5*r)}return document.cookie=e+"="+t+"; "+(r?"expires="+a.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+window.location.host+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=document.cookie.match(t);return n?n[1]:""},del:function(e,t,n){var i=new Date;i.setTime(i.getTime()-1),document.cookie=e+"=; expires="+i.toGMTString()+";"+(n?"path="+n+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+window.location.host+";")}}}(tvp.$),tvp=tvp||{},tvp.common={isUseHtml5:function(){var e=navigator.userAgent,t=null;if(/ipad|ipod|iphone|lepad_hls|IEMobile|WPDesktop/gi.test(e))return!0;if(tvp.$.os.android){if(tvp.common.isSupportMP4())return!0;if(tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2)return!0;if(-1!=e.indexOf("MI2"))return!0;if(tvp.$.os.version>="4"&&(t=e.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&t[1]>=4.2)return!0;if(tvp.$.os.version>="4.1")return!0}return!1},isInUseH5:function(){var e=navigator.userAgent,t=null;if(tvp.$.os.android){if(tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2)return!0;if(-1!=e.indexOf("MI2"))return!0;if(tvp.$.os.version>="4"&&(t=e.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&t[1]>=4.2)return!0;if(tvp.$.os.version>="4.1")return!0}},isUseHLS:function(){return tvp.$.os.ios?!0:void 0},isMac:function(){var e=/MacIntel/gi.test(navigator.platform.toLowerCase());return e},isLiveUseHTML5:function(){return tvp.$.os.ios?!0:tvp.$.os.ipad?!0:tvp.$.os.android&&tvp.common.isSupportM3u8()?!0:!1},isSupportM3u8:function(){var e=document.createElement("video"),t=["application/x-mpegURL","audio/mpegurl","vnd.apple.mpegURL","application/vnd.apple.mpegURL"],n=!1;return"function"==typeof e.canPlayType&&tvp.$.each(t,function(t,i){return e.canPlayType(i)?void(n=!0):void 0}),e=null,tvp.$.os.android&&(tvp.$.os.version>="4"&&tvp.$.browser.Chrome&&(n=!0),tvp.$.browser.M1&&(n=!1),/V8 Build/.test(navigator.userAgent)&&(n=!1),tvp.$.browser.MQQ&&tvp.$.browser.getNumVersion()>=4.2&&(n=!0)),n},isSupportMP4:function(){var e=document.createElement("video");if("function"==typeof e.canPlayType){if("probably"==e.canPlayType('video/mp4; codecs="mp4v.20.8"'))return!0;if("probably"==e.canPlayType('video/mp4; codecs="avc1.42E01E"')||"probably"==e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))return!0}return!1},isSupportSVG:function(){return document.implementation&&tvp.$.isFunction(document.implementation.hasFeature)?document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1},isEnforceMP4:function(){if(tvp.$.os.android){if(tvp.$.browser.firefox)return!0;if(tvp.$.browser.chrome)return!1;if(tvp.$.os.version>="4.0"&&tvp.$.browser.MQQ&&tvp.$.browser.version<"4.0")return!0}return!1},getUin:function(e){var t=tvp.$.cookie.get("p_skey")||tvp.$.cookie.get("skey"),n=tvp.$.cookie.get("lskey"),i="",r=0,o=!1;return"undefined"==typeof isLeak&&"undefined"!=typeof e&&(isLeak=e),isLeak="undefined"==typeof isLeak?!1:!0,o=!!isLeak&&""!=n,o||""!=t?(i=tvp.$.cookie.get("p_uin")||tvp.$.cookie.get("uin"),""==i&&o&&(i=tvp.$.cookie.get("luin")),r=parseInt(i.replace(/^o0*/g,""),10),isNaN(r)||1e4>=r?0:r):0},getSKey:function(e){var t=tvp.$.cookie.get("p_skey")||tvp.$.cookie.get("skey"),n=tvp.$.cookie.get("lskey"),i="";return"undefined"==typeof isLeak&&(isLeak="undefined"!=typeof e?e:!1),i=isLeak?""!=t&&""!=n?[t,n].join(";"):t||n:t},getToken:function(e){var t=this.getSKey(e),n=this.time33(t);return n},time33:function(e){for(var t=0,n=e.length,i=5381;n>t;++t)i+=(i<<5)+e.charAt(t).charCodeAt();return 2147483647&i},openLogin:function(){},getVideoSnap:function(e,t){var n,i,r=1e8;if(e.indexOf("_")>0){var o=e.split("_");e=o[0],t=parseInt(o[1])}for(var a=4294967296,s=0,c=0;c<e.length;c++){var l=e.charCodeAt(c);s=32*s+s+l,s>=a&&(s%=a)}return i=s%r,void 0==t&&(t=0),n=0==t?["https://vpic.video.qq.com/",i,"/",e,"_160_90_3.jpg"].join(""):["https://vpic.video.qq.com/",i,"/",e,"_","160_90_",t,"_1.jpg"].join("")},getVideoSnapMobile:function(e,t){t=t||0;var n=["496_280"],i="https://shp.qpic.cn/qqvideo_ori/0/{vid}_{index}/0";return i.replace("{vid}",e).replace("{index}",n[t])},picerr:function(){},getDeviceId:function(){var e=tvp.DEVICE.other;return tvp.$.os.iphone?e=tvp.DEVICE.iphone:tvp.$.os.ipad?e=tvp.DEVICE.ipad:tvp.$.os.android&&tvp.$.os.phone&&(e=tvp.DEVICE.aphone),e},getPlatformId:function(){var e=tvp.PLATFORM.other;return tvp.$.browser.WeChat?e=tvp.PLATFORM.wechat:tvp.$.browser.MQQClient?e=tvp.PLATFORM.mqq:tvp.$.browser.MQQ&&(e=tvp.PLATFORM.qqbrowser),e},getParams:function(e){for(var t,n,i=e.indexOf("?"),r=e.substring(i+1),o=/\w+=[^&]+/g,a={};null!==(t=o.exec(r));)n=t[0].split("="),n.length>=2&&(a[n.shift()]=n.join("="));return a},recomdTextById:function(e){if(e){if(this.recomdText||(this.recomdText={}),this.recomdText[e]&&"string"==typeof this.recomdText[e])return this.recomdText[e];var t,n=tvp.$.Deferred(),i=this,r=50;return r=0,r&&100*Math.random()>r?(n.resolve(),n):(t=tvp.common.get_request_url("like")+"?callback=?",tvp.$.ajax({url:t,data:{id:e,uin:0,playright:7,msgtype:103,otype:"json",tablist:9}}).done(function(t){t&&t.rmdword?(i.recomdText[e]=t,n.resolve()):n.resolve()}).fail(function(){n.resolve()}),setTimeout(function(){n.resolve()},5e3),n)}},get_hostname_fromUrl:function(e){if(e){var t=document.createElement("a");return t.href=e,t.hostname}},get_css_path:function(){return"//imgcache.qq.com/tencentvideo_v1/vstyle/mobile/v2/style/"},get_js_path:function(){return"//imgcache.qq.com/tencentvideo_v1/tvp/"},get_request_url:function(e){var t={getinfo:["http://h5vv.video.qq.com/getinfo","https://sec.video.qq.com/p/h5vv.video/getinfo"],getvinfo:["http://h5vv.video.qq.com/getvinfo","https://sec.video.qq.com/p/h5vv.video/getvinfo"],getkey:["http://h5vv.video.qq.com/getkey","https://sec.video.qq.com/p/h5vv.video/getkey"],limit_conf:["http://v.qq.com/iframe/limit_conf.js","https://v.qq.com/iframe/limit_conf.js"],zb:["http://info.zb.qq.com","https://sec.video.qq.com/p/info.zb/"],swf_root:["//imgcache.qq.com/tencentvideo_v1/player/","https://imgcache.qq.com/tencentvideo_v1/player/"],rmd_mobile:["http://like.video.qq.com/fcgi-bin/rmd_mobile","https://sec.video.qq.com/p/like.video/fcgi-bin/rmd_mobile"],like:["http://like.video.qq.com/fcgi-bin/like","https://sec.video.qq.com/p/like.video/fcgi-bin/like"],dataout_ex:["http://sns.video.qq.com/fcgi-bin/dlib/dataout_ex","https://sec.video.qq.com/p/sns.video/fcgi-bin/dlib/dataout_ex"],get_dtype:["http://h5vv.video.qq.com/getdtype","https://sec.video.qq.com/p/h5vv.video/getdtype"]};return"https:"===window.location.protocol?t[e][1]:t[e][0]},get_chid:function(){var e;return/(.*\.)3g\.qq\.com$/i.test(document.location.hostname)?e=13:"v.qq.com"===document.location.hostname?e=0:1===tvp.app.pageType?e=3:2===tvp.app.pageType&&(e=10),e},get_stdfrom:function(){var e="view.inews.qq.com"===location.host,t=tvp.$;return t.os.iphone||t.os.ipod?e?"v3110":"v3010":t.os.ipad?e?"v4110":"v4010":t.os.android?t.os.tablet?"v6010":e?"v5110":"v5010":t.browser.IEMobile?"v7010":"v1010"},get_platform:function(){var e=tvp.$;return e.os.iphone?1:e.os.ipad?2:e.os.android?3:4},is_mqq_buluo:function(){return 2!==tvp.app.pageType||"xiaoqu.qq.com"!==window.location.hostname&&"buluo.qq.com"!==window.location.hostname?!1:!0}},tvp.version=function(){function e(e){if(t(e))return e;if(/\d+/i.test(e)){var n=parseInt(e/1e4/100,10),i=parseInt(e/1e4,10)-100*n,r=parseInt(e,10)-(100*n*1e4+1e4*i),o=n+"."+i+"."+r;return o}return e}function t(e){return/^(\d+\.){2}\d+(\.\d+)?$/.test(e)}var n,i="0.0.0.0",r="0.0.0",o=new Image,a=!1,c=!1;return"film.qq.com"==document.location.host&&(c=!0),{getOcx:function(t){if(tvp.$.isUndefined(t)&&(t=!0),t&&"0.0.0.0"!=i)return i;var r;if(tvp.$.browser.ie)try{r="IE begin",n=new ActiveXObject(s.config.PROGID_QQLIVE_INSTALLER),"undefined"!=typeof n.getVersion?(i=n.GetVersionByClsid(s.config.OCX_CLSID),r="get actObj.GetVersionByClsid:"+i):r="no function:actObj.GetVersionByClsid"}catch(l){c&&!a&&(a=!0)&&(o.src="http://btrace.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz=IE&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=0&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+encodeURIComponent(l.message)+"&sStep="+encodeURIComponent(r)+"&_="+Math.random())}else if(tvp.$.browser.isNotIESupport()){r="no IE begin";var u,d=navigator.plugins;if(tvp.$.isUndefined(d.namedItem)||(r="plugs.namedItem",u=d.namedItem("腾讯视频")),!u){r="no plugs.namedItem:tencentvideo";for(var p=0,f=d.length;f>p;p++)if(d[p]&&"腾讯视频"==d[p].name||"npQQLive.dll"==d[p].filename){u=d[p];break}}if(u)if(tvp.$.isUndefined(u.version)){r="plug.description:"+u.description;var v,h=u.description;v=h.match(/version:((\d+\.){3}(\d+)?)/),v&&(i=v[1])}else r="plug.version:"+u.version,i=u.version;else r="no plugs[i].filename:npQQLive.dll"}return parseInt(i,10)||c&&!a&&(a=!0)&&(o.src="http://btrace.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz="+(tvp.$.browser.ie?"IE":"NOIE")+"&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=0&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+i+"&sStep="+encodeURIComponent(r)+"&_="+Math.random()),i=e(i)},getFlash:function(){if("0.0.0"!=r)return r;var e,t=null,n=null,i=[],s="Shockwave Flash",l=navigator,u="application/x-shockwave-flash";if(tvp.$.browser.ie)try{e="IE begin",t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e="new ActiveXObject",t&&(n=t.GetVariable("$version"),e="swf.GetVariable",n&&(n=n.split(" ")[1].split(","),i=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(d){c&&!a&&(a=!0)&&(o.src="http://btrace.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz=IE&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=1&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+encodeURIComponent(d.message)+"&sStep="+encodeURIComponent(e)+"&_="+Math.random())}else tvp.$.isUndefined(l.plugins)||"object"!=typeof l.plugins[s]||(e="no IE begin",n=l.plugins[s].description,e="plugins[S].description",n&&(tvp.$.isUndefined(l.mimeTypes)||!l.mimeTypes[u]||l.mimeTypes[u].enabledPlugin)?(e="parse description",n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),i[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),i[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),i[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0):e="no mimeTypes or disable");return r=i.join("."),parseInt(r,10)||c&&!a&&(a=!0)&&(o.src="http://btrace.qq.com/collect?sIp=&iQQ="+tvp.common.getUin()+"&sBiz="+(tvp.$.browser.ie?"IE":"NOIE")+"&sOp="+encodeURIComponent(navigator.userAgent)+"&iSta=1&iTy=2432&iFlow=&sUrl="+encodeURIComponent(location.toString())+"&sRef="+encodeURIComponent(document.referrer)+"&sMsg="+r+"&sStep="+encodeURIComponent(e)+"&_="+Math.random()),r},getFlashMain:function(){return parseInt(tvp.version.getFlash().split(".")[0],10)}}}(),function(e,t){var n={qqlive:{text1:"腾讯视频客户端",text2:"可观看更多视频",md5Cgi:"http://mcgi.v.qq.com/commdatav2?cmd=39&otype=json&confid=${id}",payUrl:"http://film.qq.com/weixin/detail/${index}/${cid}.html",scheme:"tenvideo2://",logoClass:"",openUrl:"tenvideo2://?action=5&video_id=${vid}",liveOpenUrl:"tenvideo2://?action=8&channel_id=${lid}",ipadDownloadUrl:"https://itunes.apple.com/cn/app/teng-xun-shi-pinhd/id407925512?mt=8",iphoneDownloadUrl:"http://itunes.apple.com/cn/app/id458318329?mt=8",aphoneDownloadUrl:"http://mcgi.v.qq.com/commdatav2?cmd=4&confid=140&platform=aphone",VIA:"ANDROIDQQ.QQLIVE",appId:"100730521",downloadId:"TencentVideo",taskName:"TencentVideo",packageName:t.os.iphone?"com.tencent.live4iphone":"com.tencent.qqlive",packageUrl:"tenvideo2://can_open_me_if_install_and_regeister_this_scheme"},weishi:{text1:"微视客户端",text2:"发现更多精彩",logoClass:"tvp_download_app_solo_weishi",md5Cgi:"http://www.weishi.com/api/packdata.php?confid=${id}",scheme:t.os.iphone?" weishiiosscheme://":"weishiandroidscheme://",openUrl:t.os.iphone?" weishiiosscheme://detail?tweetid=${id}":"weishiandroidscheme://detail?tweetid=${id}",iphoneDownloadUrl:"http://www.weishi.com/download/index.php?pgv_ref=weishi.shipin.xinwenfenxiang",aphoneDownloadUrl:"http://www.weishi.com/download/index.php?pgv_ref=weishi.shipin.xinwenfenxiang",ipadDownloadUrl:"",VIA:"ANDROIDQQ.WEISHI",appId:"1101083114",downloadId:"TencentWeishi",taskName:"TencentWeishi",packageName:t.os.iphone?"com.tencent.microvision":"com.tencent.weishi",packageUrl:t.os.iphone?"weishiiosscheme://can_open_me_if_install_and_regeister_this_scheme":"weishiandroidscheme://can_open_me_if_install_and_regeister_this_scheme"},yyb:{packageName:"com.tencent.android.qqdownloader"}};e.app={config:{defaultName:"qqlive",QQApiUrl:"http://pub.idqqimg.com/qqmobile/qqapi.js",mqqApiUrl:"http://res.imtt.qq.com/browser_lightapp/QQBrowserApi/getCryptext/browser_interface_getCryptext.js"},loadQQClientDefer:!1,loadDownloaderDefer:!1,loadMqqDefer:!1,getDownloadUrl:function(i,r){return r=r||e.app.config.defaultName,i=t.os.iphone?n[r].iphoneDownloadUrl:i||n[r].aphoneDownloadUrl,i=t.os.ipad?n[r].ipadDownloadUrl:i},getPayUrl:function(e){var i=t.formatTpl(n.qqlive.payUrl,{index:e.slice(0,1),cid:e});return i},getOpenUrl:function(i){var r={},o=!1;if(!i)return o;if(i.appName&&i.appName!==e.app.config.defaultName)return o=i.openId?n[i.appName].openUrl.replace("${id}",i.openId):n[i.appName].scheme;switch(i.lid?r.channel_id=i.lid:i.cid?r.cover_id=i.cid:i.tid?r.topic_id=i.tid:i.vidArray||!i.vid?r.video_id="${vid}":i.vid&&(r.video_id=i.vid),i.vid2&&(r.video_id=i.vid2),i.openType){case 6:i.cid&&(r.action=1);break;case 2:r.action=i.lid?8:7;break;case 3:r.action=i.lid?8:i.tid?6:5;break;case 4:i.cid&&(r.action=1);break;default:r.action=i.lid?8:i.cid?1:5}if(i.promotionId&&(r.from=i.promotionId+"_"+(i.contentId?i.contentId:"")),r.action=r.action||5,o=n.qqlive.scheme+"?"+decodeURIComponent(t.param(r)),(i.cid||i.h5Url)&&parseInt(i.pay)){var a=i.cid?e.app.getPayUrl(i.cid):i.h5Url;t.os.iphone?(o=a,i.openUrl=o):i.version&&parseInt(i.version)<5852&&(o=a)}return o!==a&&i.openUrl&&(o=t.filterXSS(i.openUrl),o.indexOf("from")<0&&o.indexOf("?")>-1&&i.promotionId&&(o+="&from="+i.promotionId+"_"+(i.contentId?i.contentId:""))),o},getPackageInfo:function(){return n},pageType:function(){return t.browser.WeChat?1:t.browser.MQQClient?2:t.browser.MQQ?3:0}(),isSupportApp:function(){return t.os.iphone||t.os.ipod||t.os.ipad?!0:t.os.android?!0:!1}(),unbindTryOpenAppBanner:function(e){e?e.noTryOpen=!0:""},bindTryOpenAppBanner:function(n){if(n&&!([2,3].indexOf(e.app.pageType)>-1||1===e.app.pageType&&(window!==top&&top.location.href||window===top))){var i=e.$.os.hasTouch?"touchend":"click",r=n.$btn,o=r.attr("data-url"),a=!1,s=function(){var t=navigator.userAgent;return e.$.os.android||e.$.os.ios?-1!=t.indexOf("qqnews/")?!1:e.$.os.android&&a?!1:/^http|https/g.test(o)?!1:!0:!1};if(!s())return!1;r.bind("touchend click",function(e){n.noTryOpen||e.preventDefault()});var c=!1;r.bind("touchstart",function(){c=!1}).bind("touchmove",function(){c=!0}),r.bind(i,function(i){if(i.preventDefault(),!c){var r,o=i.target;r="a"===o.tagName.toLowerCase()?t(o):t(o).parents("a"),n.noTryOpen||e.app.tryOpenAppBanner(r)}})}},tryOpenAppBanner:function(e){if(e.length){var t=e.attr("href"),n=e.attr("data-url"),i=function(){location.href=t},r=function(){var e=document.createElement("iframe");e.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;opacity:0;",e.src=n,document.body.appendChild(e)};r();var o=(new Date).valueOf();setTimeout(function(){var e=(new Date).valueOf();1550>e-o&&i()},1500)}},loadMqqAPI:function(){if(e.app.loadMqqDefer)return e.app.loadMqqDefer;var n=t.Deferred();if(e.app.loadMqqDefer=n,window.x5)n.resolve();else{var i=this.config.mqqApiUrl;t.getScript(i,function(){window.x5?n.resolve():n.reject()})}return setTimeout(function(){n.reject()},3e3),n},invokeQQBrowserAPI:function(n){function i(){if(window.x5&&x5.ios&&x5.ios.getMobileAppSupport){var e={scheme:n.packageInfo.packageUrl};x5.ios.getMobileAppSupport(e,function(e){r.resolve(e&&1==e.isSupportApp?1:0)},function(){r.resolve(0)})}else r.resolve(0);setTimeout(function(){r.resolve(0)},300)}if(!t.os.iphone&&window.QQApi&&QQApi.checkAppInstalled)return this.invokeQQClientAPI(n);var r=t.Deferred();if(!t.os.iphone&&window.x5mtt&&window.x5mtt.isApkInstalled){var o=window.x5mtt.isApkInstalled('{"packagename": '+n.packageInfo.packageName+"}");r.resolve(-1!=o?1:0)}else t.os.iphone&&parseInt(t.os.version)>5?e.app.loadMqqAPI().done(function(){i()}).fail(function(){r.resolve(0)}):r.resolve(0);return setTimeout(function(){r.resolve(0)},3e3),r},getQQBrowserSignKey:function(n,i){var r=e.app,o=r.pageType,a=new t.Deferred,s=this.loadMqqAPI();return 3!=o?void a.resolve(0):(s.done(function(){if(!window.x5||!e.$.os.ios)return void a.resolve(0);if(!x5.ios||!x5.ios.getBrowserSignature)return void a.resolve(0);var t={vid:n};i&&(t.timestamp=parseInt((new Date).valueOf()/1e3)),x5.ios.getBrowserSignature(t,function(e){a.resolve(e&&e.key&&e.ver&&e.platform?{key:e.key,ver:e.ver,platform:e.platform}:0)},function(){a.resolve(0)})}),s.fail(function(){a.resolve(0)}),a)},mqqBuoLuoAuth:function(e){var n,i=t.Deferred();try{window.getBrowserSignature(e,function(e){if(e&&e.data)try{var t=JSON.parse(e.data);t&&t.result&&t.result.token&&(n=t.result.token)}catch(r){}i.resolve(n)}),setTimeout(function(){i.reject()},5e3)}catch(r){i.reject()}return i},kuaiBaoAppAuth:function(e,n){var i=t.Deferred(),r="undefined"!=typeof n?n+"":parseInt(+new Date/1e3)+"",o="TVP_KUAIBAO_CB_"+r.substr(-4,4);window[o]=function(e){var t;try{t=JSON.parse(e)}catch(n){}i.resolve(t)};var a=function(){var t={method:"getCKey",types:["string","string","string"],args:[e,r,o],instanceName:"TencentNewsScriptControllerJsInterface"},n="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(t))+"&_t="+r,i=new Image;i.src=n},s=function(){var t=function(){window.getBrowserSignature(e,r,o)};"function"==typeof window.getBrowserSignature?t():document.addEventListener("TencentNewsJSInjectionComplete",function(){t()})};return t.os.ios?s():t.os.android&&a(),setTimeout(function(){i.reject()},1e4),i},loadQQClientAPI:function(){if(e.app.loadQQClientDefer)return e.app.loadQQClientDefer;var n=t.Deferred();if(e.app.loadQQClientDefer=n,window.mqq||window.QQApi)n.resolve();else{var i=this.config.QQApiUrl;t.getScript(i,function(){n.resolve()})}return setTimeout(function(){n.reject()},3e3),n},invokeQQClientAPI:function(e){function n(){!r&&window.QQApi&&QQApi.checkAppInstalled?QQApi.checkAppInstalled(o,function(e){e&&0!=e?(e=e.split("."),e=e[e.length-1],i.resolve(1,e)):i.resolve(0)}):window.mqq&&mqq.app&&mqq.app.isAppInstalled?mqq.app.isAppInstalled(o,function(e){i.resolve(e?1:0)}):i.resolve(0)}var i=t.Deferred(),r=t.os.iphone,o=r?e.packageInfo.packageUrl:e.packageInfo.packageName;return this.loadQQClientAPI().done(function(){n()}).fail(function(){i.resolve(0)}),setTimeout(function(){i.resolve(0)},5e3),i},getAppMd5:function(i,r){i=i||140,r=r||e.app.config.defaultName;var o=t.Deferred(),a=n[r].md5Cgi.replace("${id}",i);return t.ajax({url:a,dataType:"jsonp"}).then(function(e){o.resolve(e&&e.data?e.data:e)}),o},report:function(n,i){var r={};i=i&&i.curVideo?i:!1,i&&(r={vid:i.curVideo.getVid()||i.curVideo.getChannelId(),appId:i.config.appid||i.config.appId,contentId:i.config.contentId}),n&&(n=t.extend(n,r),e.report(n))},invokeWeChatAPI:function(e){var n=t.Deferred(),i=this;return window!=top&&(WeixinJSBridge=top.WeixinJSBridge),WeixinJSBridge.invoke||n.resolve(0),i.getNetworkTypeInWechat().done(function(t){e&&e.t&&e.t.config&&(e.t.config.nettype=t)}),t.os.iphone?WeixinJSBridge.invoke("getInstallState",e.packageInfo,function(e){var t=e.err_msg;n.resolve(t.indexOf("get_install_state:yes")>-1?1:0)}):WeixinJSBridge.invoke("getInstallState",e.packageInfo,function(e){var t=e.err_msg;if(t.indexOf("get_install_state:yes")>-1){var i=t.split("yes_"),r=0;i.length>=2&&(r=parseInt(i[1],10)),r=isNaN(r)?0:r,n.resolve(1,r)}else n.resolve(0)}),setTimeout(function(){n.resolve(0)},6e3),n},getNetworkTypeInWechat:function(){var e=t.Deferred();return WeixinJSBridge.invoke("getNetworkType",{},function(t){var n=-1;t&&t.err_msg&&("network_type:fail"===t.err_msg&&(n=0),"network_type:wifi"===t.err_msg&&(n=1),"network_type:edge"===t.err_msg&&(n=2),"network_type:wwan"===t.err_msg&&(n=3)),e.resolve(n)}),e},check:function(i){var r=e.app,o=r.pageType,a=t.Deferred();if(i=i||{},i.appName=i.appName||e.app.config.defaultName,i.packageInfo=n[i.appName],1==o){var s=window==top?document:top.document;if(top.WeixinJSBridge)r.invokeWeChatAPI(i).then(function(e,t){a.resolve(r.buildResult(e,i,t))});else try{s.addEventListener("WeixinJSBridgeReady",function(){r.invokeWeChatAPI(i).then(function(e,t){a.resolve(r.buildResult(e,i,t))})})}catch(c){a.resolve(r.buildResult(0,i))}}else if(3==o)try{r.invokeQQBrowserAPI(i).then(function(e,t){a.resolve(r.buildResult(e,i,t))})}catch(c){a.resolve(r.buildResult(0,i))}else if(2==o)try{r.invokeQQClientAPI(i).then(function(e,t){a.resolve(r.buildResult(e,i,t))})}catch(c){a.resolve(r.buildResult(0,i))}else a.resolve(r.buildResult(0,i));return a},loadDownloaderAPI:function(){if(e.app.loadDownloaderDefer)return e.app.loadDownloaderDefer;var n=t.Deferred();e.app.loadDownloaderDefer=n;var i="";return 1==this.pageType&&(i=e.defaultConfig.libpath+e.defaultConfig.pluginUrl.AppDownloadClickWechat),2==this.pageType&&(i=e.defaultConfig.libpath+e.defaultConfig.pluginUrl.AppDownloadClickMqq),i||n.reject(),t.downloadClick_wechat||t.downloadClick_mqq?n.resolve():(t.getScript(i,function(){n.resolve()}),setTimeout(function(){n.reject()},3e3)),n},checkCanDownloader:function(e,n,i){function r(){t.downloadClick_wechat&&i&&t.downloadClick_wechat(i),t.downloadClick_mqq&&i&&t.downloadClick_mqq(i),o.resolve(1)}var o=t.Deferred();if(t.os.iphone||t.os.ipad||!n||1==e)return o.resolve(0),o;var a=!1,s=!1,c=/android/i.test(navigator.userAgent.toLowerCase());return!c||1==e||!n.downloader||n.downloadUrl&&!n.md5||!n.downloadUrl&&n.md5?(o.resolve(0),o):(t.isArray(n.range)&&t.each(n.range,function(e,t){1==t&&(a=!0),2==t&&(s=!0)}),n.downloaderCallback||(a=!0,s=!0),t.browser.WeChat&&a||t.browser.MQQClient&&s?this.loadDownloaderAPI().done(function(){r()}).fail(function(){o.resolve(0)}):o.resolve(0),o)},buildResult:function(n,i,r){var o="",a=this.pageType,s=t.os.iphone;i.version=r;var c=e.app.getOpenUrl(i),l=this;return s&&!i.openUrl&&(1==a&&(c+="&callback=weixin%3A%2F%2F&sender=%e5%be%ae%e4%bf%a1"),2==a&&(c+="&callback=mqqapi%3A%2F%2F&sender=%E6%89%8B%E6%9C%BAQQ"),3==a&&(c+="&callback=mqqbrowser%3A%2F%2F&sender=QQ%E6%B5%8F%E8%A7%88%E5%99%A8")),o=1==n?c:t.os.iphone&&i.pay&&i.cid?e.app.getPayUrl(i.cid):l.getDownloadUrl(i.downloadUrl,i.appName),{hasApp:n,pageType:a,os:s,version:r,openUrl:c,liveOpenUrl:c,url:o}}}}(tvp,tvp.$),tvp.PLAYER_DEFINE={LIVE:1,VOD:2},tvp.defaultConfig={video:null,width:600,height:450,autoplay:!1,mute:!1,volume:50,modId:"mod_player",playerid:"",coverId:"",typeId:0,pic:"",type:tvp.PLAYER_DEFINE.VOD,playerType:"auto",loadingswf:"",oid:"",share:!0,isHtml5UseHLS:"auto",isShowDurationLimit:!0,isHtml5AutoBuffer:!1,isHtml5UseAirPlay:!0,isHtml5ControlAlwaysShow:!1,html5Preload:"null",html5VodUIFeature:["controlbar","tips","title","meta","playpause","progress","timepanel","fullscreen","overlay","bigben","posterlayer","shadow","promotion","loadingAd","adonend","bullet"],html5LiveUIFeature:["controlbar","tips","playpause","fullscreen","overlay","posterlayer","shadow","bullet"],html5LiveFrontShow:["liveDownloader"],html5FeatureExtJS:{adonend:"//imgcache.qq.com/tencentvideo_v1/tvp/js/plugins/adonend.js?max_age=86400"},html5ForbiddenUIFeature:[],isHtml5UseUI:!0,HTML5CSSName:"",isHtml5ShowPosterOnStart:!0,isHtml5ShowPosterOnEnd:!1,isHtml5ShowPosterOnChange:!0,isiPhoneShowPosterOnPause:!0,isiPhoneShowPlaysinline:!0,isHtml5ShowPlayBtnOnPause:!0,isHtml5UseFakeFullScreen:!tvp.$.os.ios,isIOSVideoOffset:!0,isHtml5ShowLoadingAdOnStart:!tvp.$.os.phone,isHtml5ShowLoadingAdOnChange:!tvp.$.os.phone,isHtml5ShowLoadingAdOnReplay:!0,specialVideoFileDomain:"",flashWmode:"direct",vodFlashUrl:"",vodFlashType:"TPout",vodFlashExtVars:{},vodFlashListType:2,vodFlashSkin:"",isVodFlashShowCfg:!0,isVodFlashShowEnd:!0,isVodFlashShowSearchBar:!0,isVodFlashShowNextBtn:!0,liveFlashUrl:"",liveFlashSwfType:"TencentPlayerLive",isLiveFlashShowConfigBtn:!0,isLiveflashShowFullBtn:!0,isLiveFlashShowCfg:!0,liveFlashWatermark:"",liveFlashAppType:"",liveFlashExtVars:{},flashVersionTag:"20140714",ocxControlBar:"",ocxControlHeight:60,ocxSkin:"",isOcxShowPauseBtn:!1,isOcxHideControl:!1,plugins:{AppBanner:!1,AppRecommend:!1,AppDownloadOnPause:!1,AppBannerOnPause:!1,AppFollow:!1},pluginUrl:{AppBanner:"js/plugins/appbanner.js?v="+tvp.ts,AppFollow:"js/plugins/appfollow.js?v="+tvp.ts,AppRecommend:"js/plugins/apprecommend.js?v="+tvp.ts,AppRecommendBanner:"js/plugins/apprecommendbanner.js?v="+tvp.ts,AppDownloadOnPause:"js/plugins/appdownloadonpause.js?v="+tvp.ts,AppBannerOnPause:"js/plugins/appbanneronpause.js?v="+tvp.ts,AppDownloadClickWechat:"js/plugins/appdownloadclickwechat.js?v="+tvp.ts,AppDownloadClickMqq:"js/plugins/appdownloadclickmqq.js?v="+tvp.ts},cssPath:tvp.common.get_css_path(),pluginCssUrl:{},libpath:tvp.common.get_js_path(),noLimitBtn:!1,isContinuePlay:!0,h5VodBullet:!1,h5LiveBullet:!1,caseSetting:{},limitSetting:{downloader:!0},useLimitCase1UI:!0},function(e){tvp=tvp||{},tvp.fastclick=function(t){var n=e(t),i={},r=e.os.hasTouch;r&&(n.attr("data-fastclick",1),n.on("touchstart",function(e){e=r?e.touches[0]:e,i.start=+new Date,i.tar=e.target,i.x1=e.pageX,i.y1=e.pageY}).on("touchend",function(t){if(t.preventDefault(),t&&t.changedTouches&&t.changedTouches.length){t=t.changedTouches[0];var n,r,o;return i.end=+new Date,i.x2=t.pageX,i.y2=t.pageY,n=Math.abs(i.x2-i.x1),r=Math.abs(i.y2-i.y1),o=i.end-i.start,30>n&&30>r&&300>o?(e(i.tar).trigger("fastclick"),!1):void 0}}))}}(tvp.$),function(e){var t=function(e,n){return function(i,r){var o=/\s/.test(i)?function(e){var t,i=[n],r=[[]];for(t in e)i.push(t),r.push(e[t]);return new Function(i,o.$).apply(e,r).join("")}:e[i]=e[i]||t(document.getElementById(i).innerHTML);return o.$=o.$||n+".push('"+i.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join(n+".push('").split("\r").join("\\'")+"');return "+n,r?o(r):o}}({},"$"+ +new Date);e.tmpl=t}(tvp.$),function(e){"undefined"==typeof e.getScript&&(e.getScript=function(e,t){var n=document.createElement("script"),i=document.getElementsByTagName("head")[0],r=/^(?:loaded|complete|undefined)$/;n.async="async",n.src=e,n.charset="utf-8",t&&(n.onload=n.onerror=n.onreadystatechange=function(){r.test(n.readyState)&&(n.onload=n.onerror=n.onreadystatechange=null,window.DEBUG||i.removeChild(n),n=null,t())}),i.appendChild(n)})}(tvp.$),tvp.report=function(){function e(){return 0==a.length?(r=!0,void(o=null)):(clearTimeout(i),t(a.splice(0,1)),void(r=!1))}function t(t){clearTimeout(i),o=document.createElement("img"),o.onerror=e,o.src=t,setTimeout(e,1e3)}function n(e){return e&&/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i.test(e)?null==o?(t(e),void(r=!1)):r?(t(e),void(r=!1)):void a.push(e):void 0}var i,r=!0,o=null,a=[];return function(e){if(tvp.$.isString(e))return void n(e);if("object"==tvp.$.type(e)){var t,i={deviceId:"int1",platformId:"int2",appId:"int3",speed:"int4",contentId:"str1",fileName:"str2"},r={cmd:-1,url:window!=top?document.referrer:document.location.href,ver:tvp.ver.replace(/\$/g,""),ua:navigator.userAgent,int1:tvp.common.getDeviceId(),int2:tvp.common.getPlatformId(),int3:0,int4:0,str1:"",str2:tvp.filename},o="http://rcgi.video.qq.com/web_report?";for(t in i)t in e&&(e[i[t]]=e[t],delete e[t]);e=tvp.$.extend(r,e),o+=tvp.$.param(e),n(o)}}}(),tvp.ajax=function(t){function n(e,t){e=e||{},t=String(t);var n,i=/([\d\w_]+)/g;for(i.lastIndex=0;null!==(n=i.exec(t))&&(e=e[n[0]],void 0!==e&&null!==e););return e}function i(e){return e=e.slice(0,e.indexOf("?")),e=e.split("/"),{host:e[2],path:"/"+e.slice(3).join("/")}}function r(t,n,r,o){var a=e("@tencent/im-edu-wrap-https-proxy/index"),s=a("http://c.isdspeed.qq.com/code.cgi","https://huatuocode.huatuo.qq.com/code.cgi"),c=s,l=i(t);tvp.report(c,{domain:l.host,cgi:l.path,type:n,code:r,time:o})}function o(e,i){if("object"==t.type(e)&&e.url&&"string"==typeof e.url){"object"==typeof i&&(i=t.extend({key:"suc",value:0},i));var o=t.Deferred(),a=t.now(),s=0,c=t.extend({dataType:"jsonp"},e);return t.ajax(c).done(function(c){var l=c&&"object"==typeof i?n(c,i.key):0;s=t.now()-a,c&&"undefined"!=typeof l&&l==i.value?(r(e.url,1,l,s),o.resolve(c,s)):(r(e.url,3,l,s),o.resolve(c,s))}).fail(function(n){s=t.now()-a,r(e.url,2,900,s),o.reject(n,s)}),o}}return o}(tvp.$),tvp.reportErr=function(e,t){t=t||"tvperror";var n="http://rcgi.video.qq.com/report/jsbossrep?block="+t+"&ret=-1&level=4&msg=";e=[location.href,navigator.userAgent,tvp.filename,tvp.ver,e].join("|"),e=encodeURIComponent(e),n+=e,tvp.report(n)},tvp.bossReport={rcmdTextReport:function(e,t,n,i){var r,o,a,s,c,l;i=i||0,a=window.navigator.userAgent.toLowerCase(),o=a.indexOf("qzone")>-1,c=tvp.app.pageType,l=tvp.common.getUin(),s=1===c?2:2===c?4:o?6:-1,r={oper:e,iplat:s,tab:t,rlist:n,host:location.hostname,url:top.location.href||window.location.href,rtype:0,ptype:21,uin:l,int1:i,int2:tvp.common.getDeviceId()};var u=new Image,d="http://btrace.qq.com/kvcollect?BossId=2745&Pwd=0&_dc="+Math.random();d+="&"+tvp.$.param(r),u.src=d},window_error:function(e){var t={};if(t.filename=e.filename,t.lineno=e.lineno,t.colno=e.colno,t.msg=e.message,t.ua=navigator.userAgent,t.url=top.location.href,t.url=t.url?t.url:window.location.href,t.filename){var n=new Image,i="http://btrace.qq.com/kvcollect?BossId=2869&Pwd=637403767&_dc="+Math.random();i+="&"+tvp.$.param(t),n.src=i}},play_report:function(e){if(e&&!tvp.$.isEmptyObject(e)){var t="http://btrace.qq.com/kvcollect?BossId=2865&Pwd=1698957057&_dc="+Math.random();t+="&"+e.join("&"),tvp.report(t)}},user_action_report:function(e){var t={sop:e.actions,url:e.url||top.location.href,platform:tvp.common.getDeviceId(),vid:e.vid},n=new Image,i="http://btrace.qq.com/kvcollect?BossId=2797&Pwd=219856622&_dc="+Math.random();i+="&"+tvp.$.param(t),n.src=i},apprecommend_report:function(e){var t,n=tvp.app.pageType,i=window.navigator.userAgent.toLowerCase(),r=i.indexOf("qzone")>-1;t=1===n?2:2===n?4:r?6:-1;var o={oper:e.oper,tab:e.tab_id,vid:e.vid,rlist:e.rlist,page:e.page,url:top.location.href||window.location.href,iplat:t,ptype:21,rtype:1},a=new Image,s="http://btrace.qq.com/kvcollect?BossId=2745&Pwd=0&_dc="+Math.random();s+="&"+tvp.$.param(o),a.src=s},report_bullet_switch:function(e){e=e||{};var t=tvp.$;if(e.platform=t.os.android?1:t.os.iphone?2:t.os.ipad?3:4,e.url=window.location.href,"undefined"!==t.type(e.user_action)){var n="http://btrace.qq.com/kvcollect?BossId=3084&Pwd=1539562724&_dc="+Math.random();n+="&"+t.param(e),tvp.report(n)}},h5_live_quality:function(e){var t={step:e.step,sid:e.sid,vurl:e.vurl||"",guid:e.guid,playno:e.playno,vdef:e.vdef,tpay:e.tpay,cpay:e.cpay,fplayerver:tvp.ver,ftime:+new Date,ctime:+new Date,rtime:+new Date,sdtfrom:tvp.common.get_stdfrom(),platform:tvp.common.get_platform(),surl:location.href,sref:document.referrer,vip_type:"",adid:"",ptag:tvp.$.getUrlParam("ptag",location.href)},n="http://btrace.qq.com/kvcollect?BossId=3101&Pwd=1037836152&_dc="+Math.random();n+="&"+tvp.$.param(t),tvp.report(n)}},function(){"v.qq.com"==window.location.hostname&&(window.addEventListener?window.addEventListener("error",tvp.bossReport.window_error):window.attachEvent("onerror",tvp.bossReport.window_error))}(),tvp.retCode={snid:0,TYPE:{SUC:1,ERR:2},config:{cgi:"http://isdspeed.qq.com/cgi-bin/v.cgi",sampling:1},commCode:{error:11,MQzone_Err:12},report:function(e,t,n,i){if(e&&!(isNaN(t)||1>t)&&"undefined"!=typeof n){var r=this.config.cgi;
r+="?flag1="+e.toString()+"&flag2="+t.toString()+"&1="+tvp.retCode.config.sampling+"&2="+n,i&&(r+="&flag3="+i.toString()),tvp.report(r)}}},tvp.RetCode=function(e){this.appid=e,this.timer={begin:0,end:0},this.SNID=tvp.retCode.snid,this.isReported=!1,tvp.retCode.snid++},tvp.RetCode.prototype={begin:function(){this.timer.begin=(new Date).valueOf()},end:function(){this.timer.end=this.timer.end||(new Date).valueOf()},report:function(e,t){if(!this.isReported){this.end();var n=this.timer.end-this.timer.begin;tvp.retCode.report(this.appid,e,n,t),this.isReported=!0}},reportSuc:function(){this.report(tvp.retCode.TYPE.SUC)},reportErr:function(e){e=e||tvp.retCode.commCode.error,this.report(tvp.retCode.TYPE.ERR,e)}},function(e,t){var n={poster:"",prefix:0,tail:0,tagStart:0,tagEnd:0,duration:"",historyStart:0,pay:0,eduext:0,classType:0,yyactid:0,coverId:"",title:"",isLookBack:0,tstart:0,CDNType:0,vFormat:"",LiveReTime:"",typeId:0,format:t.os.ipad||t.os.MIPAD?"mp4":"auto",channelExtParam:{},pid:"",rid:"",bulletId:"",bullet:!1,h5BulletId:"",freeFlowHelper:!1};e.VideoInfo=function(){function i(e){return e.indexOf("_")<0?e:e.split("_")[0]}function r(e){return e.indexOf("_")<0?0:parseInt(e.split("_")[1])}function o(e){for(var t=[],n=e.split("|"),r=0;r<n.length;r++)t.push(i(n[r]));return t.join("|")}function a(){h&&h instanceof e.Player&&h.on(e.ACTION.onVodH5Init,function(){var t;"auto"===h.config.isHtml5UseHLS&&e.common.isUseHLS()||h.config.isHtml5UseHLS||(t=f.getMP4Url(),f.callGetMp4UrlDefer.resolve(t))})}var s="",c="",l=0,u=0,d="",p="",f=this,v={},h=null,g={},m=null;t.extend(v,n),this.data={},this.url="",this.lastQueryVid="",this.callGetMp4UrlDefer=t.Deferred(),t.each(v,function(e){var t=e.charAt(0).toUpperCase()+e.substr(1);f["set"+t]=function(t){return v[e]=t,this},f["get"+t]=function(){return v[e]}}),this.setCurPlayer=function(e){h=e,a()},this.setVid=function(n){if(e.$.isString(n)){if(this.clear(),d=n,n.indexOf("|")<0){var a=i(n);s=a,u=r(n),c=a}else{var l=n.split("|");s=i(l[0]),u=r(l[0]),c=o(n)}return s=t.filterXSS(s),c=t.filterXSS(c),this}},this.getVid=function(){return s},this.getVidList=function(){return c},this.getVidArray=function(){return c.split("|")},this.getIdx=function(){return u},this.getDuration=function(){if(!v.duration)return this.data&&this.data.vl&&t.isArray(this.data.vl.vi)&&this.data.vl.vi.length>0&&0!=this.data.vl.vi[0].td?this.data.vl.vi[0].td:0;for(var e=v.duration.split("|"),n=0,i=0,r=e.length;r>i;i++)n+=parseInt(e[i]);return n},this.getFileSize=function(){return this.data&&this.data.vl&&this.data.vl.vi&&this.data.vl.vi[0]&&this.data.vl.vi[0].fs?parseInt(this.data.vl.vi[0].fs,10):0},this.getTimelong=function(){return this.getDuration()},this.getEndOffset=function(){return this.getDuration()-this.getTail()},this.setChannelId=function(t){return e.$.isString(t)?(p=t,this):void 0},this.getChannelId=function(){return p},this.getFullVid=function(){return 0==this.getIdx()?i(this.getVid()):i(this.getVid())+"_"+this.getIdx()},this.getTitle=function(){return""===v.title&&this.data&&("mp4"==this.data.playtype&&this.data.vl&&t.isArray(this.data.vl.vi)&&this.data.vl.vi.length>0?v.title=this.data.vl.vi[0].ti||"":"hls"==this.data.playtype&&t.isArray(this.data.vi)&&this.data.vi.length>0&&(v.title=this.data.vi[0].title||"")),v.title},this.clear=function(){s="",c="",l=0,u=0,p="",m=null,g={},t.extend(v,n),this.data={},this.url=""},this.clone=function(e){e.setVid(d),e.setChannelId(p);for(var n in v){var i=n.charAt(0).toUpperCase()+n.substr(1);e["set"+i](this["get"+i]())}t.extend(e.data,this.data)},this.getVideoSnap=function(){var t=[];return t[0]=e.common.getVideoSnap(s,u),t[1]=t[0].replace("_160_90_3","_1"),t[2]=t[1].replace("_1.jpg",".png"),t},this.getMP4Url=function(n){var i="",r=this.getVidArray(),o="";if(t.isString(n)){if(i=n,t.inArray(n,r)<0){var a=t.Deferred();return a.reject(),a}}else isNaN(n)?(i=this.getVid(),o=this.getFullVid()):o=i=this.getVidArray()[n>=r.length?0:n];this.lastQueryVid=o||i,this.setRid(t.createGUID());var s=i+"_mp4_"+this.getFormat();if("object"==t.type(g[s])&&t.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=t.Deferred();var c=this;return e.h5Helper.loadVideoUrlByVid({vid:i,isPay:this.getPay(),eduext:v.eduext?v.eduext:0,yyactid:v.yyactid?v.yyactid:0,classType:v.classType,fmt:this.getFormat(),appId:h instanceof e.Player?h.config.appid:0,contentId:h instanceof e.Player?h.config.contentId:""}).done(function(e,n){var i=c.getFreeFlowHelper(),r=!1,o=function(e){c.url=e,c.data=n,c.data.playtype="mp4",g[s]&&g[s].resolve(e)};"function"===t.type(i)?(i(e,function(e){r=!0,o(e)}),setTimeout(function(){r||o(e)},5e3)):o(e)}).fail(function(e,n){g[s]&&g[s].reject(e,t.isUndefined(n)?0:n)}),g[s]},this.getHLS=function(n){var i="",r=this.getVidArray(),o="";if(t.isString(n)){if(i=n,t.inArray(n,r)<0){var a=t.Deferred();return a.reject(),a}}else isNaN(n)?(i=this.getVid(),o=this.getFullVid()):o=i=this.getVidArray()[n>=r.length?0:n];this.lastQueryVid=o||i,this.setRid(t.createGUID());var s=i+"_hls_"+this.getFormat();if("object"==t.type(g[s])&&t.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=t.Deferred();var c=this;return e.h5Helper.loadHLSUrlByVid({vid:i,isPay:this.getPay(),fmt:this.getFormat(),appId:h instanceof e.Player?h.config.appid:0,contentId:h instanceof e.Player?h.config.contentId:""}).done(function(e,t){c.url=e,c.data=t,c.data.playtype="hls",g[s]&&g[s].resolve(e)}).fail(function(e,n){g[s]&&g[s].reject(e,t.isUndefined(n)?0:n)}),g[s]},this.getPlayFormat=function(){if(!t.isPlainObject(this.data))return this.getFormat();if("object"==t.type(this.data.fl)&&t.isArray(this.data.fl.fi))for(var e=this.data.fl.fi,n=0;n<e.length;n++)if(1==e[n].sl)return e[n].name;return this.getFormat()},this.getSrtLangList=function(){return"object"==t.type(this.data.sfl)&&t.isArray(this.data.sfl.fi)?(t.each(this.data.sfl.fi,function(t,n){n.desc=e.html5lang.getSrtName(n.id)}),this.data.sfl.fi):[]},this.getSrtUrlList=function(n){if(t.isUndefined(n)){var i=this.getSrtLangList();if(!(i.length>0))return t.Deferred().reject(-1);n=i[0]}if("object"!=t.type(n)&&!isNaN(n)){for(var r=0,o=this.data.sfl.fi.length;o>r;r++)if(this.data.sfl.fi[r].id==n){n=this.data.sfl.fi[r];break}if("object"!=t.type(n))return t.Deferred().reject(-2)}var a=this.getVid(),s=a+"_srt_"+n.id;if("object"==t.type(g[s])&&t.isFunction(g[s].done)&&"resolved"==g[s].state())return g[s];g[s]=t.Deferred();var c=this;return e.h5Helper.loadSRT({vid:a,sflid:n.id,pid:c.getPid()}).done(function(e){var i=[];"object"==t.type(e.ul)&&t.isArray(e.ul.ui)&&t.each(e.ul.ui,function(e,t){i.push([t.url,"lang="+n.name].join("?"))}),g[s].resolve(i)}).fail(function(e){g[s].reject(e)}),g[s]},this.getFormatList=function(){if("object"==t.type(m)&&t.isFunction(m.done))return m;m=t.Deferred();var e=this,n=["mp4","msd"],i=function(){var i=[];return t.isPlainObject(e.data.fl)&&t.isArray(e.data.fl.fi)?(t.each(e.data.fl.fi,function(e,r){-1!=t.inArray(r.name,n)&&i.push(r.name)}),i):[]};return this.getMP4Url().done(function(){m.resolve({list:i()})}).fail(function(){m.reject({list:[]})}),m},this.hasHardSubtitle=function(){for(var e=this.getFormat(),t=0,n=this.data.fl.fi.length;n>t;t++){var i=this.data.fl.fi[t];if(i.name==e)return!!i.sb}return!1},this.hasSoftSubtitle=function(){return"object"==t.type(this.data.sfl)&&t.isArray(this.data.sfl.fi)&&this.data.sfl.fi.length>0}},e.PLAYTYPE={LIVE:"1",VOD:"2"}}(tvp,tvp.$),function(e){tvp.speedlimit={buildResult:function(t){var n=!1,i=!1,r=e.Deferred();return e.browser.MQQ&&e.browser.version>5.1&&(i=!0),i&&this.mqqGetResult(t).then(function(e){e?r.resolve(e):r.resolve()}),i&&(n=!0),n||r.resolve(),setTimeout(function(){r.resolve()},3e3),r},mqqGetResult:function(t){function n(){if(window.x5&&window.x5.getBrowserSignature)try{var n=parseInt(tvp.$.now()/1e3,10);x5.getBrowserSignature("vid:"+t+"["+n+"]",function(t){t?i.resolve({bver:e.browser.version,pkckey:t}):i.resolve()},function(){i.resolve()})}catch(r){i.resolve()}else i.resolve();setTimeout(function(){i.resolve()},300)}var i=e.Deferred();return window.x5&&window.x5.getBrowserSignature?n():tvp.app?(tvp.app.loadMqqDefer||(tvp.app.loadMqqDefer=tvp.app.loadMqqAPI()),tvp.app.loadMqqDefer.done(function(){n()}),tvp.app.loadMqqDefer.fail(function(){i.resolve()})):i.resolve(),i}}}(tvp.$);var a={};a.ha=function(e){function t(e,t){return((e>>1)+(t>>1)<<1)+(1&e)+(1&t)}for(var n=[],i=0;64>i;)n[i]=0|4294967296*Math.abs(Math.sin(++i));var r=function(i){for(var r,o,a,s,c=[],l=unescape(encodeURI(i)),u=l.length,d=[r=1732584193,o=-271733879,~r,~o],p=0;u>=p;)c[p>>2]|=(l.charCodeAt(p)||128)<<8*(p++%4);for(c[i=(u+8>>6)*e+14]=8*u,p=0;i>p;p+=e){for(u=d,s=0;64>s;)u=[a=u[3],t(r=u[1],(a=t(t(u[0],[r&(o=u[2])|~r&a,a&r|~a&o,r^o^a,o^(r|~a)][u=s>>4]),t(n[s],c[[s,5*s+1,3*s+5,7*s][u]%e+p])))<<(u=[7,12,17,22,5,9,14,20,4,11,e,23,6,10,15,21][4*u+s++%4])|a>>>32-u),r,o];for(s=4;s;)d[--s]=t(d[s],u[s])}for(i="";32>s;)i+=(d[s>>3]>>4*(1^7&s++)&15).toString(e);return i};return r}(16),a.stringToHex=function(e){for(var t="",n=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),i=0;i<e.length;i++)t+=n[e.charCodeAt(i)>>4]+n[15&e.charCodeAt(i)];return t},a.hexToString=function(e){for(var t="",n="0x"==e.substr(0,2)?2:0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},a._Seed="#$#@#*ad",a.tempcalc=function(e,t){for(var n="",i=0;i<e.length;i++)n+=String.fromCharCode(e.charCodeAt(i)^t.charCodeAt(i%4));return n},a.u1=function(e,t){for(var n="",i=t;i<e.length;i+=2)n+=e.charAt(i);return n},a._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a.urlenc=function(e,t,n){for(var i,r,o,s,c,l,u,d="",p=0;p<e.length;)i=e.charCodeAt(p++),r=e.charCodeAt(p++),o=e.charCodeAt(p++),15==p&&(d+="A",d+=t,d+=n),s=i>>2,c=(3&i)<<4|r>>4,l=(15&r)<<2|o>>6,u=63&o,isNaN(r)?l=u=64:isNaN(o)&&(u=64),d=d+a._urlStr.charAt(s)+a._urlStr.charAt(c)+a._urlStr.charAt(l)+a._urlStr.charAt(u);return d},a.$xx=function(e,t,n,i){var r=""+Math.floor((new Date).valueOf()/1e3),i=(""+i).charAt(0),o="",s="",c={plt:e||"",vid:t||"",std:n||"",sts:i||"",ts:r,rf:o,ua:s};c=window.JSON?JSON.stringify(c):function(){var e=[];for(var t in c)e.push('"'+t+'":"'+c[t]+'"');return"{"+e.join(",")+"}"}(c);var l=a.hexToString(a.ha(e+t+r+a._Seed+o+s+i.charAt(0)+n)),u=a.urlenc(a.tempcalc(l,a._Seed),i.charAt(0),r),d=a.urlenc(a.tempcalc(l,"86FG@hdf"),i.charAt(0),r),p=a.u1(u,0),f=a.u1(u,1);return{p:c,u:u,c:d,u1:p,u2:f,t:r}},function(e,t){function n(){return this.init()}var i=[{reg:function(){return this.cfg.noAuth?!0:!1},request:function(e){var t=this;e.resolve({param:{vids:t.cfg.vid,defaultfmt:t.cfg.fmt}})}},{reg:function(){return this.cfg.eduext?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.edugetvinfo,param:{eduext:t.cfg.eduext,platform:261001,vid:t.cfg.vid,defn:t.cfg.fmt}})}},{reg:function(){return 1===this.cfg.classType?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.edugetvinfo,param:{platform:221001,vid:t.cfg.vid,defn:t.cfg.fmt}})}},{reg:function(){return this.cfg.yyactid?!0:!1},request:function(e){var t=this;e.resolve({cgi:t.cfg2.cgi.yygetinfo,cgi2:t.cfg2.cgi.yygetkey,param:{actid:t.cfg.yyactid,platform:181001,vids:t.cfg.vid,defaultfmt:t.cfg.fmt}})}},{reg:function(){if(window!==top&&"v.qq.com"===location.hostname&&"/iframe/player.html"===location.pathname){var t=e.common.getParams(location.href);if(t&&t.cKey&&t.encryptVer&&t.platform)return this.params=t,!0}return!1},request:function(e){var t,n=this,i={cgi:n.cfg2.cgi.getinfo,param:{encryptVer:n.params.encryptVer,platform:n.params.platform,cKey:n.params.cKey,vids:n.cfg.vid,defaultfmt:n.cfg.fmt}};try{t=window.parent.location.href}catch(r){}t&&(i.param.wxrefer=t),e.resolve(i)}},{reg:function(){return e.common.is_mqq_buluo()?!0:!1},request:function(t){if(!window.getBrowserSignature)return void t.reject();var n=this;window.getBrowserSignature(n.cfg.vid,function(i){var r;if(i&&i.data)try{var o=JSON.parse(i.data);o&&o.result&&o.result.token&&(r=o.result.token)}catch(a){}r?t.resolve({param:{cKey:r,encryptVer:"6.4",platform:e.$.os.ios?"170408":"170308",vids:n.cfg.vid,defaultfmt:n.cfg.fmt}}):t.reject()})}},{reg:function(){return 3===e.app.pageType&&window===top?!0:!1},request:function(n){var i,r,o=this,a=function(){var e,i,r={vid:o.cfg.vid};r.timestamp=parseInt(+new Date/1e3),t.os.ios?(e=x5.ios.getBrowserSignature,i=t.os.ipad?r:"vid:"+r.vid+"["+r.timestamp+"]"):(e=x5.android.getBrowserSignature,i="vid:"+r.vid+"["+r.timestamp+"]"),e(i,function(e){if("object"==typeof e&&e.key&&e.ver&&e.platform){var t={cgi:o.cfg.cgi.getvinfo,param:{cKey:e.key,encryptVer:e.ver,platform:e.platform,vid:o.cfg.vid,defn:o.cfg.fmt}};n.resolve(t)}else if("object"==typeof e&&e.data){var t={cgi:o.cfg.cgi.getvinfo,param:{cKey:e.data,encryptVer:"4.0",platform:"161001",vid:o.cfg.vid,defn:o.cfg.fmt}};n.resolve(t)}else if("string"==typeof e){var t={cgi:o.cfg.cgi.getvinfo,param:{cKey:e,encryptVer:"4.0",platform:"161001",vid:o.cfg.vid,defn:o.cfg.fmt}};n.resolve(t)}else n.reject()},function(){n.reject()})};i=window.x5&&x5.ios&&"function"===t.type(x5.ios.getBrowserSignature),r=window.x5&&"function"===t.type(window.x5.getBrowserSignature),i||r?a():e.app.loadMqqAPI().done(function(){i||r?a():n.reject()}).fail(function(){n.reject()})}},{reg:function(){var e=navigator.userAgent.toLowerCase().indexOf("qqnews")>-1,t=navigator.userAgent.toLowerCase().indexOf("qnreading")>-1;return e||t?!0:!1},request:function(e){var n=this,i=n.cfg.vid,r="undefined"!=typeof n.cfg.svr_time?n.cfg.svr_time+"":parseInt(+new Date/1e3)+"",o="TVP_KUAIBAO_CB_"+r.substr(-4,4);window[o]=function(t){var i;try{i=JSON.parse(t)}catch(r){}if(i&&i.key&&i.ver&&i.platform&&i.sdtfrom){var o={param:{cKey:i.key,encryptVer:i.ver,platform:i.platform,sdtfrom:i.sdtfrom,vid:n.cfg.vid,defaultfmt:"mp4"}};e.resolve(o)}else e.reject()};var a=function(){var e={method:"getCKey",types:["string","string","string"],args:[i,r,o],instanceName:"TencentNewsScriptControllerJsInterface"},t="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(e))+"&_t="+r,n=new Image;n.src=t},s=function(){var e=function(){window.getBrowserSignature(i,r,o)};"function"==typeof window.getBrowserSignature?e():document.addEventListener("TencentNewsJSInjectionComplete",function(){e()})};t.os.ios?s():t.os.android?a():e.reject()}},{reg:function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("liebao")>-1,n=e.indexOf("com.douban")>-1;return n||t?!0:!1},request:function(e){var t,n=this,i="undefined"!=typeof n.cfg.svr_time?n.cfg.svr_time+"":parseInt(+new Date/1e3)+"",r=function(){if(!window.getBrowserSignature)return void e.reject();try{t=window.getBrowserSignature(n.cfg.vid,i)}catch(r){}if(t&&t.key&&t.ver&&t.platform){var o={param:{cKey:t.key,encryptVer:t.ver,platform:t.platform,vid:n.cfg.vid,defaultfmt:n.cfg.fmt}};e.resolve(o)}else e.reject()};r()}}];n.prototype={init:function(){return this.reg_request},reg_request:function(n,r){var o=this;o.cfg=n,o.cfg2=r;var a=t.Deferred(),s=!1;return e.config&&e.config.authRules&&e.config.authRules.length&&(i=i.concat(e.config.authRules)),t(i).each(function(e,n){return"function"!==t.type(n.reg)?!0:"function"!==t.type(n.request)?!0:n.reg.call(o)?(s=!0,n.request.call(o,a),!1):!0}),s||a.reject(),setTimeout(function(){a.reject()},6e3),a}},e.auth=new n}(tvp,tvp.$),function(e,t){function n(){var e="view.inews.qq.com"===l.host;return t.os.iphone||t.os.ipod?e?"v3110":"v3010":t.os.ipad?e?"v4110":"v4010":t.os.android?t.os.tablet?"v6010":e?"v5110":"v5010":t.browser.IEMobile?"v7010":"v1010"}function i(e,t){for(var n=0,i=t.length;i>n;n++)if(1==t[n].sl)return t[n].id;return-1}function r(n){var i={cmd:3532,speed:0,appId:0,contentId:"",vid:"",itype:1,val:0,val2:0,str3:""};n=t.extend(i,n),e.report(n)}function o(e){e=e||{};var i,r=!1;return e.alias&&"string"==typeof e.fn&&e.vid&&(e.fn=e.fn.replace(e.vid,e.alias),r=!0),u&&"string"==typeof e.path&&(e.path=e.path.replace(/\/\/(.+?)(\/|#|$|\?)/,function(){return arguments.length>1?arguments[0].replace(arguments[1],u):arguments[0]})),i=e.path.indexOf("?")>-1?e.path+"&"+e.fn+"&vkey="+e.vkey+"&br="+e.br+"&platform=2&fmt="+e.fmt+"&level="+e.level+"&sdtfrom="+n():e.path+e.fn+"?vkey="+e.vkey+"&br="+e.br+"&platform=2&fmt="+e.fmt+"&level="+e.level+"&sdtfrom="+n(),t.isString(e.sha)&&e.sha.length>0&&(i+="&sha="+e.sha),r&&(i+="&vidalias=1"),i}function s(e){return function(n){r(t.extend(e,n))}}function c(i){var r,o,s,c="",l=1,u={};if("object"==typeof a&&"function"==typeof a.$xx&&"string"==typeof i){r=t.getUrlParam("platform",i),o=t.getUrlParam("vids",i),s=n(),i.indexOf("mvgetinfo?")>-1&&(t.os.iphone?s="V3013":t.os.ipad?s="V4013":t.os.android&&(s="V5013"));try{u=a.$xx(r,o,s,l)}catch(d){"function"==typeof e.reportErr&&d&&d.message&&e.reportErr(d.message)}u&&(c=c+"&_qv_rmt="+u.u1,c=c+"&_qv_rmt2="+u.u2,t.getUrlParam("sdtfrom",i)||(c=c+"&sdtfrom="+s),i=i+(-1==i.indexOf("?")?"?":"&")+c,t.cookie.set("qv_als",u.c))}return i}var l={isHLS:!1,isPay:!1,vid:"",fmt:"auto",platform:11001,host:window!=top?document.referrer:document.location.host},u="";l.cgi=function(){if("view.inews.qq.com"===l.host){var n="";return t.browser.WeChat&&(n="nocache=1&"),{getinfo:"http://h5wx.video.qq.com/getinfo?callback=?&",getkey:"http://h5wx.video.qq.com/getkey?callback=?&"+n}}return{getinfo:e.common.get_request_url("getinfo")+"?callback=?&",getvinfo:e.common.get_request_url("getvinfo")+"?callback=?&",edugetvinfo:"http://sv.video.qq.com/edugetvinfo?",yygetinfo:"http://sv.video.qq.com/mvgetinfo?",yygetkey:"http://sv.video.qq.com/mvgetkey?",getkey:e.common.get_request_url("getkey")+"?callback=?&"}}(),l.retryCgi=function(){return t.browser.WeChat||t.browser.MQQClient?{getinfo:l.cgi.getinfo.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3"),getkey:l.cgi.getkey.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3")}:{getinfo:l.cgi.getinfo.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3"),getkey:l.cgi.getkey.replace(/(\/\/)(.+?)(\/|$)/,"$1bkh5vv.video.qq.com$3")}}(),e.h5Helper={loadVideoUrlByVid:function(n){var i="";return e.speedlimit?(i=t.Deferred(),e.speedlimit.buildResult().done(function(t){var r=e.h5Helper.loadVideoUrlByVid_base(n,t);r.done(function(e,t){i.resolve(e,t)}),r.fail(function(e,t){i.reject(e,t)})})):i=e.h5Helper.loadVideoUrlByVid_base(n),i},loadVideoUrlByVid_base:function(r,a){var u,d,p={},f={},v=0,h=t.Deferred();t.extend(t.extend(p,l),r);var g,m=new e.RetCode(100126),y=!1,w=l.cgi.getinfo,_=t.now(),I=0,b="",E=t.noop,C=l.cgi.getkey;g={platform:p.platform,charge:p.isPay?1:0,otype:"json",sb:1,nocache:t.browser.MQQClient||t.browser.WeChat?1:0,_rnd:(new Date).valueOf()},r.retryDefer&&t.isFunction(r.retryDefer.reject)&&(y=!0,h=r.retryDefer,w=l.retryCgi.getinfo,C=l.retryCgi.getkey),r.loadingAdCgi&&(w=r.loadingAdCgi,r.noAuth=!0),r.defer&&(h=r.defer),E=s({itype:1,val2:y?1:0,str3:b,vid:p.vid,appId:p.appId,contentId:p.contentId}),m.begin(),E();var S=function(i){return I=t.now()-_,i&&i.s?"o"!=i.s?(v=i.em||50,d=i.exem):i.vl&&i.vl.vi&&t.isArray(i.vl.vi)&&0!=i.vl.cnt?u=i.vl.vi[0]:v=68:v=50,0!=v||5==u.fst&&t.isPlainObject(u.ul)&&t.isArray(u.ul.ui)&&0!=u.ul.ui.length?0==v&&2!=u.st&&(8!=u.st?v=62:(v=83,d=u.ch)):v=62,r.yyactid&&83===v&&(d=-3),e.common.is_mqq_buluo()&&(d=0),0!=v?(E({val:v,speed:I}),m.reportErr(v),void h.reject(v,d)):(m.reportSuc(),E({val:0,speed:I}),r.loadingAdCgi?void h.resolve(u.ul.ui[0].url,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview}):u.fvkey?(d=o({path:u.ul.ui[0].url,fn:u.fn,vkey:u.fvkey,br:u.br,platform:2,fmt:p.fmt,level:u.level,sdtfrom:n(),sha:u.fsha,vid:p.vid,alias:u.alias}),void h.resolve(d,{vl:i.vl,fl:i.fl,sfl:i.sfl,exem:i.exem,preview:i.preview})):void T(i))},T=function(a){var l,d=u.ul.ui[0];f.br=u.br,f.path=d.url,f.fn=u.fn,f.fiid=i(p,a.fl.fi),f.vt=d.vt,l=new e.RetCode(100127),l.begin(),_=t.now(),b=C+t.param({otype:"json",vid:p.vid,format:f.fiid,filename:f.fn,platform:p.platform,vt:f.vt,charge:p.isPay?1:0,_rnd:(new Date).valueOf()}),b=c(b),E=s({itype:2,val2:y?1:0,str3:b,vid:p.vid,appId:p.appId,contentId:p.contentId}),E(),t.ajax({url:b,dataType:"jsonp"}).done(function(e){var i="";return v=0,I=t.now()-_,e&&e.s?"o"!=e.s&&(v=e.em||50):v=50,0!=v?(l.reportErr(v),E({val:v,speed:I}),void h.reject(v)):(i=o({path:f.path,fn:f.fn,vkey:e.key,br:f.br,platform:2,fmt:p.fmt,level:e.level,sdtfrom:n(),sha:e.sha,vid:p.vid,alias:u.alias}),l.reportSuc(),E({val:0,speed:I}),void h.resolve(i,{vl:a.vl,fl:a.fl,sfl:a.sfl,exem:a.exem,preview:a.preview}))}).fail(function(){l.reportErr(),E({val:500,speed:t.now()-_}),y?h.reject(500,2):(r.retryDefer=h,e.h5Helper.loadVideoUrlByVid(r))})},O=function(){b=w+t.param(g),a&&"object"===t.type(a)&&(b+="&"+t.param(a)),b=c(b),t.ajax({url:b,dataType:"jsonp"}).done(function(t){return!r.noAuth&&t&&0!=t.em&&"o"!=t.s?85===t.em&&-3===t.type&&1===r.cgi_auth_index?(r.cgi_auth_index+=1,r.defer=h,r.needTime=!0,r.svr_time=t.curTime,void e.h5Helper.loadVideoUrlByVid(r)):(r.noAuth=!0,r.defer=h,void e.h5Helper.loadVideoUrlByVid(r)):void S(t)}).fail(function(){m.reportErr(),E({val:500,speed:t.now()-_}),y?h.reject(500,1):(r.noAuth=!0,r.retryDefer=h,e.h5Helper.loadVideoUrlByVid(r))})};return r.cgi_auth_index||(r.cgi_auth_index=1),e.auth(p,l).done(function(e){e=e||{},"undefined"!==t.type(e.cgi)&&e.cgi&&(w=e.cgi),"undefined"!==t.type(e.cgi2)&&e.cgi2&&(C=e.cgi2),e.param&&t.extend(g,e.param),O()}).fail(function(){t.extend(g,{vids:p.vid,defaultfmt:p.fmt}),O()}),h},loadHDVideoUrlByVid:function(t){t.fmt="mp4",e.h5Helper.loadVideoUrlByVid(t)},loadHLSUrlByVid:function(n){var i={},r=t.Deferred();t.extend(t.extend(i,l),n);var o=new e.RetCode(100128),a="http://h5vv.video.qq.com/gethls?callback=?&"+t.param({vid:i.vid,charge:i.isPay?1:0,otype:"json",platform:i.platform,_rnd:(new Date).valueOf()}),u=s({itype:3,str3:a,vid:i.vid,appId:i.appId,contentId:i.contentId}),d=t.now();return a=c(a),u(),o.begin(),t.ajax({url:a,dataType:"jsonp"}).done(function(n){if(!n||!n.s)return o.reportErr(50),u({speed:t.now()-d,val:50}),void r.reject(50);if("o"!=n.s)return o.reportErr(n.em||50),u({speed:t.now()-d,val:n.em||50}),void r.reject(n.em||50);if(!n.vd||!n.vd.vi||!e.$.isArray(n.vd.vi))return o.reportErr(68),u({speed:t.now()-d,val:68}),void r.reject(68);for(var i=[],a=-2,s=0;s<n.vd.vi.length;s++)if(a=n.vd.vi[s].ch,2==n.vd.vi[s].st){var c=n.vd.vi[s].url.toLowerCase();if(!(c.indexOf(".mp4")<0&&c.indexOf(".m3u8")<0)&&n.vd.vi[s].url){var l=n.vd.vi[s];i.push(l.url);break}}return 0==i.length?(o.reportErr(68),u({speed:t.now()-d,val:68}),void r.reject(68,a)):(u({speed:t.now()-d,val:0}),o.reportSuc(),void r.resolve(i[0],n.vd))}).fail(function(){o.reportErr(),u({speed:t.now()-d,val:500}),r.reject(500,3)}),r},load3GVideoUrl:function(t){t.fmt="msd",e.h5Helper.loadVideoUrlByVid(t)},loadIsUseHLS:function(n){var i={},r=t.Deferred();t.extend(t.extend(i,l),n);var o=new e.RetCode(100125);return o.begin(),t.ajax({url:e.common.get_request_url("get_dtype")+"?callback=?&"+t.param({vids:i.vid,platform:i.platform,otype:"json",_rnd:(new Date).valueOf()}),dataType:"jsonp"}).done(function(e){var i=1;if("object"!=t.type(e))return o.reportErr(),void r.reject(500,4);if("o"!=e.s||!t.isArray(e.dl)||0==e.dl.length)return o.reportErr(e.em),void r.reject(e.em||50);for(var a=0,s=e.dl.length;s>a;a++)e.dl[a].vid===n.vid&&(i=e.dl[a].dltype);o.reportSuc(),r.resolve(i,e)}).fail(function(){o.reportErr(),r.reject(500,4)}),r},loadSRT:function(e){var n={},i=t.Deferred();return t.extend(t.extend(n,l),e),t.ajax({url:"http://h5vv.video.qq.com/getsurl?"+t.param({vid:n.vid,format:n.sflid,platform:n.platform,pid:n.pid,otype:"json",_rnd:(new Date).valueOf()}),dataType:"jsonp"}).done(function(e){return"object"!=t.type(e)?void i.reject(500):"o"!=e.s?void i.reject(isNaN(e.em)?500:e.em,e.msg||""):void i.resolve(e)}).fail(function(){i.reject(500)}),i},setSpecialVideoFileDomain:function(e){"string"==typeof e&&/^(\S+[\.])?qq\.com/.test(location.host)&&(u=e)}}}(tvp,tvp.$),function(e,t){e.BasePlayer=function(){var n={};this.modId="",this.sessionId="",this.$mod=null,this.videomod=null,this.playerid="",this.curVideo=null,this.instance=null,this.dataset={},this.eventList=["inited","play","playing","ended","allended","pause","resume","timeupdate","getnext","error","stop","fullscreen","change","write","flashpopup","getnextenable","msg","h5loadingadstart","h5loadingadend"],this.config={},this.hijackFun=["getPlayer","getCurVideo","showPlayer","hidePlayer","play","pause","getPlaytime","setPlaytime","getPlayerType","resize"],this.prototype={},function(t){var n=["init","addParam","write","setPlayerReady"];n=n.concat(t.hijackFun);for(var i=0,r=n.length;r>i;i++)t.prototype[n[i]]=e.$.noop}(this),this.addParam=function(e,t){this.config[e]=t},this.on=function(e,i){e&&t.isFunction(i)&&(n[e]=t.isArray(n[e])?n[e]:[],n[e].push(i))},this.trigger=function(e){var i,r,o;if(e&&t.isArray(n[e]))for(r=0,o=n[e].length;o>r;r++)t.isFunction(n[e][r])&&(i=Array.prototype.slice.call(arguments,1),n[e][r].apply(null,i))},this.off=function(e,i){var r;e&&t.isArray(n[e])&&(i?(r=t.inArray(i,n[e]),r>=0&&(n[e][r]=void 0)):n[e]=void 0)}},e.BasePlayer.prototype={setCurVideo:function(e){this.curVideo=e},getPlayer:function(){return null},getCurVideo:function(){return this.curVideo},getCurVid:function(){return this.curVideo instanceof e.VideoInfo?this.curVideo.getVid():""},getCurVidList:function(){return this.curVideo instanceof e.VideoInfo?this.curVideo.getVidList():""},init:function(n){t.extend(this.config,n);for(var i=0,r=this.eventList.length;r>i;i++){var o="on"+this.eventList[i];this[o]=t.isFunction(this.config[o])?this.config[o]:e.$.noop}this.setCurVideo(this.config.video),this.write(this.config.modId)},write:function(e){t("#"+e).html("here is player of base")},log:function(e){window.console&&window.console.log(e)},getCBEvent:function(n){var i;return this.instance&&t.isFunction(this.instance[n])&&this.instance[n]!=e.$.noop?i=this.instance[n]:t.isFunction(this[n])&&this[n]!=e.$.noop&&(i=this[n]),i},callCBEvent:function(e){var n=this.getCBEvent(e);if(t.isFunction(n)){var i=Array.prototype.slice.call(arguments,1);return n.apply(this,i)}return void 0},resize:function(e,n){var i=this.getPlayer();i&&(i.style.width=t.formatSize(e),i.style.height=t.formatSize(n))},showPlayer:function(){},hidePlayer:function(){},execFlashMethod:function(e){var t,n=this.getPlayer(),i=[];if(n&&n[e]){i=[].slice.call(arguments,1);try{return t=n[e].apply(n,i)}catch(r){}}}}}(tvp,tvp.$),tvp=tvp||{};var s=s||{ver:"$Rev: 90013 $",curSSO:"",lastmodify:"$Date: 2015-08-27 16:28:49 +0800 (鍥�, 2015-08-27) $"};s.log=tvp.log,s.debug=function(e){var t="";if(e.indexOf("[")<0&&arguments&&arguments.callee&&arguments.callee.caller){var n=arguments.callee.caller;t=s.debug.getFunName(n)}e=t?"["+t+"]:"+e:e,-1===tvp.log.isDebug&&(tvp.log.isDebug="true"==tvp.$.getUrlParam("debug")?1:0),tvp.log.isDebug&&("undefined"!=typeof __TenVideo_OCX_CTRL_PAGE__?s.driverPage.sendMsg(s.DEFINE.MSG.DRVPG_EVT_DEBUGLOG,encodeURIComponent(e)):tvp.log(e))},s.debug.getFunName=function(e){if("function"==typeof e||"object"==typeof e)var t=(""+e).match(/function\s*([\w\$]*)\s*\(/);return t&&t[1]},s.config={OLD_MIN_VER:"8.22.5275.0",IE_MIN_VER:"8.45.6526.0",FF_MIN_VER:"8.45.6526.0",CHROME_MIN_VER:"8.45.6526.0",STARTUP_MIN_VER:"8.14.4895.0",IE_FLASH_MIN_VER:"9.0.124.0",FF_FLASH_MIN_VER:"10.0",FLASH_CAB:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,124,0",MEDIAPLAYER_DOWNLOAD_URL:"http://dl_dir.qq.com/qqtv/QQLive8.46.6680.0.exe",PROGID_QQLIVE_INSTALLER:"QQLiveInstaller.InstallHelper.1",PROGID_QQLIVE_LIVEAPI:"QQLive.Application",MMINSTALL_CLSID:"1DABF8D5-8430-4985-9B7F-A30E53D709B3",MMINSTALL_VER:"8,14,4895,0",OLD_IE_CLSID:"11F2A418-94B2-4E16-9B0C-B00C0435F903",OLD_FF_CLSID:"D9EBCF5D-3F8F-4B6A-89BA-70577BE73C62",SEHLL_CLSID:"f7e55bdf-9528-46ba-b550-777859627591",OCX_CLSID:"5EF7B131-C278-4034-BC88-2CE28B128681",LIVEAPI_CLSID:"4A8FD414-1EBF-4EBD-A158-0D09B005A17F",OCX_URL:"//imgcache.qq.com/tencentvideo_v1/js/tvp/ocx_ctrl_page.html?max_age=0",CTRLSWF_URL:"//imgcache.qq.com/liveportal_v1/swf/player/vodCtrl.swf",CTRLSWF_VOD_URL:"//imgcache.qq.com/liveportal_v1/swf/player/vodCtrl_drm.swf",CTRLSWF_W_URL:"//imgcache.qq.com/liveportal_v1/swf/player/vodCtrl_w.swf",PREVIEW_URL:"//imgcache.qq.com/liveportal_v1/swf/player/qqlive_logo.swf",LOADING_URL:"//imgcache.qq.com/liveportal_v1/swf/player/loadstart.swf",AD_SWF_URL:"//imgcache.qq.com/liveportal_v1/swf/player/moneyplayer.swf",OCX_DISABLED_MANUAL:"http://v.qq.com/help/film_1.html#15"},s.param={playpage:{mousewheel:"mousewheel",oldmode:"OldMode"},shell:{ocxurl:"OcxUrl",hidescripterr:"HideScriptErr"},ocx:{mute:"Mute",volume:"Volume",fullscreen:"FullScreen",appendpausebtn:"AppendPauseBtn",programpageurl:"ProgramPageUrl"},driver:{autoplay:"autoPlay",iscontinued:"isContinued",url:"url",type:"type",adv:"adv",oid:"oid"},driverurl:{ctrlbar:"ctrlbar",ctrlheight:"ctrlh",previewurl:"previewUrl",loadingurl:"loadingUrl",previewpic:"previewPic",hidectrl:"hideCtrl",debug:"debug"},getParamBool:function(e){return void 0===e?!1:"string"==typeof e?(e=e.toLowerCase(),"true"==e||"1"==e):!!e},getElementObjectById:function(e){return window.ActiveXObject?document.getElementById(e):document.embeds[e]}},s.version=function(){function e(e){if(s.version.checkVerFormatValid(e))return e;if(/\d+/i.test(e)){var t=parseInt(e/1e4/100,10),n=parseInt(e/1e4,10)-100*t,i=parseInt(e,10)-(100*t*1e4+1e4*n);return strVer=t+"."+n+"."+i}return e}var t=-1,n=-1,i=-1;return _version={},{compare:function(t,n){t=e(t),n=e(n),t=t.replace(/,/g,"."),n=n.replace(/,/g,".");for(var i=t.split("."),r=n.split("."),o=0;4>o;o++){var a=Number(i[o]),s=Number(r[o]);if(a>s)return 1;if(s>a)return-1}return 0},get:function(){return tvp.version.getOcx()},check:function(t){if(t=t||s.version.getSupportMinVersion(),!s.version.checkVerFormatValid(t))return!1;var n,i=s.version.get();return n=/^\d+$/.test(i)?e(i):i+"",s.version.compare(n,t)<0?!1:!0},isZero:function(e){return e=e||s.version.get(),/^\d+$/.test(e)&&0==e?!0:0==s.version.compare(e,"0.0.0.0")},checkVerFormatValid:function(e){return/^(\d+\.){2}\d+(\.\d+)?$/.test(e)},hasQQLiveOcx:function(){if(-1!=i)return 1==i;var e=s.version.check();return i=e?1:0},hasOldVersion:function(){if(-1!=n)return 1==n;var e=s.version.get(s.config.OLD_IE_CLSID,!0);return e?(n=s.version.compare(e,s.config.OLD_MIN_VER)>0?1:0,!!n):!1},hasQQLivePlayer:function(){if(-1!=t)return 1==t;var e=s.version.get(s.config.LIVEAPI_CLSID);return e?(t=s.version.compare(e,"0.0.0.0")>0?1:0,!!t):!1},getSupportMinVersion:function(){return tvp.$.browser.ie?s.config.IE_MIN_VER:tvp.$.browser.firefox?s.config.FF_MIN_VER:tvp.$.browser.webkit?s.config.CHROME_MIN_VER:"0.0.0.0"}}}(),s.userAgent=s.browser,s.installer={timer:null,installerObj:null,getInstallerHtml:function(){var e="";return e+='<div id="qqlive_mminstaller_div"><OBJECT classid="clsid:'+s.config.MMINSTALL_CLSID+'" codebase="http://dl_dir.qq.com/qqtv/MMInstaller.cab#version='+s.config.MMINSTALL_VER+'" ID="QQLiveInstaller" width="0px" height="0px">',e+='	<embed name="FF_MM_Install" id="FF_MM_Install" type="application/tecent-qqlive-plugin" width="0px" height="0px"></embed>',e+="</OBJECT></div>"},showInstallerObject:function(e){tvp.$.getByID(e).innerHTML=s.installer.getInstallerHtml()},isMMInstalled:function(){if(tvp.$.browser.ie)try{var e=new ActiveXObject(s.config.PROGID_QQLIVE_INSTALLER);if("undefined"!=typeof e.GetVersionByClsid)return!0;try{e.Destroy(),e=null,delete e}catch(t){}return!1}catch(t){return!1}else if(tvp.$.browser.isNotIESupport()){var n=document.embeds.FF_MM_Install;try{if(n.CreateAX("MMInstall.dll"),"undefined"!=typeof n.GetVersionByClsid)return!0;try{n.Destroy(),n=null,delete n}catch(t){}return!0}catch(t){return!1}}return!1},checkFFHasMMEmbed:function(){return!!tvp.$.getByID("FF_MM_Install")},getActiveXObj:function(e,t){var n=null;if(t&&tvp.$.browser.isNotIESupport()){if(n=document.embeds.FF_MM_Install,!n){var i=document.createElement("div");i.innerHTML=s.installer.getInstallerHtml(),document.getElementsByTagName("body")[0].appendChild(i),n=document.embeds.FF_MM_Install}try{n.CreateAX(t)}catch(r){}}else if(e&&tvp.$.browser.ie)try{n=new ActiveXObject(e)}catch(r){}return n},hide:function(){var e=tvp.$.getByID("QQLiveInstaller");
e&&(e.style.display="none")}},s.flash={getFullVersion:function(){return tvp.version.getFlash()},getMainVer:function(){return tvp.version.getFlashMain()},isFlashVerVaild:function(){var e=!1;return e=tvp.$.browser.ie?-1==s.version.compare(s.flash.getFullVersion(),s.config.IE_FLASH_MIN_VER)?!1:!0:-1==s.version.compare(s.flash.getFullVersion(),s.config.FF_FLASH_MIN_VER)?!1:!0}},s.player={startup:function(){0!=tvp.$.browser.isCanOcx()&&0!=s.flash.isFlashVerVaild()&&0!=s.version.check(s.config.STARTUP_MIN_VER)&&(window.location.href="qqlive://system_startup/")},openClient:function(e,t){if(e&&s.version.hasQQLivePlayer()){var n="qqlive://sso/";if(!t){var i=e;if(/^\d+$/i.test(i))n+="projectid="+i;else if(i.toLowerCase().indexOf("qqlive://sso/")>=0)n=i;else{if(!/^[a-z0-9]{15}$/i.test(i))return;n+="vbarid="+i}}e&&t&&(n+="vbarid="+e+"&videoid="+t);var r=s.installer.getActiveXObj(s.config.PROGID_QQLIVE_LIVEAPI,"");if(r)try{return void r.OpenQQLive(n)}catch(o){}window.location.href=n}}},s.driverPage={sendMsg:function(e,t){t=t||"",window.navigate("app:OnMsg&nID="+e+"&vContent="+t)},ready:function(){window.navigate("app:PageLoaded")}},s.event={rptImg:null,bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var i=e||this,r=n.concat(Array.prototype.slice.call(arguments,0));return"string"!=typeof t?t.apply(i,r):i[t]?i[t].apply(i,r):void 0}},closeMousewheel:function(){document.onmousewheel=function(e){return e=e||event,e.ctrlKey?!1:void 0}},reportTCSSHot:function(e,t){var n=!1;if("undefined"==typeof t)n=!0;else{var i=tvp.$.cookie.get("lv_ocx_rpt");i=i?parseInt(i):0,n=!(i&t)}n&&("function"==typeof pgvSendClick?pgvSendClick({hottag:"OCX.SETUP."+e,virtualURL:"/virtual/ocx.html",virtualDomain:"v.qq.com"}):(s.event.rptImg=new Image,s.event.rptImg.src="http://pinghot.qq.com/pingd?dm=v.qq.com.hot&url=/virtual/ocx.html&tt="+escape(document.title)+"&hottag=OCX.SETUP."+e+"&hotx=9999&hoty=9999&rand="+Math.round(1e5*Math.random())),tvp.$.cookie.set("lv_ocx_rpt",i|t,document.location.hostname||document.location.hostname))}};var s=s||{};s.DEFINE={STATUS:{NOT_INITED:-1,INIT:0,READY:4,PLAYING:7,STOP:1,LOADING:2,PAUSE:6,Buffering:8,Paused_Buffering:9,END:91},EVENT:{LOADSTART:"loadstart",LOADING:"loading",PLAY:"playing",STOP:"stop",PAUSE:"pause",RESUME:"resume",PLAYNEXT:"playnext",PLAYPREV:"playprev",MUTE:"mute",FULLSCREEN:"fullscreen",VIDEOREADY:"videoready",PROGESS:"progress",END:"ended",GET_VIDEO_FORMAT_CNT:"getVideoFormatCnt",GET_VIDEO_CUR_FORAMT:"getVideoCurFormat",VIDEO_FORMAT_SWITCHED:"videoFormatSwitched",VIDEOCHANGE:"videochange",VOLUMECHANGE:"volumechange",MOUSEMOVE:"mousemove",DBCLICK:"dbclick",TYPECHANGE:"typechange",GET_DRM_PREVDURATION:"getDrmDuration",GET_DRM_PREV_REASON:"getDrmPrevReason",CHECK_MMINSTALLER:"CheckMMInstall",CHECK_FLASH:"CheckFlash",CHECK_VERSION:"CheckVersion",SHOW_PLAYER:"ShowPlayer",DIRVER_PAGE_INITED:"DirverPageInited",OCX_READY:"inited",GUIDE_FLASH_INITED:"GuideFlashInited",UPDATE_SSO:"UpdateSSO",PAUSE_BTN_CLICK:"PauseBtnClick",FULLSCREEN_BTN_CLICK:"FullScreenBtnClick",CAN_PREV:"CanPrev",CAN_NEXT:"CanNext",OCX_INIT_FAILED:"OcxInitFailed",SCRIPT_ERROR:"ScriptError",OTHER_MSG:"msg",OCX_DISABLED:"ocxdisabeld",DRM_ERROR:"drmerror"},MSG:{OCX_EVT_ONMSG_PLAYING:1,OCX_EVT_ONMSG_PAUSED:2,OCX_EVT_ONMSG_STOPED:3,OCX_EVT_PREPLAY_LOADING:4,OCX_EVT_ONMSG_LOADSTART:7,OCX_EVT_ONMSG_MOUSEMOVE:9,OCX_EVT_ONMSG_LBUTTONDOWN:12,OCX_EVT_ONMSG_LBUTTONDBLCLK:14,OCX_EVT_ONMSG_START:15,OCX_EVT_ONMSG_VOLUME_UP:23,OCX_EVT_ONMSG_VOLUME_DOWN:24,OCX_EVT_ONMSG_MUTE:25,OCX_EVT_ONMSG_CANPRE:26,OCX_EVT_ONMSG_CANNEXT:27,OCX_EVT_ONMSG_BUF_RESUME_PLAY:30,OCX_EVT_ONMSG_PAUSE_RESUME_PLAY:31,OCX_EVT_ONMSG_PLAY_PAUSE_CLICK:32,OCX_EVT_ONMSG_VIDEO_FORMAT_COUNT:49,OCX_EVT_ONMSG_CUR_VIDEO_FORMAT_IDX:50,OCX_EVT_ONMSG_VIDEO_FORMAT_SWITCHED:51,OCX_EVT_ONMSG_COMMAND:100,DRVPG_EVT_FLASH_INITED:501,DRVPG_EVT_ALL_INITED:502,LIVE_PAGE_EVENT_GUIDEFLSAH_INITED:503,DRVPG_EVT_UPDATESSO:504,CTRLBAR_EVT_PAUSECLICK:505,CTRLBAR_EVT_FULLSCREENCLICK:506,OCX_EVT_FULLSCREEN_SWITCH:507,DRVPG_EVT_OCX_INIT_FAILED:508,DRVPG_EVT_JS_ERROR:509,DRVPG_EVT_DEBUGLOG:510,CTRLBAR_EVT_STOPCLICK:511,OCX_DISABLED:512,OCX_DRM_PREV_END:513,OCX_DRM_GET_TIMEOUT:515,NEW_OCX:516,USE_OCX:517,SHOW_INSTALLER_TIPS:518,GET_VIDEO_CUR_TIME:519,NO_FLASH_PLAYER:520,CTRLBAR_EVT_RESUMECLICK:521,OCX_EVT_ERROR:1002,OCX_EVT_ONMSG_FLV_PROGRAM_END:1003,OCX_EVT_ONMSG_FLV_TOTAL_TIME:1005,OCX_EVT_GET_QQ:1104,OCX_EVT_PREVIEW_REASON:1102,OCX_EVT_PREVIEW_DURATION:1103,OCX_EVT_DRM_AUTHORIZE_RESULT:1106,OCX_EVT_DRM_BEGIN:1107},COMMANDID:{IDM_RBUTTON_PLAY_PAUSE:11251,IDM_RBUTTON_PRE:11253,IDM_RBUTTON_NEXT:11254,HOT_KEY_FULLSCREEN:11302},PROGRESS_EVENT:{FLV_LOADING:2,FLV_HEAD_TOTAL_TIME:3},KEYCODE:{HOTKEYF_SHIFT:1,HOTKEYF_CONTROL:2,HOTKEYF_ALT:4,HOTKEYF_EXT:8,VK_RETURN:13,VK_ESCAPE:27,VK_SPACE:32,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40},VIDEOTYPE:{UNKNOWN:0,LIVE:1,VOD:8},AD_EVENT:{ERROR:"Error",DATALOADED:"DataLoaded",DOWNLOADED:"Downloaded",PLAYEND:"PlayEnd"}},function(e,t){e.livehub={g_flashp2p:!1,iretcode:0,g_curCnlInfo:{},stepReport:function(n,i){var r={cmd:3545,val:n};"object"==t.type(i)&&(r=t.extend(r,{speed:i.delay,int5:i.code,vid:i.lid}),i.config&&(r=t.extend(r,{contentId:i.config.contentId,appId:i.config.appid}))),e.report(r)},FlashChecker:function(n){var i=this;this.cnlId="",this.extParam={},this.onError=t.noop,this.onCanFlash=t.noop,this.onCanHTML5=t.noop,this.onCanOCX=t.noop,this.onComplete=t.noop,this.onGetCnlId=t.noop;var r=function(t,i){i=i||{},i.config=n,e.livehub.stepReport(t,i)};this.onSuccess=function(n){n&&0==n.iretcode?(e.livehub.iretcode=n.iretcode,e.livehub.g_flashp2p=n.flashp2p?!0:!1,e.debug("get channel info:flashid="+n.flashid+",p2pid="+n.p2pid+",flashp2p="+n.flashp2p),i.cnlId=""+n.flashid||n.p2pid||"",i.onGetCnlId(""+i.cnlId,!1),e.livehub.getCurChannelInfo(i.cnlId,i.extParam),n.flashid?(r(5),i.onCanFlash(i.cnlId)):t.os.windows&&n.p2pid?(r(6),i.onCanOCX(i.cnlId)):(r(7,{code:n.iretcode}),i.onError(n.iretcode))):(r(8,{code:n.iretcode}),i.onError(500))},this.send=function(){if(r(1),e.common.isUseHtml5())return r(2),i.onCanHTML5(i.cnlId),void i.onComplete();var n=t.now();t.ajax({url:"http://info.zb.qq.com",data:{cmd:1,cnlid:i.cnlId||""},dataType:"jsonp"}).done(function(e,o){o=t.now()-n,r(3,{delay:o}),i.onSuccess(e),i.onComplete()}).fail(function(e,o){o=t.now()-n,r(4,{delay:o}),i.onError(),i.onComplete()})}},getCurChannelInfo:function(n,i){var r=e.livehub.g_curCnlInfo;i&&"object"==t.type(i)?(r.cnlId=i.cnlId,i.channelname&&(r.cnlName=i.channelname),i.currentname&&i.currenttime&&(r.prmInfo=i.currenttime+"|"+i.currentname)):r={}}}}(tvp,tvp.$),function(e,t){function n(n,i,r){var o=t.now(),s=o-a,c={cmd:3529,val:n,str4:i,speed:0>s?t.now()-o:s};a=o,"object"==t.type(r)&&t.extend(c,r),e.report(c)}function i(n,i){var r=n+"Defer";if(e[r])return e[r];var o=t.Deferred();e[r]=o;var a="//imgcache.qq.com/tencentvideo_v1/tvp/js/",c=n.toLowerCase();"OcxPlayer"==n&&"undefined"!=typeof s&&"undefined"!=typeof s.DEFINE&&(c="ocxplayerlite");var l=a+"module/"+c+".js?max_age=86400&v="+e.ts;if("function"==typeof e[n])o.resolve();else{var u=new e.RetCode(100123),d=t.now();u.begin(),i(1),t.getScript(l,function(){var r=t.now()-d;if("function"!=typeof e[n])throw u.reportErr(11),i(2,11,r),new Error(window.errMsg?errMsg[1]:"");i(2,0,r),u.reportSuc(),o.resolve()})}return o}function r(e){return"string"==t.type(e)&&/html5|mp4/i.test(e)}var a=t.now(),c=function(n,o){function a(){var e=t.Deferred();switch(m.playerType){case"flash":w="FlashPlayer";break;case"html5":p();break;case"ocx":w="OcxPlayer";break;case"mp4":w="MP4Link";break;default:s()}return e.resolve(),e}function s(){var t=navigator.platform.toLowerCase(),n=navigator.userAgent.toLowerCase(),i=e.version.getFlashMain(),r=/ipad|ipod|iphone|lepad_hls|IEMobile|WPDesktop/gi.test(n),o=/MacIntel/gi.test(t),a=/ipad|ipod|iphone|playstation/gi.test(t);return e.common.isEnforceMP4()?void(w="MP4Link"):r||a||e.$.os.android?void(e.common.isSupportMP4()||e.common.isInUseH5()?p():w="MP4Link"):(isNaN(i)||10>i)&&o&&e.common.isSupportMP4()?void p():void(w="FlashPlayer")}function l(n){if(n.getChannelId()){var i=n.getChannelId();if("object"==t.type(y[i])&&t.isFunction(y[i].done))return y[i];y[i]=t.Deferred();var r=new e.livehub.FlashChecker(m),o=!0;return r.cnlId=n.getChannelId(),r.extParam=n.getChannelExtParam(),r.onGetCnlId=function(e,t){n.setChannelId(e),n.setIsLookBack(!!t)},r.onCanFlash=function(){w="FlashLivePlayer"},r.onCanHTML5=function(){f()},r.onCanOCX=function(){w="OcxPlayer"},r.onError=function(){u(),o=!1},r.onComplete=function(){d(),o?y[i].resolve():y[i].reject()},r.send(),y[i]}}function u(){e.common.isLiveUseHTML5()?f():w=t.os.android?"FlashLivePlayer":"OcxPlayer"}function d(){switch(m.playerType){case"flash":w="FlashLive";break;case"html5":f();break;case"flashLive":w="FlashLivePlayer";break;case"ocx":w="OcxPlayer"}}function p(){E=!0,w=m.isHtml5UseUI?"Html5Player":"Html5Tiny"}function f(){w=m.isHtml5UseUI?"Html5Live":"Html5LiveTiny"}function v(e){for(var t=!1,n=document.getElementsByTagName("link")||[],i=0,r=n.length;r>i&&!(t=n[i]&&n[i].href&&(n[i].href.indexOf(e)>0||-1!=n[i].href.indexOf("player_inews.css")));)i++;return t}function h(){function i(){if(!a){a=!0;var t=new e[w];t.init(n),g.resolve(t,w)}}var o=null,a=!1,s=t.inArray(w,b),c=m.cssPath+(n.HTML5CSSName||"player.css");(s>-1&&t.isString(n.HTML5CSSName)&&n.HTML5CSSName.length>0||r(w))&&!v(c)?(o=setTimeout(function(){n.isHtml5UseUI=!1,w=C[s],i()},5e3),c+=-1===c.indexOf("?")?"?t="+e.ts:"&t="+e.ts,t.loadCss(c).done(function(){clearTimeout(o),o=null,i()})):i()}var g=t.Deferred(),m={},y={},w="FlashPlayer",_=["未指明播放器内核","您当前使用的统一播放器JS文件不包含指定的播放器内核","video未初始化"],I=["FlashPlayer","FlashLivePlayer","MP4Link","OcxPlayer"],b=["Html5Player","Html5Live"],E=!1,C=["Html5Tiny","Html5LiveTiny"];if(I=I.concat(b),I=I.concat(C),t.extend(m,n),t.isUndefined(n.isHTML5UseUI)||(m.isHtml5UseUI=n.isHTML5UseUI),!n.video instanceof e.VideoInfo)throw new Error(_[2]);return n.video.setCurPlayer(o),c.checkLivePlayer=l,t.when(n.type==e.PLAYER_DEFINE.VOD?a():l(n.video)).then(function(){var r="",a=function(t,i,o){e.report({cmd:3531,val:t,val2:i||0,str3:r,speed:o||0,contentId:n.contentId||"",appId:n.appid||0})};if(!w)throw new Error(_[0]);if(t.inArray(w,I)<0)throw new Error(_[1]);n.type==e.PLAYER_DEFINE.VOD&&E&&o&&o.trigger&&o.trigger(e.ACTION.onVodH5Init),"function"!=typeof e[w]?i(w,a).done(function(){h.call(o)}):h.call(o)}),g},l={player:"playerType",showcfg:["isVodFlashShowCfg","isLiveFlashShowCfg"],searchbar:["isVodFlashShowSearchBar"],showend:["isVodFlashShowEnd"],tpid:["typeId"],cid:["coverId"],flashshownext:["isVodFlashShowNextBtn"],loadingswf:"loadingswf",wmode:"flashWmode",flashskin:["vodFlashSkin"],extvars:["vodFlashExtVars"],swftype:["vodFlashType"],swfurl:["vodFlashUrl","liveFlashUrl"]};e.Player=function(i,r){this.sessionId=t.createGUID(),n(1,this.sessionId),this.instance=null,this.config={},this._oldcfg={},t.extend(this.config,e.defaultConfig),this.setting("width",i),this.setting("height",r)},e.Player.fn=e.Player.prototype=new e.BasePlayer,t.extend(e.Player.fn,{setting:function(e,t){this.config[e]=t},output:function(e){this.setting("modId",e),this.create(this.config)},create:function(i){var r=this;t.extend(r.config,i),n(2,this.sessionId,{contentId:r.config.contentId||"",appId:r.config.appid||0});var a=function(){c(r.config,r).done(function(o,a){try{n(3,r.sessionId,{vid:o.curVideo.getFullVid()||o.curVideo.getChannelId(),str3:o.getPlayerType(),contentId:r.config.contentId||"",appId:r.config.appid||0})}catch(s){}r.instance=o,r.instance.instance=r;for(var l in r.instance)"instance"!=l&&("on"==l.substr(0,2)&&t.isFunction(r[l])&&r[l]!=e.$.noop||(r[l]=r.instance[l]));o.callCBEvent("onwrite"),r.config.type==e.PLAYER_DEFINE.LIVE&&(r.play=function(n){t.isString(n)?(r.config.video.setChannelId(n),n=r.config.video):n instanceof e.VideoInfo&&t.when(c.checkLivePlayer(n)).then(function(){r.instance instanceof e[a]?r.instance.play(n):(i.video=n,c(i))})}),e.Player.instance[r.playerid]=r}).always(function(){function e(e,n){try{var i="build"+e;return t.isFunction(r[i])?(r[i].call(r,n),!0):!1}catch(o){}}if(t.each(r.config.plugins,function(n,i){if(i&&n in r.config.pluginUrl){var o,a=t.isPlainObject(i)?i:{};if("AppRecommend"===n&&r.config.plugins.adonend)return;if(!e(n,a)){o=n;var s=r.config.libpath+r.config.pluginUrl[o];t.isString(s)&&""!=t.trim(s)&&t.getScript(s,function(){e(n,a)})}}}),window.console&&o){var n={jQuery:"jq",Zepto:"zepto",jq:"jqmobi"};for(var i in n)if("function"==typeof window[i]&&"jQuery"===i&&"function"!=typeof jQuery.Deferred)break}})},s=function(){var n,i=t.Deferred(),r="//v.qq.com/iframe/tvp.config.js";if(e.config)return i.resolve(),i;var o=parseInt(100*Math.random(),10)+1,a=20;return 100-a>o?(i.reject(),i):(n=t.getScript(r,function(){return e.config?void i.resolve():void i.reject()}),n&&"function"===t.type(n.fail)&&n.fail(function(){i.reject()}),setTimeout(function(){i.reject()},4e3),i)};s().done(function(){try{e.config&&e.config.defaultConfig&&t.extend(r.config,e.config.defaultConfig)}catch(n){}a()}).fail(function(){a()})},addParam:function(n,i){e.report({cmd:3546,val:1}),"config"==n&&"object"==t.type(i)?t.extend(this.config,i):this._oldcfg[n]=i},setCurVideo:function(t){e.report({cmd:3546,val:2}),this.config.video=t,t&&t instanceof e.VideoInfo&&t.setCurPlayer(this)},write:function(n){e.report({cmd:3546,val:3}),this.config.modId=n;var i=1==this._oldcfg.type?1:2,r=this;t.each(this._oldcfg,function(n,o){n in l?t.isArray(l[n])?2==i?r.config[l[n][0]]=o:1==i&&l[n].length>=2&&(r.config[l[n][1]]=o):t.isString(l[n])&&(r.config[l[n]]=o):n in e.defaultConfig&&(r.config[n]=o)}),delete this._oldcfg,this.create(this.config)}}),e.create=c}(tvp,tvp.$),tvp.Player.instance={},function(e){tvp.modeHide=function(t,n){function i(){v.off("click.tvp_mode_hide").on("click.tvp_mode_hide",function(){var t;if(c=f.getPlayer(),t=c?e(c).attr("src"):f.$mod.find("a").attr("href")){if(!tvp.common.isSupportMP4()&&!tvp.common.isUseHtml5())return void(window.location.href=t);d.show(),setTimeout(function(){p.isend?(p.isend=!1,f.play()):c.play(),o(),setTimeout(function(){c.play()},100),r()},5)}})}function r(){p.isInit||(p.isInit=!0,e(c).on("ended",function(){f.cancelFullScreen()}).on("playing",function(){document.webkitIsFullScreen||c.webkitDisplayingFullscreen||u}).on("webkitendfullscreen",function(){a()}),e(document).on("webkitfullscreenchange fullscreenchange",function(){a()}))}function o(){s()?f.enterFullScreen():c.webkitEnterFullscreen()}function a(){c&&(document.webkitIsFullScreen||c.webkitDisplayingFullscreen||u||f.isFakeFullscreen()||(c.pause(),d.hide()))}function s(){return tvp.$.os.android?tvp.$.browser.MQQ?!1:tvp.$.compareVersion(tvp.$.os.version,"4.4")>-1?!1:!0:!1}var c,l,u,d=e("#"+n.modId),p=new tvp.VideoInfo,f=new tvp.Player,v=e(t.btn);l={width:"100%",height:window.innerHeight,video:p,modId:n.modId,isHtml5UseUI:!0,isHtml5UseFakeFullScreen:s(),isiPhoneShowPlaysinline:!1,onwrite:function(){i()},onfullscreen:function(e){e=u,u||a()}},e.extend(l,n),p.setVid(n.vid),f.create(l)}}(tvp.$),tvp.filename="tvp.player_v2.js","function"==typeof define&&define("tvp_bugfix",[],function(){return tvp}),n.tvp=tvp,"undefined"!=typeof s&&(n.QQLive=s)}(this)});
/*!@tencent/im-edu-course-detail/modules/checkVideo*/
;define("@tencent/im-edu-course-detail/modules/checkVideo",function(e){function i(e,i,d){d=d||{};var r=t("video");if(0!==r.length){var o=Math.min(parseInt(r.attr("width"),10)||500,t(i).width()),u=parseInt(r.attr("height"),10)||450;if("undefined"!=typeof tvp){var v=r.data("vid");if(!v)return r.remove();var c=new tvp.VideoInfo;c.setVid(v);var s=new tvp.Player;n=n||{},n.vodFlashExtVars=n.vodFlashExtVars||{};var p=["uid_uin","uid_a2","uid_type","_guest_type","uuid","uin","luin","skey","lskey","pSkey"],l=function(){var e=document.cookie,i=new RegExp("(^| )("+p.join("|")+")=([^;]*)(;|$)","g"),n=e.match(i)||[];return t.trim(n.join(""))},f={term_id:0,course_id:e,type:d.isPreview?d.aid:2,action:d.isPreview?3:2,cookie:l()};t.extend(n.vodFlashExtVars,{eduext:a.encode(JSON.stringify(f))});var h="js_video_player_"+v;r.replaceWith('<div id="'+h+'" class="announcement-player"></div>');var y=t.extend(!0,{},n,{autoplay:!1,modId:h,video:c,width:o,height:u});s.create(y)}}}var t=e("jquery"),n=e("@tencent/im-player.config/player.config"),a=e("@tencent/im-edu-course-detail/modules/base32");return e("@tencent/im-tvp-bugfix/tvp-bugfix"),i});
/*!@tencent/im-edu-pay/cdkeyApply*/
;define("@tencent/im-edu-pay/cdkeyApply",function(e){function t(){function e(){var e="//ke.qq.com/user/index/index.html#cid="+a.courseId;return e+=a.term_id?"&tid="+a.term_id+"&fr=2":"&fr=2"}function t(){d.init({data:a,tmpl:s.paySucc,emailNode:"#js_pay_email",idCodeNode:"#js_id_code",idCodeBtn:"#js_id_code_btn",mobileNode:"#js_pay_mobile",submitNode:"#js_pay_submit",hadProhibit:1==a.user_notify_status,confirmOpt:{title:n,globalClass:"pay-succ",confirm:!0},onShow:function(){o(".part-form").hasClass("part-form-expand")||o("#js_pay_mobile").focus(),o("#part-expand").on("click",function(){var e=o(".part-form");o(this).text(e.hasClass("part-form-expand")?"开课提醒设置":"收起"),e.toggleClass("part-form-expand")}),o(".js-pay-continue").click(function(){window.open("/course/list","_blank"),o.Dialog.remove()}),o(".js-pay-studynow").click(function(){window.open(e(),"_blank"),o.Dialog.remove()}),o(".pay-succ").delegate("#js_addgroup_tencent, #js_discuss_tencent","click",function(){p.join(a.qunid,o.cookie.uin())}),o(".tips .tips-er-code").hover(function(){o(this).find(".tips-er-code-float").show()},function(){o(this).find(".tips-er-code-float").hide()})},submitDataFilter:function(e){return e.cid=a.courseId,e.term_id=a.term_id,e},onValidatedFail:function(){var e=o(".part-form");e.hasClass("part-form-expand")||(o("#part-expand").text("收起"),e.toggleClass("part-form-expand"))}}).show()}a.c={};var n="报名成功";a&&(a.price>0||location.href.indexOf("#sid=signup")>0)&&(2!=a.source||2===a.source&&10==a.pay_status)&&(n="购买课程"),c.notifyStatus({succ:function(e){a.user_notify_status=e.result.status,t()},err:function(){a.user_notify_status=0,t()}}),a.couponId&&report.tdw({module:"youhuiquan",action:"coursepage_realpay",ver3:a.price,ver1:a.courseId})}function n(){var e={},n={cid:a.courseId,term_id:a.term_id||0,cdkey:a.cdkey};a.vcCode&&(n.vfcode=a.vcCode),c.applyCourseUseCdkey({param:n,succ:function(){i.tdw({action:"get-clk",ver1:a.courseId,ver2:1}),c.getApplyInfo({param:{cid:a.courseId},succ:function(n){a.userInfo||(a.userInfo={});var c=n.result,i=a.userInfo;i.mobile=c.mobile,i.qq=o.cookie.uin(),i.email=c.email,i.gname=c.gname,i.token=c.token,c.gcode&&(a.qunid=c.gcode,e.discussQun=c.gcode),u.succ&&u.succ(e),2!==u.param.type&&t()},err:function(){return a.userInfo||(a.userInfo={}),a.userInfo.qq=o.cookie.uin(),u.succ&&u.succ(e),2!==u.param.type&&t(),!0}})},err:function(e){return e=e||{},i.tdw({action:"get-clk",ver1:a.courseId,ver2:0}),u.err&&u.err(e),!0}})}var o=e("jquery"),c=e("@tencent/im-edu-db/edu-db"),i=e("@tencent/im-edu-report/edu-report"),r=e("@tencent/im-edu-login/edu-login");e("@tencent/im-edu-pay/db.courseOperation");var u,a,s={paySucc:e("/node_modules/@tencent/im-edu-pay/paySucc.tpl_tpl")},d=e("@tencent/im-edu-pay/notify"),p=e("@tencent/im-group-tencent/group-tencent");return{init:function(e){u=e,a=u.param,r.isLogin()?n():r.show({succ:function(){n()},close:function(){u.cancel&&u.cancel()}})}}});
/*!@tencent/im-validator/validator*/
;define("@tencent/im-validator/validator",function(t){function e(){var t=this.validator={version:"0.0.1",succCls:"g-succ",infoCls:"g-info",errCls:"g-err",notAsciiWidth:2,parentSelector:".mod-form__line",resultSelector:".field-help",fieldSelector:".f-field",validate_timeout:300,msg:"",reg:{email:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,mobile:/^1\d{10}$/,uin:/^[1-9](\d{4,10}|\d{17})$/,ascii:/^[\x00-\x7F]+$/,asciiSingle:/[\x00-\xFF]/,notAscii:/[^\x00-\x7F]/,fullWidth:/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,halfWidth:/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,uppercase:/[A-Z]/,lowercase:/[a-z]/,integer:/^\d+$/,date:/^(?:20|19)\d\d([-\/\\\.])(?:0?[1-9]|1[0-2])\1(?:[012]?\d|3[01])$/,time:/^(?:[01]?\d|2[0-3])[:：][0-5]?\d$/,url:/^https?:\/\//,ltrim:/^\s+/,rtrim:/\s+$/,matches:function(t,e,r){return("[object RegExp]"!==Object.prototype.toString.call(e)?new RegExp(e,r):e).test(t)},extend:function(t,e){this[t]=e}},toNumber:function(t){return t.replace(/\D/g,"")},toInt:function(t,e,r){return parseInt(t,e||10)||r||0},toDate:function(e,r){return/^\d{13}$/.test(e)?new Date(parseInt(e,10)):("string"==typeof e&&(e=e.replace(/-/g,"/")),t.date(e)?new Date(e):r||new Date)},toDateWithOutHMS:function(e,r){return e=t.toDate(e,r),e.setHours(0,0,0,0),e},getTime:function(e,r){return e=t.toDate(e),e?e.getTime():r||+new Date},pass:function(){return!0},integer:function(e){return t.reg.integer.test(e.toString())},not_null:function(t){return 0!==t.length},date_ipt:function(e){return t.reg.date.test(e.toString())},time:function(e){return t.reg.time.test(e.toString())},url:function(e){return t.reg.url.test(e.toString())},limit_number:function(e,r){var n=parseInt(e,10),a=parseInt(r.data("min"),10),i=parseInt(r.data("max"),10);return a>n||n>i?(t.msg=["请输入",a,"-",i].join(""),!1):!0},str_length:function(e,n,a){e=(e||"").toString(),!a&&(e=r.trim(e));var i=0;n=n||t.notAsciiWidth;for(var s=0,o=e.length;o>s;s++)i+=e.charCodeAt(s)<128?1:n;return Math.ceil(i/n)},limit:function(e,n){e=(e||"").toString(),n.data("trim")&&(e=r.trim(e));for(var a=0,i=t.notAsciiWidth,s=0,o=e.length;o>s;s++)a+=e.charCodeAt(s)<128?1:i;var l=parseInt(n.data("min"),10),u=parseInt(n.data("max"),10);return l&&i*l>a?(t.msg=(u?["请填写",l,"-",u,"个字"]:["请至少填写",l,"个字"]).join(""),!1):u&&a>i*u?(t.msg="字数超出"+Math.ceil((a-i*u)/i)+"个",!1):!0},limitByLength:function(e,r){var n=(e||"").length,a=parseInt(r.data("min"),10),i=parseInt(r.data("max"),10);return a&&a>n?(t.msg=(i?["请填写",a,"-",i,"个字"]:["请至少填写",a,"个字"]).join(""),!1):i&&n>i?(t.msg="字数超出"+(n-i)+"个",!1):!0},mobile:function(e){return t.reg.mobile.test(e)},uin:function(e){return t.reg.uin.test(e)},email:function(e){return t.reg.email.test(e)},date:function(t){return"string"==typeof t&&(t=t.replace(/-/g,"/")),"string"!=typeof t||/\d{4}\/\d{1,2}\/\d{1,2}/.test(t)?!isNaN(Date.parse(t)):!1},uppercase:function(e){return!t.reg.lowercase.test(e)},lowercase:function(e){return!t.reg.uppercase.test(e)},JSON:function(t){try{JSON.parse(t)}catch(e){return!(e instanceof SyntaxError)}return!0},getMsgHtml:function(t){return"<i></i><p>{{msg}}</p>".replace(/{{msg}}/g,t||"")},setSuccess:function(e){return t.ignore||e.closest(t.parentSelector).removeClass(t.errCls+" "+t.infoCls).addClass(t.succCls).find(t.resultSelector).html(t.getMsgHtml(t.succMsg||"","succ")),t.ignore=!1,t.msg="",t.succMsg="",!0},setTips:function(e){return e.closest(t.parentSelector).removeClass(t.errCls+" "+t.succCls).addClass(t.infoCls).find(t.resultSelector).html(t.getMsgHtml(t.msg||e.data("tips"),"tips")),t.msg="",!0},setError:function(e){return e.closest(t.parentSelector).removeClass(t.infoCls+" "+t.succCls).addClass(t.errCls).find(t.resultSelector).html(t.getMsgHtml(t.msg||e.data("msg"),"err")),t.msg="",!1},hasError:function(e){var r=e.closest(t.parentSelector);return r.hasClass(t.errCls)},clearValidateResult:function(e){return e.closest(t.parentSelector).removeClass(t.errCls+" "+t.succCls+" "+t.infoCls)},isNeedValidate:function(e){var r=e.closest(t.parentSelector);return r.hasClass(t.errCls)||r.hasClass(t.succCls)||r.hasClass(t.infoCls)},if_not_null_then:function(t){return t.length?!0:"break"},check:function(e,n,a,i){var s=!0,o=(e.data("pattern")||"").toString().split("|"),l=(e.data("msg")||"").toString().split("|"),u=e.val()||e.data("value")||"",c="";if("string"==typeof u){switch(e.data("prefix")){case"number":/\D/.test(u)&&(u=t.toNumber(u),e.val(u));break;case"float":/[^\d\-\.]/.test(u)&&(u=u.replace(/[^\d\-\.]/g,""),e.val(u));break;case"ltrim":t.reg.ltrim.test(u)&&(u=u.replace(t.reg.ltrim,""),e.val(u))}n||(u=r.trim(u))}for(var f=0,d=o.length;d>f&&s;f++){var g=o[f];if("function"==typeof t[g]){c=l[f]?l[f]:"",i&&c&&(t.msg=c);var p=t[g](u,e);s=!!p&&s;var m=e.data("msg-"+g);if(m&&(c=m),"break"===p)break}else""===g&&1===o.length?s=!0:(s=!1,console.warn&&void 0)}return a&&a(s),s},checkOne:function(e,r,n,a){t.msg="";var i=!0;return i="function"==typeof t[n]?t[n](r,e):""===n?!0:!1,"function"==typeof a&&a(i,t.msg),i=i===!1?t.msg||!1:i},validate:function(e,r){var n=t.check(e,r,!1,!0);return t.noResult&&(t.msg=""),t.noResult?n:n?t.setSuccess(e):t.setError(e)},bind:function(e){if(!e.data("__validate")){if(0===e.closest(t.parentSelector).find(t.resultSelector).length){var r=e.closest(t.fieldSelector),n='<div class="'+t.resultSelector.replace(/^\./,"")+'"></div>';r.length>0?r.append(n):e.after(n)}if(e.is(":input")){var a=function(){t.validate(e)};e.on("keyup paste",function(){e.data("noinput")||a()}),e.blur(function(){e.data("noblur")||a()}).focus(function(){e.data("nofocus")||t.setTips(e)})}e.data("__validate",1)}},all:function(e,n){t.isAll=!0,t.noResult=!!n;var a=e?r(e):r("[data-pattern]").not(".nopattern, .disabled"),i=!0;return a.each(function(){i=t.validate(r(this))&&i}),t.isAll=!1,t.noResult=!1,i},init:function(e,n){n=n||r(document);var a=n.find(e?e:":input[data-pattern]");a.each(function(){t.bind(r(this))})},extend:function(e,r){t[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(t,e)}}}}var r=t("jquery");return e.prototype.setOptions=function(t){return this.validator=r.extend(!0,this.validator,t),this},r.Validator=e,r.validator=(new e).validator,r.validator});
/*!/node_modules/@tencent/im-edu-pay/applyBoxItem.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/applyBoxItem.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[],coupon_price=0;"undefined"!=typeof couponListFilter&&couponListFilter.length>0&&(1==couponListFilter[0].discount_type?coupon_price=(defaultTerm?defaultTerm.passcard?passcard_price:defaultTerm.price:minPrice)-couponListFilter[0].rule.discount_price:3==couponListFilter[0].discount_type&&(coupon_price=couponListFilter[0].price));var couponInfo=opt.couponInfo||{source:source,balance:it.balance||{},passcard_price:1===passcard?passcard_price:0,price:defaultTerm?defaultTerm.price:minPrice,cur_term_id:cur_term_id,coupon_price:coupon_price,passcard:passcard},discountOpts=opt.discountOpts||opt.getDiscountOpts(),priceInfo=opt.priceInfo||opt.getPriceInfo(couponInfo,discountOpts),isFree=1===it.payId,isPay=2!==it.source&&1!==it.payId,showCoupon=isPay&&"undefined"!=typeof it.couponListFilter&&it.couponListFilter.length>0,showBalance=isPay&&it.balance&&it.balance.red_envelope_balance,showPayPrice=isPay&&(showCoupon||showBalance),courseClass=[];return showPayPrice||(courseClass.push("mod-course-banner__price"),isFree&&courseClass.push("mod-course-banner__price_free")),courseClass=courseClass.join(" "),_$out_.push('<div class="mod-course-banner_row clearfix"> <div class="mod-course-banner_col1">课程价格</div> <div class="mod-course-banner_col2"> <span class="js-mod-course-banner-price ',courseClass,'"> ',opt.formatOriPrice(priceInfo,couponInfo)," </span> </div></div>"),2!==source&&_$out_.push(' <div class="mod-course-banner_row clearfix js-jdpay-ctn" style="display:none;"> <div class="mod-course-banner_col1">分期</div> <div class="mod-course-banner_col2"> <div class="mod-course-staging-btn selected js-staging-btn">不分期</div> <div class="mod-course-staging-btn js-staging-btn" data-staging="jd"><i class="mod-jd-icon"></i>京东支付</div> </div> <p class="staging-tips js-staging-tips" style="display:none">旗下京东白条支持分期购买，登录后如无“白条”选项，请先<a href="https://help.jd.com/user/issue/197-257.html" target="_blank">激活</a></p> </div>'),showCoupon&&_$out_.push(' <div class="mod-course-banner_row js-coupon-menulist clearfix',2===source?" hide":"",'" style="z-index:1;"> ',opt.couponTpl(it)," </div>"),showBalance&&_$out_.push(' <div class="mod-course-banner_row clearfix"> <div class="mod-course-banner_col1">余额抵扣</div> <div class="mod-course-banner_col2"> <span class="js-mod-course-banner-balance"> ',opt.formatBalance(priceInfo,couponInfo)," </span> </div> </div>"),showPayPrice&&_$out_.push(' <div class="mod-course-banner_row clearfix"> <div class="mod-course-banner_col1">支付价格</div> <div class="mod-course-banner_col2"> <span class="js-mod-course-banner-pay mod-course-banner__price"> ',opt.formatCouponPrice(priceInfo,couponInfo)," </span> </div> </div>"),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-pay/coupon.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/coupon.tpl_tpl",function(require,exports,module){return function(it,opt){function getCouponStr(t){var o=parseInt(t.price/100),e=t.elem&&t.elem.is_suit_all,n="省"+o+"元：",i=t.limit&&t.limit.min_cost/100||null;return n+=e?"满"+i+"元减"+o+"元":o+"元优惠券",1==t.discount_type&&(n="限时优惠"),n}with(it=it||{}){var _$out_=[];if("undefined"!=typeof couponListFilter&&couponListFilter.length>0){var couponLength=couponListFilter.length;_$out_.push(' <div class="mod-course-banner_col1" style="padding-top: 7px;">优惠</div> <div class="mod-course-banner_col2"> <div class="diy-select-area diy-select-on" data-pattern="tag"> <a href="javascript:;" class="diy-select js-coupon-tag"><i class="text">',getCouponStr(couponListFilter[0]),'</i><span><b></b></span></a> <ul class="diy-optgroud js-coupon-list" style="overflow-y: auto;height: 81px;"> ');for(var couponIndex=0;couponLength>couponIndex;couponIndex++)_$out_.push(' <li class="diy-option',0==couponIndex?" selected":"",'" data-value="',couponIndex,'"><a href="javascript:;">',getCouponStr(couponListFilter[couponIndex]),"</a></li> ");_$out_.push(' <li class="diy-option" data-value="-1" style="border-bottom-width: 0px;"><a href="javascript:;">不使用优惠券</a></li> </ul></div> </div>')}return _$out_.join("")}}});
/*!@tencent/im-edu-pay/applyBox*/
;define("@tencent/im-edu-pay/applyBox",function(e,n,a){{var c={applyBoxItem:e("/node_modules/@tencent/im-edu-pay/applyBoxItem.tpl_tpl"),couponTpl:e("/node_modules/@tencent/im-edu-pay/coupon.tpl_tpl")},t=e("jquery");e("@tencent/im-edu-db/edu-db"),e("@tencent/im-util.bom/util.bom"),e("@tencent/im-edu-pay/errWordings")}e("@tencent/im-modal/modal"),e("@tencent/im-edu-render/edu-render");var r,i={MIN_PRICE:2,curClassName:"active"},o={rawData:null},s={$info:null,$balance:null,$oriPrice:null,$couponPrice:null,$acceptBtn:null},d={acceptBtn:function(e,n){var a=o.rawData;if(!a||2===a.source||1===a.payid)return"";var c,r=n.cur_term_id,i="去付款";c=0===r?e.realPasscardPrice:e.realPrice;var d=parseInt(t.bom.query("jdlimit")),p=15e4;if(isNaN(d)||(p=d),p>c)0===c&&(i="去报名"),t(".js-jdpay-ctn").hide(),t(".js-jd-protocol").hide();else{t(".js-jdpay-ctn").show();var l=s.$acceptBtn.data("usejd");l&&t(".js-jd-protocol").show()}return i},balance:function(e){var n=e.balance||0,a=['<span class="fontsize-22 js-mod-course-balance-num" data-value="'+n+'">',t.render.price(n,!0,!1,!0),"</span>"];return a.join("")},oriPrice:function(e,n){var a,c=n.passcard_price,r=n.price,i=n.cur_term_id;return a=[0!==r?"&yen;":"",'<span class="fontsize-22">'+t.render.price(0===i?c:r,!0)+"</span>"],a.join("")},couponPrice:function(e,n){{var a,c=n.passcard_price,r=n.price,i=n.cur_term_id,o=e.realPrice,s=e.realPasscardPrice;e.couponPrice}return a=1===n.passcard&&null===i&&c!==r?o===s?["&yen;",'<span class="fontsize-22">'+t.render.price(s,!0)+"</span>"]:["&yen;",'<span class="fontsize-22">'+t.render.price(o,!0)+" - </span>","&yen;",'<span class="fontsize-22">'+t.render.price(s,!0)+"</span>"]:["&yen;",'<span class="fontsize-22">'+t.render.price(0===i?s:o,!0,!1,!0)+"</span>"],a.join("")}},p={getPriceInfo:function(e,n){n=n||{};var a,c=e.passcard_price,t=e.price,r=e.coupon_price||0,o=t-r,s=c-r,d=e.cur_term_id;return a=e.balance&&e.balance.red_envelope_balance?e.balance.red_envelope_balance:0,0===t&&(r=o=s=0),n.discount&&(o&&(o=(o*n.discount).toFixed(2)),s&&(s=(s*n.discount).toFixed(2))),o=Math.max(o,i.MIN_PRICE),s=Math.max(s,i.MIN_PRICE),0===d?(a=Math.min(a,s),s-=a):(a=Math.min(a,o),o-=a),{couponPrice:r,realPrice:o,realPasscardPrice:s,curPrice:0===d?s:o,balance:a}},initElement:function(){s.$info=r.find(".js-mod-course-info"),s.$balance=r.find(".js-mod-course-banner-balance"),s.$oriPrice=r.find(".js-mod-course-banner-price"),s.$couponPrice=r.find(".js-mod-course-banner-pay"),s.$acceptBtn=r.find(".modal-accept"),s.$stagingBtn=r.find(".js-staging-btn")},bindEvent:function(){s.$stagingBtn.click(function(){r.find(".js-staging-btn.selected").removeClass("selected");var e=r.find(".js-staging-tips"),n=r.find(".js-jd-protocol");t(this).addClass("selected"),"jd"===t(this).data("staging")?(s.$acceptBtn.data("usejd",!0),e.show(),n.show()):(s.$acceptBtn.data("usejd",!1),e.hide(),n.hide())})},updatePriceInfo:function(e,n){var a,c,t=p.getPriceInfo(e,n),r=s.$acceptBtn;for(var i in d)d.hasOwnProperty(i)&&(c=d[i](t,e),a="$"+i,c&&s[a].html(c));r&&r.length&&0===t.curPrice?r.data("useBalance",!0):r.data("useBalance",!1)},updateDialogInfo:function(e,n){var a,t=p.getPriceInfo(e,n),r=s.$acceptBtn,i=o.rawData;i&&2!==i.source&&1!==i.payid&&(i.payId="undefined"!=typeof i.payid?i.payid:i.course_payid,s.$info.html(c.applyBoxItem(i,{couponInfo:e,discountOpts:n,priceInfo:t,formatCouponPrice:d.couponPrice,formatBalance:d.balance,formatOriPrice:d.oriPrice,couponTpl:c.couponTpl})),a=d.acceptBtn(t,e),r.html(a),r&&r.length&&0===t.curPrice?r.data("useBalance",!0):r.data("useBalance",!1),p.initElement(),p.bindEvent())},init:function(e,n){r=e,o.rawData=n,p.initElement(),p.bindEvent()}};a.exports={init:p.init,getPriceInfo:p.getPriceInfo,updatePriceInfo:p.updatePriceInfo,updateDialogInfo:p.updateDialogInfo,formatOriPrice:d.oriPrice,formatBalance:d.balance,formatCouponPrice:d.couponPrice,formatAcceptBtn:d.acceptBtn}});
/*!@tencent/im-edu-pay/address/util*/
;define("@tencent/im-edu-pay/address/util",function(e,r){var s=e("jquery"),d="has-error";r.showError=function(e,r){e=s(e).closest(".form-group"),e.find("input,textarea").addClass(d);var o=e.find(".form-field-help").show();o.length?o.html(r):e.append('<div class="form-field-help">'+r+"</div>")},r.hideError=function(e){e=s(e).closest(".form-group"),e.find("input,textarea").removeClass(d),e.find(".form-field-help").hide()},r.addErrorClass=function(e){e=s(e),e.is(":disabled")||e.addClass(d)},r.removeErrorClass=function(e){s(e).removeClass(d)}});
/*!@tencent/im-edu-pay/address/data*/
;define("@tencent/im-edu-pay/address/data",function(e,d,n){n.exports={"北京市":{"市辖区":["东城区","西城区","朝阳区","丰台区","石景山区","海淀区","门头沟区","房山区","通州区","顺义区","昌平区","大兴区","怀柔区","平谷区"],"县":["密云县","延庆县"]},"天津市":{"市辖区":["和平区","河东区","河西区","南开区","河北区","红桥区","东丽区","西青区","津南区","北辰区","武清区","宝坻区","滨海新区","宁河区","静海区"],"县":["蓟县"]},"河北省":{"石家庄市":["市辖区","长安区","桥西区","新华区","井陉矿区","裕华区","藁城区","鹿泉区","栾城区","井陉县","正定县","行唐县","灵寿县","高邑县","深泽县","赞皇县","无极县","平山县","元氏县","赵县","晋州市","新乐市"],"唐山市":["市辖区","路南区","路北区","古冶区","开平区","丰南区","丰润区","曹妃甸区","滦县","滦南县","乐亭县","迁西县","玉田县","遵化市","迁安市"],"秦皇岛市":["市辖区","海港区","山海关区","北戴河区","抚宁区","青龙满族自治县","昌黎县","卢龙县"],"邯郸市":["市辖区","邯山区","丛台区","复兴区","峰峰矿区","邯郸县","临漳县","成安县","大名县","涉县","磁县","肥乡县","永年县","邱县","鸡泽县","广平县","馆陶县","魏县","曲周县","武安市"],"邢台市":["市辖区","桥东区","桥西区","邢台县","临城县","内丘县","柏乡县","隆尧县","任县","南和县","宁晋县","巨鹿县","新河县","广宗县","平乡县","威县","清河县","临西县","南宫市","沙河市"],"保定市":["市辖区","竞秀区","莲池区","满城区","清苑区","徐水区","涞水县","阜平县","定兴县","唐县","高阳县","容城县","涞源县","望都县","安新县","易县","曲阳县","蠡县","顺平县","博野县","雄县","涿州市","安国市","高碑店市"],"张家口市":["市辖区","桥东区","桥西区","宣化区","下花园区","宣化县","张北县","康保县","沽源县","尚义县","蔚县","阳原县","怀安县","万全县","怀来县","涿鹿县","赤城县","崇礼县"],"承德市":["市辖区","双桥区","双滦区","鹰手营子矿区","承德县","兴隆县","平泉县","滦平县","隆化县","丰宁满族自治县","宽城满族自治县","围场满族蒙古族自治县"],"沧州市":["市辖区","新华区","运河区","沧县","青县","东光县","海兴县","盐山县","肃宁县","南皮县","吴桥县","献县","孟村回族自治县","泊头市","任丘市","黄骅市","河间市"],"廊坊市":["市辖区","安次区","广阳区","固安县","永清县","香河县","大城县","文安县","大厂回族自治县","霸州市","三河市"],"衡水市":["市辖区","桃城区","枣强县","武邑县","武强县","饶阳县","安平县","故城县","景县","阜城县","冀州市","深州市"],"省直辖县级行政区划":["定州市","辛集市"]},"山西省":{"太原市":["市辖区","小店区","迎泽区","杏花岭区","尖草坪区","万柏林区","晋源区","清徐县","阳曲县","娄烦县","古交市"],"大同市":["市辖区","城区","矿区","南郊区","新荣区","阳高县","天镇县","广灵县","灵丘县","浑源县","左云县","大同县"],"阳泉市":["市辖区","城区","矿区","郊区","平定县","盂县"],"长治市":["市辖区","城区","郊区","长治县","襄垣县","屯留县","平顺县","黎城县","壶关县","长子县","武乡县","沁县","沁源县","潞城市"],"晋城市":["市辖区","城区","沁水县","阳城县","陵川县","泽州县","高平市"],"朔州市":["市辖区","朔城区","平鲁区","山阴县","应县","右玉县","怀仁县"],"晋中市":["市辖区","榆次区","榆社县","左权县","和顺县","昔阳县","寿阳县","太谷县","祁县","平遥县","灵石县","介休市"],"运城市":["市辖区","盐湖区","临猗县","万荣县","闻喜县","稷山县","新绛县","绛县","垣曲县","夏县","平陆县","芮城县","永济市","河津市"],"忻州市":["市辖区","忻府区","定襄县","五台县","代县","繁峙县","宁武县","静乐县","神池县","五寨县","岢岚县","河曲县","保德县","偏关县","原平市"],"临汾市":["市辖区","尧都区","曲沃县","翼城县","襄汾县","洪洞县","古县","安泽县","浮山县","吉县","乡宁县","大宁县","隰县","永和县","蒲县","汾西县","侯马市","霍州市"],"吕梁市":["市辖区","离石区","文水县","交城县","兴县","临县","柳林县","石楼县","岚县","方山县","中阳县","交口县","孝义市","汾阳市"]},"内蒙古自治区":{"呼和浩特市":["市辖区","新城区","回民区","玉泉区","赛罕区","土默特左旗","托克托县","和林格尔县","清水河县","武川县"],"包头市":["市辖区","东河区","昆都仑区","青山区","石拐区","白云鄂博矿区","九原区","土默特右旗","固阳县","达尔罕茂明安联合旗"],"乌海市":["市辖区","海勃湾区","海南区","乌达区"],"赤峰市":["市辖区","红山区","元宝山区","松山区","阿鲁科尔沁旗","巴林左旗","巴林右旗","林西县","克什克腾旗","翁牛特旗","喀喇沁旗","宁城县","敖汉旗"],"通辽市":["市辖区","科尔沁区","科尔沁左翼中旗","科尔沁左翼后旗","开鲁县","库伦旗","奈曼旗","扎鲁特旗","霍林郭勒市"],"鄂尔多斯市":["市辖区","东胜区","达拉特旗","准格尔旗","鄂托克前旗","鄂托克旗","杭锦旗","乌审旗","伊金霍洛旗"],"呼伦贝尔市":["市辖区","海拉尔区","扎赉诺尔区","阿荣旗","莫力达瓦达斡尔族自治旗","鄂伦春自治旗","鄂温克族自治旗","陈巴尔虎旗","新巴尔虎左旗","新巴尔虎右旗","满洲里市","牙克石市","扎兰屯市","额尔古纳市","根河市"],"巴彦淖尔市":["市辖区","临河区","五原县","磴口县","乌拉特前旗","乌拉特中旗","乌拉特后旗","杭锦后旗"],"乌兰察布市":["市辖区","集宁区","卓资县","化德县","商都县","兴和县","凉城县","察哈尔右翼前旗","察哈尔右翼中旗","察哈尔右翼后旗","四子王旗","丰镇市"],"兴安盟":["乌兰浩特市","阿尔山市","科尔沁右翼前旗","科尔沁右翼中旗","扎赉特旗","突泉县"],"锡林郭勒盟":["二连浩特市","锡林浩特市","阿巴嘎旗","苏尼特左旗","苏尼特右旗","东乌珠穆沁旗","西乌珠穆沁旗","太仆寺旗","镶黄旗","正镶白旗","正蓝旗","多伦县"],"阿拉善盟":["阿拉善左旗","阿拉善右旗","额济纳旗"]},"辽宁省":{"沈阳市":["市辖区","和平区","沈河区","大东区","皇姑区","铁西区","苏家屯区","浑南区","沈北新区","于洪区","辽中县","康平县","法库县","新民市"],"大连市":["市辖区","中山区","西岗区","沙河口区","甘井子区","旅顺口区","金州区","长海县","瓦房店市","普兰店市","庄河市"],"鞍山市":["市辖区","铁东区","铁西区","立山区","千山区","台安县","岫岩满族自治县","海城市"],"抚顺市":["市辖区","新抚区","东洲区","望花区","顺城区","抚顺县","新宾满族自治县","清原满族自治县"],"本溪市":["市辖区","平山区","溪湖区","明山区","南芬区","本溪满族自治县","桓仁满族自治县"],"丹东市":["市辖区","元宝区","振兴区","振安区","宽甸满族自治县","东港市","凤城市"],"锦州市":["市辖区","古塔区","凌河区","太和区","黑山县","义县","凌海市","北镇市"],"营口市":["市辖区","站前区","西市区","鲅鱼圈区","老边区","盖州市","大石桥市"],"阜新市":["市辖区","海州区","新邱区","太平区","清河门区","细河区","阜新蒙古族自治县","彰武县"],"辽阳市":["市辖区","白塔区","文圣区","宏伟区","弓长岭区","太子河区","辽阳县","灯塔市"],"盘锦市":["市辖区","双台子区","兴隆台区","大洼县","盘山县"],"铁岭市":["市辖区","银州区","清河区","铁岭县","西丰县","昌图县","调兵山市","开原市"],"朝阳市":["市辖区","双塔区","龙城区","朝阳县","建平县","喀喇沁左翼蒙古族自治县","北票市","凌源市"],"葫芦岛市":["市辖区","连山区","龙港区","南票区","绥中县","建昌县","兴城市"]},"吉林省":{"长春市":["市辖区","南关区","宽城区","朝阳区","二道区","绿园区","双阳区","九台区","农安县","榆树市","德惠市"],"吉林市":["市辖区","昌邑区","龙潭区","船营区","丰满区","永吉县","蛟河市","桦甸市","舒兰市","磐石市"],"四平市":["市辖区","铁西区","铁东区","梨树县","伊通满族自治县","公主岭市","双辽市"],"辽源市":["市辖区","龙山区","西安区","东丰县","东辽县"],"通化市":["市辖区","东昌区","二道江区","通化县","辉南县","柳河县","梅河口市","集安市"],"白山市":["市辖区","浑江区","江源区","抚松县","靖宇县","长白朝鲜族自治县","临江市"],"松原市":["市辖区","宁江区","前郭尔罗斯蒙古族自治县","长岭县","乾安县","扶余市"],"白城市":["市辖区","洮北区","镇赉县","通榆县","洮南市","大安市"],"延边朝鲜族自治州":["延吉市","图们市","敦化市","珲春市","龙井市","和龙市","汪清县","安图县"]},"黑龙江省":{"哈尔滨市":["市辖区","道里区","南岗区","道外区","平房区","松北区","香坊区","呼兰区","阿城区","双城区","依兰县","方正县","宾县","巴彦县","木兰县","通河县","延寿县","尚志市","五常市"],"齐齐哈尔市":["市辖区","龙沙区","建华区","铁锋区","昂昂溪区","富拉尔基区","碾子山区","梅里斯达斡尔族区","龙江县","依安县","泰来县","甘南县","富裕县","克山县","克东县","拜泉县","讷河市"],"鸡西市":["市辖区","鸡冠区","恒山区","滴道区","梨树区","城子河区","麻山区","鸡东县","虎林市","密山市"],"鹤岗市":["市辖区","向阳区","工农区","南山区","兴安区","东山区","兴山区","萝北县","绥滨县"],"双鸭山市":["市辖区","尖山区","岭东区","四方台区","宝山区","集贤县","友谊县","宝清县","饶河县"],"大庆市":["市辖区","萨尔图区","龙凤区","让胡路区","红岗区","大同区","肇州县","肇源县","林甸县","杜尔伯特蒙古族自治县"],"伊春市":["市辖区","伊春区","南岔区","友好区","西林区","翠峦区","新青区","美溪区","金山屯区","五营区","乌马河区","汤旺河区","带岭区","乌伊岭区","红星区","上甘岭区","嘉荫县","铁力市"],"佳木斯市":["市辖区","向阳区","前进区","东风区","郊区","桦南县","桦川县","汤原县","抚远县","同江市","富锦市"],"七台河市":["市辖区","新兴区","桃山区","茄子河区","勃利县"],"牡丹江市":["市辖区","东安区","阳明区","爱民区","西安区","东宁县","林口县","绥芬河市","海林市","宁安市","穆棱市"],"黑河市":["市辖区","爱辉区","嫩江县","逊克县","孙吴县","北安市","五大连池市"],"绥化市":["市辖区","北林区","望奎县","兰西县","青冈县","庆安县","明水县","绥棱县","安达市","肇东市","海伦市"],"大兴安岭地区":["呼玛县","塔河县","漠河县"]},"上海市":{"市辖区":["黄浦区","徐汇区","长宁区","静安区","普陀区","闸北区","虹口区","杨浦区","闵行区","宝山区","嘉定区","浦东新区","金山区","松江区","青浦区","奉贤区"],"县":["崇明县"]},"江苏省":{"南京市":["市辖区","玄武区","秦淮区","建邺区","鼓楼区","浦口区","栖霞区","雨花台区","江宁区","六合区","溧水区","高淳区"],"无锡市":["市辖区","崇安区","南长区","北塘区","锡山区","惠山区","滨湖区","江阴市","宜兴市"],"徐州市":["市辖区","鼓楼区","云龙区","贾汪区","泉山区","铜山区","丰县","沛县","睢宁县","新沂市","邳州市"],"常州市":["市辖区","天宁区","钟楼区","新北区","武进区","金坛区","溧阳市"],"苏州市":["市辖区","虎丘区","吴中区","相城区","姑苏区","吴江区","常熟市","张家港市","昆山市","太仓市"],"南通市":["市辖区","崇川区","港闸区","通州区","海安县","如东县","启东市","如皋市","海门市"],"连云港市":["市辖区","连云区","海州区","赣榆区","东海县","灌云县","灌南县"],"淮安市":["市辖区","清河区","淮安区","淮阴区","清浦区","涟水县","洪泽县","盱眙县","金湖县"],"盐城市":["市辖区","亭湖区","盐都区","大丰区","响水县","滨海县","阜宁县","射阳县","建湖县","东台市"],"扬州市":["市辖区","广陵区","邗江区","江都区","宝应县","仪征市","高邮市"],"镇江市":["市辖区","京口区","润州区","丹徒区","丹阳市","扬中市","句容市"],"泰州市":["市辖区","海陵区","高港区","姜堰区","兴化市","靖江市","泰兴市"],"宿迁市":["市辖区","宿城区","宿豫区","沭阳县","泗阳县","泗洪县"]},"浙江省":{"杭州市":["市辖区","上城区","下城区","江干区","拱墅区","西湖区","滨江区","萧山区","余杭区","富阳区","桐庐县","淳安县","建德市","临安市"],"宁波市":["市辖区","海曙区","江东区","江北区","北仑区","镇海区","鄞州区","象山县","宁海县","余姚市","慈溪市","奉化市"],"温州市":["市辖区","鹿城区","龙湾区","瓯海区","洞头区","永嘉县","平阳县","苍南县","文成县","泰顺县","瑞安市","乐清市"],"嘉兴市":["市辖区","南湖区","秀洲区","嘉善县","海盐县","海宁市","平湖市","桐乡市"],"湖州市":["市辖区","吴兴区","南浔区","德清县","长兴县","安吉县"],"绍兴市":["市辖区","越城区","柯桥区","上虞区","新昌县","诸暨市","嵊州市"],"金华市":["市辖区","婺城区","金东区","武义县","浦江县","磐安县","兰溪市","义乌市","东阳市","永康市"],"衢州市":["市辖区","柯城区","衢江区","常山县","开化县","龙游县","江山市"],"舟山市":["市辖区","定海区","普陀区","岱山县","嵊泗县"],"台州市":["市辖区","椒江区","黄岩区","路桥区","玉环县","三门县","天台县","仙居县","温岭市","临海市"],"丽水市":["市辖区","莲都区","青田县","缙云县","遂昌县","松阳县","云和县","庆元县","景宁畲族自治县","龙泉市"]},"安徽省":{"合肥市":["市辖区","瑶海区","庐阳区","蜀山区","包河区","长丰县","肥东县","肥西县","庐江县","巢湖市"],"芜湖市":["市辖区","镜湖区","弋江区","鸠江区","三山区","芜湖县","繁昌县","南陵县","无为县"],"蚌埠市":["市辖区","龙子湖区","蚌山区","禹会区","淮上区","怀远县","五河县","固镇县"],"淮南市":["市辖区","大通区","田家庵区","谢家集区","八公山区","潘集区","凤台县"],"马鞍山市":["市辖区","花山区","雨山区","博望区","当涂县","含山县","和县"],"淮北市":["市辖区","杜集区","相山区","烈山区","濉溪县"],"铜陵市":["市辖区","铜官山区","狮子山区","郊区","铜陵县"],"安庆市":["市辖区","迎江区","大观区","宜秀区","怀宁县","枞阳县","潜山县","太湖县","宿松县","望江县","岳西县","桐城市"],"黄山市":["市辖区","屯溪区","黄山区","徽州区","歙县","休宁县","黟县","祁门县"],"滁州市":["市辖区","琅琊区","南谯区","来安县","全椒县","定远县","凤阳县","天长市","明光市"],"阜阳市":["市辖区","颍州区","颍东区","颍泉区","临泉县","太和县","阜南县","颍上县","界首市"],"宿州市":["市辖区","埇桥区","砀山县","萧县","灵璧县","泗县"],"六安市":["市辖区","金安区","裕安区","寿县","霍邱县","舒城县","金寨县","霍山县"],"亳州市":["市辖区","谯城区","涡阳县","蒙城县","利辛县"],"池州市":["市辖区","贵池区","东至县","石台县","青阳县"],"宣城市":["市辖区","宣州区","郎溪县","广德县","泾县","绩溪县","旌德县","宁国市"]},"福建省":{"福州市":["市辖区","鼓楼区","台江区","仓山区","马尾区","晋安区","闽侯县","连江县","罗源县","闽清县","永泰县","平潭县","福清市","长乐市"],"厦门市":["市辖区","思明区","海沧区","湖里区","集美区","同安区","翔安区"],"莆田市":["市辖区","城厢区","涵江区","荔城区","秀屿区","仙游县"],"三明市":["市辖区","梅列区","三元区","明溪县","清流县","宁化县","大田县","尤溪县","沙县","将乐县","泰宁县","建宁县","永安市"],"泉州市":["市辖区","鲤城区","丰泽区","洛江区","泉港区","惠安县","安溪县","永春县","德化县","金门县","石狮市","晋江市","南安市"],"漳州市":["市辖区","芗城区","龙文区","云霄县","漳浦县","诏安县","长泰县","东山县","南靖县","平和县","华安县","龙海市"],"南平市":["市辖区","延平区","建阳区","顺昌县","浦城县","光泽县","松溪县","政和县","邵武市","武夷山市","建瓯市"],"龙岩市":["市辖区","新罗区","永定区","长汀县","上杭县","武平县","连城县","漳平市"],"宁德市":["市辖区","蕉城区","霞浦县","古田县","屏南县","寿宁县","周宁县","柘荣县","福安市","福鼎市"]},"江西省":{"南昌市":["市辖区","东湖区","西湖区","青云谱区","湾里区","青山湖区","新建区","南昌县","安义县","进贤县"],"景德镇市":["市辖区","昌江区","珠山区","浮梁县","乐平市"],"萍乡市":["市辖区","安源区","湘东区","莲花县","上栗县","芦溪县"],"九江市":["市辖区","庐山区","浔阳区","九江县","武宁县","修水县","永修县","德安县","星子县","都昌县","湖口县","彭泽县","瑞昌市","共青城市"],"新余市":["市辖区","渝水区","分宜县"],"鹰潭市":["市辖区","月湖区","余江县","贵溪市"],"赣州市":["市辖区","章贡区","南康区","赣县","信丰县","大余县","上犹县","崇义县","安远县","龙南县","定南县","全南县","宁都县","于都县","兴国县","会昌县","寻乌县","石城县","瑞金市"],"吉安市":["市辖区","吉州区","青原区","吉安县","吉水县","峡江县","新干县","永丰县","泰和县","遂川县","万安县","安福县","永新县","井冈山市"],"宜春市":["市辖区","袁州区","奉新县","万载县","上高县","宜丰县","靖安县","铜鼓县","丰城市","樟树市","高安市"],"抚州市":["市辖区","临川区","南城县","黎川县","南丰县","崇仁县","乐安县","宜黄县","金溪县","资溪县","东乡县","广昌县"],"上饶市":["市辖区","信州区","广丰区","上饶县","玉山县","铅山县","横峰县","弋阳县","余干县","鄱阳县","万年县","婺源县","德兴市"]},"山东省":{"济南市":["市辖区","历下区","市中区","槐荫区","天桥区","历城区","长清区","平阴县","济阳县","商河县","章丘市"],"青岛市":["市辖区","市南区","市北区","黄岛区","崂山区","李沧区","城阳区","胶州市","即墨市","平度市","莱西市"],"淄博市":["市辖区","淄川区","张店区","博山区","临淄区","周村区","桓台县","高青县","沂源县"],"枣庄市":["市辖区","市中区","薛城区","峄城区","台儿庄区","山亭区","滕州市"],"东营市":["市辖区","东营区","河口区","垦利县","利津县","广饶县"],"烟台市":["市辖区","芝罘区","福山区","牟平区","莱山区","长岛县","龙口市","莱阳市","莱州市","蓬莱市","招远市","栖霞市","海阳市"],"潍坊市":["市辖区","潍城区","寒亭区","坊子区","奎文区","临朐县","昌乐县","青州市","诸城市","寿光市","安丘市","高密市","昌邑市"],"济宁市":["市辖区","任城区","兖州区","微山县","鱼台县","金乡县","嘉祥县","汶上县","泗水县","梁山县","曲阜市","邹城市"],"泰安市":["市辖区","泰山区","岱岳区","宁阳县","东平县","新泰市","肥城市"],"威海市":["市辖区","环翠区","文登区","荣成市","乳山市"],"日照市":["市辖区","东港区","岚山区","五莲县","莒县"],"莱芜市":["市辖区","莱城区","钢城区"],"临沂市":["市辖区","兰山区","罗庄区","河东区","沂南县","郯城县","沂水县","兰陵县","费县","平邑县","莒南县","蒙阴县","临沭县"],"德州市":["市辖区","德城区","陵城区","宁津县","庆云县","临邑县","齐河县","平原县","夏津县","武城县","乐陵市","禹城市"],"聊城市":["市辖区","东昌府区","阳谷县","莘县","茌平县","东阿县","冠县","高唐县","临清市"],"滨州市":["市辖区","滨城区","沾化区","惠民县","阳信县","无棣县","博兴县","邹平县"],"菏泽市":["市辖区","牡丹区","曹县","单县","成武县","巨野县","郓城县","鄄城县","定陶县","东明县"]},"河南省":{"郑州市":["市辖区","中原区","二七区","管城回族区","金水区","上街区","惠济区","中牟县","巩义市","荥阳市","新密市","新郑市","登封市"],"开封市":["市辖区","龙亭区","顺河回族区","鼓楼区","禹王台区","金明区","祥符区","杞县","通许县","尉氏县","兰考县"],"洛阳市":["市辖区","老城区","西工区","瀍河回族区","涧西区","吉利区","洛龙区","孟津县","新安县","栾川县","嵩县","汝阳县","宜阳县","洛宁县","伊川县","偃师市"],"平顶山市":["市辖区","新华区","卫东区","石龙区","湛河区","宝丰县","叶县","鲁山县","郏县","舞钢市","汝州市"],"安阳市":["市辖区","文峰区","北关区","殷都区","龙安区","安阳县","汤阴县","滑县","内黄县","林州市"],"鹤壁市":["市辖区","鹤山区","山城区","淇滨区","浚县","淇县"],"新乡市":["市辖区","红旗区","卫滨区","凤泉区","牧野区","新乡县","获嘉县","原阳县","延津县","封丘县","长垣县","卫辉市","辉县市"],"焦作市":["市辖区","解放区","中站区","马村区","山阳区","修武县","博爱县","武陟县","温县","沁阳市","孟州市"],"濮阳市":["市辖区","华龙区","清丰县","南乐县","范县","台前县","濮阳县"],"许昌市":["市辖区","魏都区","许昌县","鄢陵县","襄城县","禹州市","长葛市"],"漯河市":["市辖区","源汇区","郾城区","召陵区","舞阳县","临颍县"],"三门峡市":["市辖区","湖滨区","渑池县","陕县","卢氏县","义马市","灵宝市"],"南阳市":["市辖区","宛城区","卧龙区","南召县","方城县","西峡县","镇平县","内乡县","淅川县","社旗县","唐河县","新野县","桐柏县","邓州市"],"商丘市":["市辖区","梁园区","睢阳区","民权县","睢县","宁陵县","柘城县","虞城县","夏邑县","永城市"],"信阳市":["市辖区","浉河区","平桥区","罗山县","光山县","新县","商城县","固始县","潢川县","淮滨县","息县"],"周口市":["市辖区","川汇区","扶沟县","西华县","商水县","沈丘县","郸城县","淮阳县","太康县","鹿邑县","项城市"],"驻马店市":["市辖区","驿城区","西平县","上蔡县","平舆县","正阳县","确山县","泌阳县","汝南县","遂平县","新蔡县"],"省直辖县级行政区划":["济源市"]},"湖北省":{"武汉市":["市辖区","江岸区","江汉区","硚口区","汉阳区","武昌区","青山区","洪山区","东西湖区","汉南区","蔡甸区","江夏区","黄陂区","新洲区"],"黄石市":["市辖区","黄石港区","西塞山区","下陆区","铁山区","阳新县","大冶市"],"十堰市":["市辖区","茅箭区","张湾区","郧阳区","郧西县","竹山县","竹溪县","房县","丹江口市"],"宜昌市":["市辖区","西陵区","伍家岗区","点军区","猇亭区","夷陵区","远安县","兴山县","秭归县","长阳土家族自治县","五峰土家族自治县","宜都市","当阳市","枝江市"],"襄阳市":["市辖区","襄城区","樊城区","襄州区","南漳县","谷城县","保康县","老河口市","枣阳市","宜城市"],"鄂州市":["市辖区","梁子湖区","华容区","鄂城区"],"荆门市":["市辖区","东宝区","掇刀区","京山县","沙洋县","钟祥市"],"孝感市":["市辖区","孝南区","孝昌县","大悟县","云梦县","应城市","安陆市","汉川市"],"荆州市":["市辖区","沙市区","荆州区","公安县","监利县","江陵县","石首市","洪湖市","松滋市"],"黄冈市":["市辖区","黄州区","团风县","红安县","罗田县","英山县","浠水县","蕲春县","黄梅县","麻城市","武穴市"],"咸宁市":["市辖区","咸安区","嘉鱼县","通城县","崇阳县","通山县","赤壁市"],"随州市":["市辖区","曾都区","随县","广水市"],"恩施土家族苗族自治州":["恩施市","利川市","建始县","巴东县","宣恩县","咸丰县","来凤县","鹤峰县"],"省直辖县级行政区划":["仙桃市","潜江市","天门市","神农架林区"]},"湖南省":{"长沙市":["市辖区","芙蓉区","天心区","岳麓区","开福区","雨花区","望城区","长沙县","宁乡县","浏阳市"],"株洲市":["市辖区","荷塘区","芦淞区","石峰区","天元区","株洲县","攸县","茶陵县","炎陵县","醴陵市"],"湘潭市":["市辖区","雨湖区","岳塘区","湘潭县","湘乡市","韶山市"],"衡阳市":["市辖区","珠晖区","雁峰区","石鼓区","蒸湘区","南岳区","衡阳县","衡南县","衡山县","衡东县","祁东县","耒阳市","常宁市"],"邵阳市":["市辖区","双清区","大祥区","北塔区","邵东县","新邵县","邵阳县","隆回县","洞口县","绥宁县","新宁县","城步苗族自治县","武冈市"],"岳阳市":["市辖区","岳阳楼区","云溪区","君山区","岳阳县","华容县","湘阴县","平江县","汨罗市","临湘市"],"常德市":["市辖区","武陵区","鼎城区","安乡县","汉寿县","澧县","临澧县","桃源县","石门县","津市市"],"张家界市":["市辖区","永定区","武陵源区","慈利县","桑植县"],"益阳市":["市辖区","资阳区","赫山区","南县","桃江县","安化县","沅江市"],"郴州市":["市辖区","北湖区","苏仙区","桂阳县","宜章县","永兴县","嘉禾县","临武县","汝城县","桂东县","安仁县","资兴市"],"永州市":["市辖区","零陵区","冷水滩区","祁阳县","东安县","双牌县","道县","江永县","宁远县","蓝山县","新田县","江华瑶族自治县"],"怀化市":["市辖区","鹤城区","中方县","沅陵县","辰溪县","溆浦县","会同县","麻阳苗族自治县","新晃侗族自治县","芷江侗族自治县","靖州苗族侗族自治县","通道侗族自治县","洪江市"],"娄底市":["市辖区","娄星区","双峰县","新化县","冷水江市","涟源市"],"湘西土家族苗族自治州":["吉首市","泸溪县","凤凰县","花垣县","保靖县","古丈县","永顺县","龙山县"]},"广东省":{"广州市":["市辖区","荔湾区","越秀区","海珠区","天河区","白云区","黄埔区","番禺区","花都区","南沙区","从化区","增城区"],"韶关市":["市辖区","武江区","浈江区","曲江区","始兴县","仁化县","翁源县","乳源瑶族自治县","新丰县","乐昌市","南雄市"],"深圳市":["市辖区","罗湖区","福田区","南山区","宝安区","龙岗区","盐田区"],"珠海市":["市辖区","香洲区","斗门区","金湾区"],"汕头市":["市辖区","龙湖区","金平区","濠江区","潮阳区","潮南区","澄海区","南澳县"],"佛山市":["市辖区","禅城区","南海区","顺德区","三水区","高明区"],"江门市":["市辖区","蓬江区","江海区","新会区","台山市","开平市","鹤山市","恩平市"],"湛江市":["市辖区","赤坎区","霞山区","坡头区","麻章区","遂溪县","徐闻县","廉江市","雷州市","吴川市"],"茂名市":["市辖区","茂南区","电白区","高州市","化州市","信宜市"],"肇庆市":["市辖区","端州区","鼎湖区","高要区","广宁县","怀集县","封开县","德庆县","四会市"],"惠州市":["市辖区","惠城区","惠阳区","博罗县","惠东县","龙门县"],"梅州市":["市辖区","梅江区","梅县区","大埔县","丰顺县","五华县","平远县","蕉岭县","兴宁市"],"汕尾市":["市辖区","城区","海丰县","陆河县","陆丰市"],"河源市":["市辖区","源城区","紫金县","龙川县","连平县","和平县","东源县"],"阳江市":["市辖区","江城区","阳东区","阳西县","阳春市"],"清远市":["市辖区","清城区","清新区","佛冈县","阳山县","连山壮族瑶族自治县","连南瑶族自治县","英德市","连州市"],"东莞市":["东莞市"],"中山市":["中山市"],"潮州市":["市辖区","湘桥区","潮安区","饶平县"],"揭阳市":["市辖区","榕城区","揭东区","揭西县","惠来县","普宁市"],"云浮市":["市辖区","云城区","云安区","新兴县","郁南县","罗定市"]},"广西壮族自治区":{"南宁市":["市辖区","兴宁区","青秀区","江南区","西乡塘区","良庆区","邕宁区","武鸣区","隆安县","马山县","上林县","宾阳县","横县"],"柳州市":["市辖区","城中区","鱼峰区","柳南区","柳北区","柳江县","柳城县","鹿寨县","融安县","融水苗族自治县","三江侗族自治县"],"桂林市":["市辖区","秀峰区","叠彩区","象山区","七星区","雁山区","临桂区","阳朔县","灵川县","全州县","兴安县","永福县","灌阳县","龙胜各族自治县","资源县","平乐县","荔浦县","恭城瑶族自治县"],"梧州市":["市辖区","万秀区","长洲区","龙圩区","苍梧县","藤县","蒙山县","岑溪市"],"北海市":["市辖区","海城区","银海区","铁山港区","合浦县"],"防城港市":["市辖区","港口区","防城区","上思县","东兴市"],"钦州市":["市辖区","钦南区","钦北区","灵山县","浦北县"],"贵港市":["市辖区","港北区","港南区","覃塘区","平南县","桂平市"],"玉林市":["市辖区","玉州区","福绵区","容县","陆川县","博白县","兴业县","北流市"],"百色市":["市辖区","右江区","田阳县","田东县","平果县","德保县","那坡县","凌云县","乐业县","田林县","西林县","隆林各族自治县","靖西市"],"贺州市":["市辖区","八步区","昭平县","钟山县","富川瑶族自治县"],"河池市":["市辖区","金城江区","南丹县","天峨县","凤山县","东兰县","罗城仫佬族自治县","环江毛南族自治县","巴马瑶族自治县","都安瑶族自治县","大化瑶族自治县","宜州市"],"来宾市":["市辖区","兴宾区","忻城县","象州县","武宣县","金秀瑶族自治县","合山市"],"崇左市":["市辖区","江州区","扶绥县","宁明县","龙州县","大新县","天等县","凭祥市"]},"海南省":{"海口市":["市辖区","秀英区","龙华区","琼山区","美兰区"],"三亚市":["市辖区","海棠区","吉阳区","天涯区","崖州区"],"三沙市":["西沙群岛","南沙群岛","中沙群岛的岛礁及其海域"],"省直辖县级行政区划":["五指山市","琼海市","儋州市","文昌市","万宁市","东方市","定安县","屯昌县","澄迈县","临高县","白沙黎族自治县","昌江黎族自治县","乐东黎族自治县","陵水黎族自治县","保亭黎族苗族自治县","琼中黎族苗族自治县"]},"重庆市":{"市辖区":["万州区","涪陵区","渝中区","大渡口区","江北区","沙坪坝区","九龙坡区","南岸区","北碚区","綦江区","大足区","渝北区","巴南区","黔江区","长寿区","江津区","合川区","永川区","南川区","璧山区","铜梁区","潼南区","荣昌区"],"县":["梁平县","城口县","丰都县","垫江县","武隆县","忠县","开县","云阳县","奉节县","巫山县","巫溪县","石柱土家族自治县","秀山土家族苗族自治县","酉阳土家族苗族自治县","彭水苗族土家族自治县"]},"四川省":{"成都市":["市辖区","锦江区","青羊区","金牛区","武侯区","成华区","龙泉驿区","青白江区","新都区","温江区","金堂县","双流县","郫县","大邑县","蒲江县","新津县","都江堰市","彭州市","邛崃市","崇州市"],"自贡市":["市辖区","自流井区","贡井区","大安区","沿滩区","荣县","富顺县"],"攀枝花市":["市辖区","东区","西区","仁和区","米易县","盐边县"],"泸州市":["市辖区","江阳区","纳溪区","龙马潭区","泸县","合江县","叙永县","古蔺县"],"德阳市":["市辖区","旌阳区","中江县","罗江县","广汉市","什邡市","绵竹市"],"绵阳市":["市辖区","涪城区","游仙区","三台县","盐亭县","安县","梓潼县","北川羌族自治县","平武县","江油市"],"广元市":["市辖区","利州区","昭化区","朝天区","旺苍县","青川县","剑阁县","苍溪县"],"遂宁市":["市辖区","船山区","安居区","蓬溪县","射洪县","大英县"],"内江市":["市辖区","市中区","东兴区","威远县","资中县","隆昌县"],"乐山市":["市辖区","市中区","沙湾区","五通桥区","金口河区","犍为县","井研县","夹江县","沐川县","峨边彝族自治县","马边彝族自治县","峨眉山市"],"南充市":["市辖区","顺庆区","高坪区","嘉陵区","南部县","营山县","蓬安县","仪陇县","西充县","阆中市"],"眉山市":["市辖区","东坡区","彭山区","仁寿县","洪雅县","丹棱县","青神县"],"宜宾市":["市辖区","翠屏区","南溪区","宜宾县","江安县","长宁县","高县","珙县","筠连县","兴文县","屏山县"],"广安市":["市辖区","广安区","前锋区","岳池县","武胜县","邻水县","华蓥市"],"达州市":["市辖区","通川区","达川区","宣汉县","开江县","大竹县","渠县","万源市"],"雅安市":["市辖区","雨城区","名山区","荥经县","汉源县","石棉县","天全县","芦山县","宝兴县"],"巴中市":["市辖区","巴州区","恩阳区","通江县","南江县","平昌县"],"资阳市":["市辖区","雁江区","安岳县","乐至县","简阳市"],"阿坝藏族羌族自治州":["汶川县","理县","茂县","松潘县","九寨沟县","金川县","小金县","黑水县","马尔康县","壤塘县","阿坝县","若尔盖县","红原县"],"甘孜藏族自治州":["康定市","泸定县","丹巴县","九龙县","雅江县","道孚县","炉霍县","甘孜县","新龙县","德格县","白玉县","石渠县","色达县","理塘县","巴塘县","乡城县","稻城县","得荣县"],"凉山彝族自治州":["西昌市","木里藏族自治县","盐源县","德昌县","会理县","会东县","宁南县","普格县","布拖县","金阳县","昭觉县","喜德县","冕宁县","越西县","甘洛县","美姑县","雷波县"]},"贵州省":{"贵阳市":["市辖区","南明区","云岩区","花溪区","乌当区","白云区","观山湖区","开阳县","息烽县","修文县","清镇市"],"六盘水市":["钟山区","六枝特区","水城县","盘县"],"遵义市":["市辖区","红花岗区","汇川区","遵义县","桐梓县","绥阳县","正安县","道真仡佬族苗族自治县","务川仡佬族苗族自治县","凤冈县","湄潭县","余庆县","习水县","赤水市","仁怀市"],"安顺市":["市辖区","西秀区","平坝区","普定县","镇宁布依族苗族自治县","关岭布依族苗族自治县","紫云苗族布依族自治县"],"毕节市":["市辖区","七星关区","大方县","黔西县","金沙县","织金县","纳雍县","威宁彝族回族苗族自治县","赫章县"],"铜仁市":["市辖区","碧江区","万山区","江口县","玉屏侗族自治县","石阡县","思南县","印江土家族苗族自治县","德江县","沿河土家族自治县","松桃苗族自治县"],"黔西南布依族苗族自治州":["兴义市","兴仁县","普安县","晴隆县","贞丰县","望谟县","册亨县","安龙县"],"黔东南苗族侗族自治州":["凯里市","黄平县","施秉县","三穗县","镇远县","岑巩县","天柱县","锦屏县","剑河县","台江县","黎平县","榕江县","从江县","雷山县","麻江县","丹寨县"],"黔南布依族苗族自治州":["都匀市","福泉市","荔波县","贵定县","瓮安县","独山县","平塘县","罗甸县","长顺县","龙里县","惠水县","三都水族自治县"]},"云南省":{"昆明市":["市辖区","五华区","盘龙区","官渡区","西山区","东川区","呈贡区","晋宁县","富民县","宜良县","石林彝族自治县","嵩明县","禄劝彝族苗族自治县","寻甸回族彝族自治县","安宁市"],"曲靖市":["市辖区","麒麟区","马龙县","陆良县","师宗县","罗平县","富源县","会泽县","沾益县","宣威市"],"玉溪市":["市辖区","红塔区","江川县","澄江县","通海县","华宁县","易门县","峨山彝族自治县","新平彝族傣族自治县","元江哈尼族彝族傣族自治县"],"保山市":["市辖区","隆阳区","施甸县","龙陵县","昌宁县","腾冲市"],"昭通市":["市辖区","昭阳区","鲁甸县","巧家县","盐津县","大关县","永善县","绥江县","镇雄县","彝良县","威信县","水富县"],"丽江市":["市辖区","古城区","玉龙纳西族自治县","永胜县","华坪县","宁蒗彝族自治县"],"普洱市":["市辖区","思茅区","宁洱哈尼族彝族自治县","墨江哈尼族自治县","景东彝族自治县","景谷傣族彝族自治县","镇沅彝族哈尼族拉祜族自治县","江城哈尼族彝族自治县","孟连傣族拉祜族佤族自治县","澜沧拉祜族自治县","西盟佤族自治县"],"临沧市":["市辖区","临翔区","凤庆县","云县","永德县","镇康县","双江拉祜族佤族布朗族傣族自治县","耿马傣族佤族自治县","沧源佤族自治县"],"楚雄彝族自治州":["楚雄市","双柏县","牟定县","南华县","姚安县","大姚县","永仁县","元谋县","武定县","禄丰县"],"红河哈尼族彝族自治州":["个旧市","开远市","蒙自市","弥勒市","屏边苗族自治县","建水县","石屏县","泸西县","元阳县","红河县","金平苗族瑶族傣族自治县","绿春县","河口瑶族自治县"],"文山壮族苗族自治州":["文山市","砚山县","西畴县","麻栗坡县","马关县","丘北县","广南县","富宁县"],"西双版纳傣族自治州":["景洪市","勐海县","勐腊县"],"大理白族自治州":["大理市","漾濞彝族自治县","祥云县","宾川县","弥渡县","南涧彝族自治县","巍山彝族回族自治县","永平县","云龙县","洱源县","剑川县","鹤庆县"],"德宏傣族景颇族自治州":["瑞丽市","芒市","梁河县","盈江县","陇川县"],"怒江傈僳族自治州":["泸水县","福贡县","贡山独龙族怒族自治县","兰坪白族普米族自治县"],"迪庆藏族自治州":["香格里拉市","德钦县","维西傈僳族自治县"]},"西藏自治区":{"拉萨市":["市辖区","城关区","林周县","当雄县","尼木县","曲水县","堆龙德庆县","达孜县","墨竹工卡县"],"日喀则市":["桑珠孜区","南木林县","江孜县","定日县","萨迦县","拉孜县","昂仁县","谢通门县","白朗县","仁布县","康马县","定结县","仲巴县","亚东县","吉隆县","聂拉木县","萨嘎县","岗巴县"],"昌都市":["卡若区","江达县","贡觉县","类乌齐县","丁青县","察雅县","八宿县","左贡县","芒康县","洛隆县","边坝县"],"林芝市":["巴宜区","工布江达县","米林县","墨脱县","波密县","察隅县","朗县"],"山南地区":["乃东县","扎囊县","贡嘎县","桑日县","琼结县","曲松县","措美县","洛扎县","加查县","隆子县","错那县","浪卡子县"],"那曲地区":["那曲县","嘉黎县","比如县","聂荣县","安多县","申扎县","索县","班戈县","巴青县","尼玛县","双湖县"],"阿里地区":["普兰县","札达县","噶尔县","日土县","革吉县","改则县","措勤县"]},"陕西省":{"西安市":["市辖区","新城区","碑林区","莲湖区","灞桥区","未央区","雁塔区","阎良区","临潼区","长安区","高陵区","蓝田县","周至县","户县"],"铜川市":["市辖区","王益区","印台区","耀州区","宜君县"],"宝鸡市":["市辖区","渭滨区","金台区","陈仓区","凤翔县","岐山县","扶风县","眉县","陇县","千阳县","麟游县","凤县","太白县"],"咸阳市":["市辖区","秦都区","杨陵区","渭城区","三原县","泾阳县","乾县","礼泉县","永寿县","彬县","长武县","旬邑县","淳化县","武功县","兴平市"],"渭南市":["市辖区","临渭区","华县","潼关县","大荔县","合阳县","澄城县","蒲城县","白水县","富平县","韩城市","华阴市"],"延安市":["市辖区","宝塔区","延长县","延川县","子长县","安塞县","志丹县","吴起县","甘泉县","富县","洛川县","宜川县","黄龙县","黄陵县"],"汉中市":["市辖区","汉台区","南郑县","城固县","洋县","西乡县","勉县","宁强县","略阳县","镇巴县","留坝县","佛坪县"],"榆林市":["市辖区","榆阳区","神木县","府谷县","横山县","靖边县","定边县","绥德县","米脂县","佳县","吴堡县","清涧县","子洲县"],"安康市":["市辖区","汉滨区","汉阴县","石泉县","宁陕县","紫阳县","岚皋县","平利县","镇坪县","旬阳县","白河县"],"商洛市":["市辖区","商州区","洛南县","丹凤县","商南县","山阳县","镇安县","柞水县"]},"甘肃省":{"兰州市":["市辖区","城关区","七里河区","西固区","安宁区","红古区","永登县","皋兰县","榆中县"],"嘉峪关市":["市辖区"],"金昌市":["市辖区","金川区","永昌县"],"白银市":["市辖区","白银区","平川区","靖远县","会宁县","景泰县"],"天水市":["市辖区","秦州区","麦积区","清水县","秦安县","甘谷县","武山县","张家川回族自治县"],"武威市":["市辖区","凉州区","民勤县","古浪县","天祝藏族自治县"],"张掖市":["市辖区","甘州区","肃南裕固族自治县","民乐县","临泽县","高台县","山丹县"],"平凉市":["市辖区","崆峒区","泾川县","灵台县","崇信县","华亭县","庄浪县","静宁县"],"酒泉市":["市辖区","肃州区","金塔县","瓜州县","肃北蒙古族自治县","阿克塞哈萨克族自治县","玉门市","敦煌市"],"庆阳市":["市辖区","西峰区","庆城县","环县","华池县","合水县","正宁县","宁县","镇原县"],"定西市":["市辖区","安定区","通渭县","陇西县","渭源县","临洮县","漳县","岷县"],"陇南市":["市辖区","武都区","成县","文县","宕昌县","康县","西和县","礼县","徽县","两当县"],"临夏回族自治州":["临夏市","临夏县","康乐县","永靖县","广河县","和政县","东乡族自治县","积石山保安族东乡族撒拉族自治县"],"甘南藏族自治州":["合作市","临潭县","卓尼县","舟曲县","迭部县","玛曲县","碌曲县","夏河县"]},"青海省":{"西宁市":["市辖区","城东区","城中区","城西区","城北区","大通回族土族自治县","湟中县","湟源县"],"海东市":["乐都区","平安区","民和回族土族自治县","互助土族自治县","化隆回族自治县","循化撒拉族自治县"],"海北藏族自治州":["门源回族自治县","祁连县","海晏县","刚察县"],"黄南藏族自治州":["同仁县","尖扎县","泽库县","河南蒙古族自治县"],"海南藏族自治州":["共和县","同德县","贵德县","兴海县","贵南县"],"果洛藏族自治州":["玛沁县","班玛县","甘德县","达日县","久治县","玛多县"],"玉树藏族自治州":["玉树市","杂多县","称多县","治多县","囊谦县","曲麻莱县"],"海西蒙古族藏族自治州":["格尔木市","德令哈市","乌兰县","都兰县","天峻县"]},"宁夏回族自治区":{"银川市":["市辖区","兴庆区","西夏区","金凤区","永宁县","贺兰县","灵武市"],"石嘴山市":["市辖区","大武口区","惠农区","平罗县"],"吴忠市":["市辖区","利通区","红寺堡区","盐池县","同心县","青铜峡市"],"固原市":["市辖区","原州区","西吉县","隆德县","泾源县","彭阳县"],"中卫市":["市辖区","沙坡头区","中宁县","海原县"]},"新疆维吾尔自治区":{"乌鲁木齐市":["市辖区","天山区","沙依巴克区","新市区","水磨沟区","头屯河区","达坂城区","米东区","乌鲁木齐县"],"克拉玛依市":["市辖区","独山子区","克拉玛依区","白碱滩区","乌尔禾区"],"吐鲁番市":["高昌区","鄯善县","托克逊县"],"哈密地区":["哈密市","巴里坤哈萨克自治县","伊吾县"],"昌吉回族自治州":["昌吉市","阜康市","呼图壁县","玛纳斯县","奇台县","吉木萨尔县","木垒哈萨克自治县"],"博尔塔拉蒙古自治州":["博乐市","阿拉山口市","精河县","温泉县"],"巴音郭楞蒙古自治州":["库尔勒市","轮台县","尉犁县","若羌县","且末县","焉耆回族自治县","和静县","和硕县","博湖县"],"阿克苏地区":["阿克苏市","温宿县","库车县","沙雅县","新和县","拜城县","乌什县","阿瓦提县","柯坪县"],"克孜勒苏柯尔克孜自治州":["阿图什市","阿克陶县","阿合奇县","乌恰县"],"喀什地区":["喀什市","疏附县","疏勒县","英吉沙县","泽普县","莎车县","叶城县","麦盖提县","岳普湖县","伽师县","巴楚县","塔什库尔干塔吉克自治县"],"和田地区":["和田市","和田县","墨玉县","皮山县","洛浦县","策勒县","于田县","民丰县"],"伊犁哈萨克自治州":["伊宁市","奎屯市","霍尔果斯市","伊宁县","察布查尔锡伯自治县","霍城县","巩留县","新源县","昭苏县","特克斯县","尼勒克县"],"塔城地区":["塔城市","乌苏市","额敏县","沙湾县","托里县","裕民县","和布克赛尔蒙古自治县"],"阿勒泰地区":["阿勒泰市","布尔津县","富蕴县","福海县","哈巴河县","青河县","吉木乃县"],"自治区直辖县级行政区划":["石河子市","阿拉尔市","图木舒克市","五家渠市"]},"台湾省":[],"香港特别行政区":[],"澳门特别行政区":[]}});
/*!@tencent/im-edu-pay/address/region*/
;define("@tencent/im-edu-pay/address/region",function(r,i,t){function e(r){if(!(this instanceof e))return new e(r);if(!r)throw new Error("argument container is required.");var i=this;r=i._container=n(r);var t,s,u=r.find("select"),h=i._province=u.first(),d=i._city=u.eq(1),v=i._district=u.eq(2),l=i._cache={},f=u.on("blur",function(){clearTimeout(f),f=setTimeout(function(){var r=document.activeElement;r!==h[0]&&r!==d[0]&&r!==v[0]&&i.getValue()},0)});i.clearErrors=function(){o.removeErrorClass(u),o.hideError(r)},i.showError=function(i){o.showError(r,i)},i.showProvinceError=function(){i.showError("不能为空"),o.addErrorClass(h),o.addErrorClass(d),o.addErrorClass(v)},i.showCityError=function(){i.showError("不能为空"),o.addErrorClass(d),o.addErrorClass(v)},i.showDistrictError=function(){i.showError("不能为空"),o.addErrorClass(v)};var E=function(i){o.removeErrorClass(i),o.hideError(r)};c(h,{name:"省",list:a}),h.on("change",function(){t=h.val(),c(d,{name:"市",list:a[t],value:l[t]}),d.trigger("change",""),E(h)}),d.on("change",function(){s=d.val(),l[t]=s;var r=a[t];c(v,{name:"区",list:r&&r[s],value:l[t+"/"+s]}),v.trigger("change",""),E(d)}),v.on("change",function(){l[t+"/"+s]=v.val(),E(v)}),h.trigger("change")}var n=r("jquery"),o=r("@tencent/im-edu-pay/address/util"),a=r("@tencent/im-edu-pay/address/data"),s=function(r){var i=[];for(var t in r)r.hasOwnProperty(t)&&i.push(t);return i},c=function(r,i){var t=i.name,e=i.list||[];if(t){n.isArray(e)||(e=s(e));for(var o=['<option value="">'+t+"</option>"],a=0,c=e.length;c>a;a++)t=e[a],o.push('<option value="'+t+'">'+t+"</option>");return r.prop("disabled",!e.length),r.html(o.join("")),r.val(i.value||""),r}},u=e.prototype;u.setValue=function(r){r=r||{},this._cache[r.province]=r.city,this._cache[r.province+"/"+r.city]=r.district,this._province.val(r.province).trigger("change")},u.getValue=function(){var r=this._province.val();if(!r)return void this.showProvinceError();this.clearErrors();var i={province:r,city:"",district:""};if(this._city.is(":disabled"))return i;var t=this._city.val();if(!t)return void this.showCityError();if(i.city=t,this._district.is(":disabled"))return i;var e=this._district.val();return i.district=e,e?i:void this.showDistrictError()},t.exports=e});
/*!@tencent/im-edu-pay/address/index*/
;define("@tencent/im-edu-pay/address/index",function(r,e,n){function o(r){("string"==typeof r||r instanceof i)&&(r={container:r});var e=i(r.container),n=e.find(".form-region-group"),o=new a(n),d=e.find("[name=receiver]"),u=e.find("[name=phone]"),s=e.find("[name=address]");d.val(r.receiver),u.val(r.phone),o.setValue(r),s.val(r.address);var v=function(){var r=d.val().trim();return r?(t.hideError(d),r):void t.showError(d,"不能为空")},c=function(){var r=u.val().trim();return r?/^1\d{10}$/.test(r)?(t.hideError(u),r):void t.showError(u,"格式错误"):void t.showError(u,"不能为空")},f=function(){var r=s.val().trim();return r?r.length>100?void t.showError(s,"文字超长"):(t.hideError(s),r):void t.showError(s,"不能为空")};d.on("blur input",v),u.on("blur input",c),s.on("blur input",f),e.on("focusin",function(r){t.removeErrorClass(r.target)}),this.getValue=function(){var r=v(),e=c(),n=o.getValue(),i=f();return r&&e&&n&&i?(n.receiver=r,n.phone=e,n.address=i,n):void 0}}var i=r("jquery"),t=r("@tencent/im-edu-pay/address/util"),a=r("@tencent/im-edu-pay/address/region");n.exports=o});
/*!@tencent/im-edu-datepicker/edu-datepicker*/
;define("@tencent/im-edu-datepicker/edu-datepicker",function(t){var e=t("jquery"),i=function(t,i){if(this.options=i,this.element=e(t),this.format=a.parseFormat(i.format||this.element.data("date-format")||"yyyy-mm-dd"),this.picker=e(a.template(i).replace(/{{dpCls}}/,i._dpCls||"")).appendTo(this.options._body||"body").on({click:e.proxy(this.click,this)}),this.picker.data("toggle",this.element),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),click:e.proxy(this.show,this)}):this.component?this.component.on("click",e.proxy(this.show,this)):this.element.on("click",e.proxy(this.show,this)),this.minViewMode=i.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=i.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=i.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=i.onRender,this.isUp=i.isUp,this.adjustUp=i.adjustUp,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};i.prototype={constructor:i,show:function(t){this.picker.show(),this.options._show&&this.options._show(this.element),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&!this.options._isStopProp&&(t.stopPropagation(),t.preventDefault()),!this.isInput;var i=this;e(document).on("mousedown",function(t){0===e(t.target).closest(".datepicker").length&&i.hide()}).on("navchange",function(){i.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){!this.options._not_hide&&this.picker.hide(),this.options._hide&&this.options._hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var t=a.formatDate(this.date,this.format);this.options._click&&this.options._click(this.date,this.element),this.isInput?this.element.prop("value",t):(this.component&&this.element.find("input").prop("value",t),this.element.data("date",t)),this.options._set&&this.options._set(this.date,this.element)},setValue:function(t){this.date="string"==typeof t?a.parseDate(t,this.format):new Date(t),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},getAdjustUp:function(t,i,s){var a=e(window),o=a.scrollTop();return t.top+i+s-o>a.height()},place:function(){var t=this.picker.outerHeight(),e=this.component?this.component.offset():this.element.offset(),i=this.height;this.adjustUp&&(this.isUp=this.getAdjustUp(e,i,t)),this.options._body?this.picker.css({top:this.isUp?-(t+i):0,left:0}):(this.isUp&&(i=-1*t),this.picker.css({top:e.top+i,left:e.left}))},update:function(t,e){if(t&&"[object Date]"===Object.prototype.toString.call(t))this.date=t;else if(e="function"==typeof this.options._defaultVal?new Date(this.options._defaultVal()):!1,this.options._isMuitPicker)this.date=e?new Date(e):a.today;else{var i="string"==typeof t?t:this.isInput?this.element.prop("value"):this.element.data("date");this.date=i?a.parseDate(i,this.format):e?new Date(e):a.today}isNaN(this.date.valueOf())&&(this.date=e&&!isNaN(e.valueOf())?e:a.today),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.viewDate.setFullYear(this.date.getFullYear()),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow dow'+t+'">'+a.dates.daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+a.dates.monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").append(t)},switchClk:function(){this.options.switchClk&&this.options.switchClk()},fill:function(){this.options._begin=this.options._begin?a.toDateWithOutHMS(this.options._begin):0,this.options._end=this.options._end?a.toDateWithOutHMS(this.options._end):0;var t=this.viewDate.getFullYear();1900>=t?(this.viewDate.setFullYear(1900),this.picker.find(".lastYear").addClass("disabled"),1900>t&&this.viewDate.setMonth(0),0===this.viewDate.getMonth()?this.picker.find(".prev").addClass("disabled"):this.picker.find(".prev").removeClass("disabled")):(this.picker.find(".lastYear").removeClass("disabled"),this.picker.find(".prev").removeClass("disabled"));var i=new Date(this.viewDate),s=i.getFullYear(),o=i.getMonth(),n=this.date.valueOf();this.picker.find(".datepicker-days th.switch").text(s+a.dates.yearSuffix+a.dates.monthsShort[o]),this.picker.find(".datepicker-days-bg").text(o+1);var h=new Date(s,o-1,28,0,0,0,0),r=a.getDaysInMonth(h.getFullYear(),h.getMonth());h.setDate(r),h.setDate(r-(h.getDay()-this.weekStart+7)%7);var d=new Date(h);d.setDate(d.getDate()+42),d=d.valueOf();for(var p,l,c,u=[],f=0,w=!1,v=0,m="function"==typeof this.options._dates?this.options._dates():this.options._dates,g="function"==typeof this.options._defaultVal?this.options._defaultVal():!1;h.valueOf()<d;){h.getDay()===this.weekStart&&(u.push("<tr"+(this.options._isView?' class="tr-view"':"")+">"),f=0),p=this.onRender(h),l=h.getFullYear(),c=h.getMonth(),w=!1,o>c&&l===s||s>l?(p+=" old",v++,w=!0):(c>o&&l===s||l>s)&&(p+=" new",w=!0),h.valueOf()===n&&(p+=" active"),g&&h.valueOf()===g&&(p+=" defaultDay current");var y="",k="";this.options._begin&&h<this.options._begin&&(k=" disabled before_begin"),this.options._end&&h>this.options._end&&(k=" disabled after_end"),""===k&&this.options._filter&&this.options._filter(h,this.element)&&(k=" disabled"),this.options._isView&&(k+=(-1!==k.indexOf("disabled")?"":" disabled")+(!this.options._isMuitPicker&&h<a.today?" pass":"")+(/(before_begin|after_end)/.test(k)?" not_allow":""),e.isArray(m)&&-1!==m.indexOf(h.getTime())?(y="current",f++):f=0,this.options._isMuitPicker||(0===f?u.push(u.pop().replace(/{{opob}}/gi,"").replace(/{{opom}}/gi,"{{opoe}}")):1===f?k+=" date-view {{opob}}":f>1&&(k+=" date-view {{opom}}")));var D=[h.getFullYear(),h.getMonth()+1,h.getDate()].join("/");if(this.options._isView){var M=[["",h.getDate()],["day-today","今天"],["day-holiday","假日"]],b=0;"function"==typeof this.options._isHoliday&&this.options._isHoliday(+h)&&(b=2),h.getTime()===a.today.getTime()&&(b=1),u.push(('<td class="day'+p+k+' {{viewCls}}" data-date="'+D+'"><div><i>{{viewText}}</i><b></b><u></u></div></td>').replace(/{{viewCls}}/gi,this.options._isMuitPicker?y:M[b][0]).replace(/{{viewText}}/gi,M[b][1]))}else u.push('<td class="day'+p+k+'" data-date="'+D+'">'+h.getDate()+"</td>");h.getDay()===this.weekEnd&&(u.push(u.pop().replace(/{{opob}}/gi,"").replace(/{{opom}}/gi,"{{opoe}}")),u.push("</tr>")),h.setDate(h.getDate()+1)}var _=this.picker.find(".datepicker-days tbody");_.empty().append(u.join("").replace(/{{opo([bem])}}/gi,"view-day-$1")),v>=7&&_.find("tr:eq(0)").hide();var Y=this.date.getFullYear(),F=this.picker.find(".datepicker-months").find("th.switch").text(s+a.dates.yearSuffix).end().find("span").removeClass("active");Y===s&&F.eq(this.date.getMonth()).addClass("active"),u="",s=10*parseInt(s/10,10);var x=this.picker.find(".datepicker-years").find("th.switch").text(s+"-"+(s+9)).end().find("td");s-=1;for(var S=-1;11>S;S++)u+='<span class="year'+(-1===S||10===S?" old":"")+(Y===s?" active":"")+'">'+s+"</span>",s+=1;x.html(u)},click:function(t){!this.options._isMuitPicker&&t.stopPropagation(),t.preventDefault();var i=e(t.target).closest("span, td, th");if(1===i.length){var s,o;switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":break;case"prev":case"next":this.viewDate["set"+a.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+a.modes[this.viewMode].navFnc].call(this.viewDate)+a.modes[this.viewMode].navStep*("prev"===i[0].className?-1:1)),this.switchClk(),this.fill();break;case"lastYear":case"nextYear":this.viewDate.setFullYear.call(this.viewDate,this.viewDate.getFullYear.call(this.viewDate)+("lastYear"===i[0].className?-1:1)),this.switchClk(),this.fill()}break;case"span":i.is(".month")?(o=i.parent().find("span").index(i),this.viewDate.setMonth(o)):(s=parseInt(i.text(),10)||0,this.viewDate.setFullYear(s)),0!==this.viewMode&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(i.is(".day")&&!i.is(".disabled")){var n=parseInt(i.text(),10)||1;o=this.viewDate.getMonth(),i.is(".old")?o-=1:i.is(".new")&&(o+=1),s=this.viewDate.getFullYear(),this.date=new Date(s,o,n,0,0,0,0),this.viewDate=new Date(s,o,Math.min(28,n),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})}}}},select:function(t){var e=t.day,i=t.month,s=t.year;this.date=new Date(s,i,e,0,0,0,0),this.viewDate=new Date(s,i,Math.min(28,e),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:a.modes[this.viewMode].clsName})},setOption:function(t){return e.extend(this.options,t),this.fill(),this.set(),this},getDate:function(){return this.date},mousedown:function(t){!this.options._isMuitPicker&&t.stopPropagation(),t.preventDefault()},showMode:function(t){t&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+a.modes[this.viewMode].clsName).show()}},e.fn.datepicker=function(t,s){return this.each(function(){var a=e(this),o=a.data("datepicker"),n="object"==typeof t&&t;o||a.data("datepicker",o=new i(this,e.extend({},e.fn.datepicker.defaults,n))),"string"==typeof t&&o[t](s)})},e.fn.datepicker.defaults={onRender:function(){return""},adjustUp:!1},e.fn.datepicker.Constructor=i;var s=new Date;s.setHours(0,0,0,0);var a={today:s,modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["周日","周一","周二","周三","周四","周五","周六","周日"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],yearSuffix:"年"},isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,a.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},toDateWithOutHMS:function(t){return"string"==typeof t&&(t=t.replace(/-/g,"/")),t=isNaN(Date.parse(new Date(t)))?new Date:new Date(t),t.setHours(0,0,0,0),t},parseFormat:function(t){var e=t.match(/[.\/\-\s].*?/),i=t.split(/\W+/);if(!e||!i||0===i.length)throw new Error("Invalid date format.");return{separator:e,parts:i}},parseDate:function(t,e){if(!t)return a.today;var i,s=t.split(e.separator);if(t=new Date,t.setHours(0,0,0,0),s.length===e.parts.length)for(var o=t.getFullYear(),n=t.getDate(),h=t.getMonth(),r=0,d=e.parts.length;d>r;r++)switch(i=parseInt(s[r],10)||1,e.parts[r]){case"dd":case"d":if(n=i,n>31)return a.today;t.setDate(i);break;case"mm":case"m":if(h=i-1,h>11)return a.today;t.setMonth(h);break;case"yy":if(o=2e3+i,1900>o||o>2099)return a.today;t.setFullYear(o);break;case"yyyy":if(o=i,1900>o||o>2099)return a.today;t.setFullYear(o)}return t},formatDate:function(t,e){var i={d:t.getDate(),m:t.getMonth()+1,yy:t.getFullYear().toString().substring(2),yyyy:t.getFullYear()};i.dd=i.d,i.mm=i.m,t=[];for(var s=0,a=e.parts.length;a>s;s++)t.push(i[e.parts[s]]);return t.join(e.separator)},headTemplate:function(t){return"<thead><tr>"+(t._showYearBtn?'<th class="lastYear"><b><i>&lsaquo;&lsaquo;</i></b></th>':"")+'<th class="prev"><b><i>&lsaquo;</i></b></th><th colspan="'+(t._showYearBtn?"3":"5")+'" class="switch"></th><th class="next"><b><i>&rsaquo;</i></b></th>'+(t._showYearBtn?'<th class="nextYear"><b><i>&rsaquo;&rsaquo;</i></b></th>':"")+"</tr></thead>"},contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};return a.template=function(t){return'<div class="datepicker dropdown-menu {{dpCls}}"><div class="datepicker-days"><table class=" table-condensed">'+a.headTemplate(t)+'<tbody></tbody></table><div class="datepicker-days-bg"></div></div></div>'},a});
/*!@tencent/im-form/form*/
;define("@tencent/im-form/form",function(t){var e=t("jquery"),i=(t("@tencent/im-edu-datepicker/edu-datepicker"),t("@tencent/im-validator/validator")),n=t("@tencent/im-edu-html/edu-html"),a="disabled",s="checked",r="selected",l="selecting",h="f-item--error",o="f-item--success",d="f-item--info",u='<div class="f-msg"><i class="icon-msg"></i><p class="f-msg-text"></p></div>',c=function(t,e,i){i=i||{},this.$clean=!0,this.$valid=!0,this.name=t,this.form=e,this.$form=e.$,this.$=this.$ele();for(var n in i)this[n]=i[n];this._patterns=[],this.init()};c.prototype={init:function(){},$ele:function(){return this.$form.find('[data-name="'+this.name+'"]')},_default:function(t){var e=["input","textarea"].indexOf(this.$[0].nodeName.toLowerCase())>-1;return e?this.$.val(t):this.$.data("value",t),this},get:function(){var t=["input","textarea"].indexOf(this.$[0].nodeName.toLowerCase())>-1,e=t?this.$.val():this.$.data("value");return"undefined"==typeof e?"":e},set:function(t){return this._default(t),this.changed()},val:function(t){return"undefined"==typeof t?this.get():this.set(t)},on:function(t,e){var i=this;return this.$.on(t,function(t){t.preventDefault(),t.stopPropagation(),e.apply(i,arguments)})},onChange:function(t){return this.on("change",t)},changed:function(){return this.$clean=!1,this.valid(),this.$.triggerHandler("change",this.get()),this},valid:function(t){if("undefined"!=typeof t)return this.$valid=t,this;var e,n,a=this.val();if(this._patterns.length>0)for(this.$valid=!0,e=0,n=this._patterns.length;n>e;e++){var s,r=this._patterns[e],l=r.call(this,a);if(l!==!0)return s=l===!1?s:l,this.err(s),this.$valid=!1,this.$valid}if(!this.$.data("pattern"))return this.$valid||this.err(),this.$valid;var h=(this.$.data("pattern")||"").toString().split("|"),o=(this.$.data("msg")||"").toString().split("|");for(e=0,n=h.length;n>e;e++){var d=h[e];if(this.$valid=i.checkOne(this.$,a,d),this.$valid!==!0)return this.err(i.msg?i.msg:o[e]?o[e]:this.$valid),this.$valid=!1,this.$valid}return this.succ(),this.$valid},getWrap:function(){return this.$.closest(".f-item")},getMsgElement:function(t){var e=t.find(".f-msg .f-msg-text");return 0===e.length&&(t.find(".f-field").append(u),e=t.find(".f-msg .f-msg-text")),e},info:function(t){var e=this.getWrap();t=t||this.$.data("tips"),"undefined"!=typeof t&&this.getMsgElement(e).html(t),e.removeClass([h,o].join(" ")).addClass(d)},err:function(t){this.$valid=!1;var e=this.getWrap();t=t||this.$.data("msg"),"undefined"!=typeof t&&this.getMsgElement(e).html(t),e.removeClass([d,o].join(" ")).addClass(h)},succ:function(t){this.$valid=!0;var e=this.getWrap();t=t||this.$.data("succ")||"",this.getMsgElement(e).html(t),e.removeClass([d,h].join(" ")).addClass(o)},clean:function(){this.$valid=!0,this.$clean=!0;var t=this.getWrap();return t.removeClass([d,h,o].join(" ")),this},pattern:function(t){return this._patterns.push(t),this}};var f={},v=function(t){this.$=t||e(document.body),this.fields=[],this.update(!0)};return v.prototype={valid:function(){var t=!0;return this._loopFields(function(){this.valid()||(t=!1)}),t},update:function(t){var e=this;return this.fields.forEach(function(t){delete e[t]}),this.fields=[],this._tabIndex=0,this._init(t),this},get:function(t){return this[t].get()},set:function(t,e){return this[t].set(e)},val:function(t,e){if(2===arguments.length)this[t].set(e);else{if(1!==arguments.length){var i={};return this._loopFields(function(t){i[t]=this.get()}),i}if("string"==typeof t)return this[t].get();for(var n in t)this[n].set(t[n])}},valFilter:function(t){var e={};return this._loopFields(function(i){this.$.is(t)&&(e[i]=this.get())}),e},valNoHidden:function(){var t={};return this._loopFields(function(e){this.$.is(":visible")&&(t[e]=this.get())}),t},_init:function(t){this._initFields(t)},_initFields:function(t){var i=this,n=1;for(var a in f){var s=f[a],r=!0,l=this.$.find(s.selector);l.each(function(){i._tabIndex++;var h=e(this),o=h.data("name");o||(o=a+n,n++,h.attr("data-name",o)),r&&t&&s.handler&&s.handler.call(s,i,l,i._tabIndex),r=!1,i._createField(o,s)})}},_createField:function(t,i){return this[t]?this[t]:(this[t]=new c(t,this,e.extend({},i)),this.fields.push(t),this[t])},_loopFields:function(t){for(var e=[],i=0,n=this.fields.length;n>i;i++){var a=this.fields[i];e.push(t.call(this[a],a))}return e}},v.extend=function(t){return f[t.type]=t,this},v.extend({type:"radio",selector:".f-radio",handler:function(t){t.$.on("click",this.selector,function(i){i.preventDefault();var n=e(this),r=n.data("name");n.hasClass(a)||n.hasClass(s)||(n.addClass(s),t.$.find('.f-rc--radio[data-name="'+r+'"]').not(n).removeClass(s),t.$.find('.f-radio[data-name="'+r+'"]').not(n).removeClass(s),t[n.data("name")].changed())})},get:function(){return this.$.filter("."+s).data("value")},set:function(t){return this.$.each(function(){e(this).toggleClass(s,e(this).data("value")==t)}),this.changed()},init:function(){return this}}).extend({type:"checkbox",selector:".f-checkbox",handler:function(t){t.$.on("click",this.selector,function(i){i.preventDefault();var n=e(this);n.hasClass(a)||(n.toggleClass(s),t[n.data("name")].changed())})},get:function(){var t=[];return this.$.filter("."+s).each(function(){t.push(e(this).data("value"))}),t},set:function(t){return t=e.isArray(t)?t:[t],this.$.each(function(){var i=e(this);i.toggleClass(s,t.indexOf(i.data("value"))>-1)}),this.changed()}}).extend({type:"select",selector:".f-select",handler:function(t,i,n){i.each(function(){var t=e(this);"undefined"==typeof t.attr("tabIndex")&&(t.attr("tabIndex",n),n++)}),t.$.on("click",this.selector,function(i){i.preventDefault(),i.stopPropagation();var n=e(this);if(!n.hasClass(a)){if(n.hasClass(l))return n.removeClass(l);e(document.body).one("click",function(){n.hasClass(l)&&n.removeClass(l)}),n.addClass(l).one("blur",function(){n.removeClass(l)}).one("click",".f-value-list li",function(){var i=e(this);n.addClass(r).data("value",i.data("value")).find(".f-value").html(i.html()),t[n.data("name")].changed()})}})},set:function(t){var e='.f-value-list li[data-value="'+t+'"]',i=this.$.find(e),n=i.length>0;return this.$.toggleClass(r,n).data("value",t).find(".f-value").html(n?i.html():""),this.changed()},options:function(t,e,i,a){var s=this.$,r="",l=!1,h=this.val();t=t||[],e=e||"key",i=i||"value";for(var o=0,d=t.length;d>o;o++){var u=t[o]||{};r+='<li data-value="'+n.encode(u[i])+'">',r+=a?u[e]:n.encode(u[e]),r+="</li>",""!==h&&u[i]==this.val()&&(l=!0)}s.find(".f-value-list").html(r),!l&&this.set()&&this.clean()}}).extend({type:"input",selector:".f-text",init:function(){var t=this;this.$.on("keyup paste",function(){t.$.data("noinput")||t.valid()}).blur(function(){t.$.data("noblur")||t.valid()}).focus(function(){t.$.data("nofocus")||t.info()})}}).extend({type:"date",selector:".f-date",handler:function(t){t.$.find(this.selector).each(function(){var i=e(this),n=i.data("begin"),a=i.data("end");i.siblings(".i-calendar").click(function(){i.trigger("click")}),i.on("keyup",function(){t[e(this).data("name")].changed()}),i.datepicker({_set:function(e,i){i.data("datepicker").hide(),t[i.data("name")].changed()},_begin:new Date(n),_end:new Date(a),adjustUp:i.data("adjust")})})},_default:function(t){this.$.val(t).data("datepicker").update()}}).extend({type:"textarea",selector:".f-textarea",init:function(){var t=this;this.$.on("keyup paste",function(){t.$.data("noinput")||t.valid()}).blur(function(){t.$.data("noblur")||t.valid()}).focus(function(){t.$.data("nofocus")||t.info()})}}).extend({type:"popupSelectLines",selector:".f-popup-lines-select",handler:function(t){var i=this;t.$.find(this.selector).on("click",".item-del",function(n){n.preventDefault(),n.stopPropagation();for(var a=e(this),s=t[a.parents(i.selector).data("name")],r=s.$.data("key"),l=(s.$.data("title"),a.data("value")),h=s.val(),o=[],d=0,u=h.length;u>d;d++)h[d][r]!=l&&o.push(h[d]);s.val(o).changed()})},set:function(t){t=t||[];for(var e,i,a="",s=this.$.data("key"),r=this.$.data("title"),l=0,h=t.length;h>l;l++){var o=t[l];s?(e=o[s],i=o[r]):e=i=o,a+='<li class="f-value-item">'+n.encode(i)+' <span class="item-del" data-value="'+e+'">删除</span></li>'}return a+=t.length>0?'<li class="f-value-add">'+this.$.data("more")+"</li>":"",this.$.toggleClass("selected",t.length>0).data("value",t).find(".f-value-list").html(a),this.changed()}}).extend({type:"popupSelect",selector:".f-popup-select",set:function(t){t=t||[];var e=[],i=[],a=this.$.data("key"),s=this.$.data("title");return t.forEach(function(t){t&&(e.push(t[s]),i.push(t[a]))}),this.$.toggleClass("selected",t.length>0).data("value",i).find(".f-value").text(n.decode(e.join(","))),this.changed()},get:function(){return this.$.data("value")||[]}}).extend({type:"video",selector:".f-upload"}),e.fn.form=function(t){var i=[];return this.each(function(){var n=e(this),a=n.data("__form");a||(a=new v(n,t),n.data("__form",a)),i.push(a)}),1===i.length?i[0]:i},v});
/*!/node_modules/@tencent/im-edu-pay/applyBox.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay/applyBox.tpl_tpl",function(require,exports,module){return function(it,opt){function get_sys_time(e){return e.sys_time||parseInt(+new Date/1e3,10)}function calc_course_state(e){e=e||{},e.course_state=COURSE_SIGN,e.is_apply_over=!1,e.is_study_over=!1;var s=get_sys_time(e);return e.sign_endtime<s&&(e.is_apply_over=!0,e.course_state=COURSE_SIGN_END),e.endtime<s&&(e.is_study_over=!0,e.course_state=COURSE_END),e}function appendStatus(e){var s="",a={2:1,3:1,6:1,7:1},t={8:1,9:1};return e.course_state===COURSE_END?s="(已结束)":4===e.pay_status||5===e.pay_status?s="(已报名)":a[e.pay_status]?s="(交易待确认)":t[e.pay_status]?s="(退款处理中)":e.course_state===COURSE_SIGN_END&&(s="(已报名截止)"),s}function acceptable(s){if(s.is_study_over)return!1;if(2===it.source)return!0;if(s.is_apply_over)return!1;if(e.installment_state&&(209==e.installment_state||210==e.installment_state))return!1;var a={2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1};return s.passcard?!a[s.passcard_status]:s.course_state!==COURSE_END&&2!=s.role_type&&!a[s.pay_status]}with(it=it||{}){var _$out_=[],COURSE_SIGN=0,COURSE_SIGN_END=1,COURSE_END=4,payId="undefined"!=typeof payid?payid:course_payid;it.payId=payId,cur_term_id||0===cur_term_id||(cur_term_id=terms[0].term_id),0===cur_term_id&&terms[0].passcard&&(cur_term_id=terms[1].term_id);var applyBoxItem=opt.applyBoxItem;opt.applyBoxItem=null,_$out_.push('<div class="apply-box-container"> <div class="mod-course-banner"> <img src="',cover_url,'90" alt="',name,'" class="mod-course-banner__img"/> <div class="mod-course-banner__content"> <h3 class="mod-course-banner__title" title="',name,'">',name,'</h3> <div class="mod-course-banner__content-line"> <a href="//',agency_domain,'" target="_blank" class="mod-course-banner__c-light" title="',agency_name,'" >',agency_name,'</a> </div> </div> </div> <div class="course-class',1===terms.length?" course-class--one":"","",3===terms.length?" course-class--three":"",'"> <div class="class-tt-list-wrap"> <ul class="class-tt-list" id="box_term_master"> ');for(var minPrice=1e7,i=0,len=terms.length;len>i;i++){var e=calc_course_state(terms[i]);e.price<minPrice&&(minPrice=e.price)}for(var maxlen=terms.length,i=0;maxlen>i;i++){var e=terms[i];if(1!==e.hidden&&!e.passcard){var isXiaoban=!e.is_apply_over&&e.is_small_term&&e.remain_num<50;_$out_.push(' <li class="js-term-item ',e.term_id==cur_term_id?"active":""," ",isXiaoban?" item--xiaoban":"",'" data-idx="',i,'" data-termid="',e.term_id,'" data-acceptable="',acceptable(e)?"1":"",'" data-installment="',e.term_installment&&e.term_installment.length>0?"1":"",'"> ',e.passcard?"任意学":'<span class="item-name">'+e.name+"</span>"," "),isXiaoban&&_$out_.push(' <span class="flag-orange" title="该班限额',e.sign_max,'人报名">小班</span> '),_$out_.push(" </li> ")}}_$out_.push(' </ul> <span class="class-more"><i class="icon-font i-v-left"></i>更多班级<i class="icon-font i-v-right"></i></span> </div> <div class="class-content-list"> ');for(var defaultTerm=null,i=0;maxlen>i;i++){var e=terms[i],statusText=appendStatus(e),hidden=!0;if(null===cur_term_id&&0===i&&(hidden=!1),null!==cur_term_id&&cur_term_id===e.term_id&&(hidden=!1,defaultTerm=e),it.defaultTerm=defaultTerm,0===e.term_id){switch(e.passcard_status){case 4:case 5:statusText="(已报名)";break;case 2:case 3:case 6:case 7:statusText="(交易待确认)";break;case 8:case 9:statusText="(退款处理中)"}statusText=e.termTimeString+statusText}else{var termDuration=opt.formatTermTime({bgtime:e.bgtime,endtime:e.endtime,systime:get_sys_time(e)});statusText=e.cycle>0?(e.bgtime?"":"支持随到随学，")+"报名后"+Math.floor(e.cycle/86400)+"天内有效"+statusText:e.bgtime?termDuration.bgtime+"开课 至 "+termDuration.endtime+"结课"+statusText:"支持随到随学，"+termDuration.endtime+"过期"+statusText}_$out_.push(' <div class="js-term-item class-content ',e.term_id==cur_term_id?"active":"",'" data-idx="',i,'" data-termid="',e.term_id,'" data-acceptable="',acceptable(e)?"1":"",'" > <h2 class="hidden-clip">',e.name,'</h2> <p class="class-date">',statusText,'</p> <div class="class-des">',e.introduce||"","</div> </div> ")}return _$out_.push(" </div> </div> "),it.address_state&&(_$out_.push(' <div class="apply-box-address-con"> '),_$out_.push(1!=it.must_fill_mailing?' <div id="applyBoxNeedbooks" class="checkbox f-checkbox checked" name="type"> <i class="icon-checkbox"></i> <label>该课程有教材，我需要接收</label> </div> ':" <label>该课程有教材，请填写收获地址</label> "),_$out_.push(' <div id="applyBoxAddressForm" class="apply-box-address-form"> '),it.addressData&&_$out_.push(' <div class="apply-box-address-item"> <span>寄至</span> <span class="apply-box-address-name">',it.addressData.receiver,'</span> <span class="apply-box-address-phone">',it.addressData.phone,'</span> <span class="apply-box-address-detail">',it.addressData.province,"",it.addressData.city||"","",it.addressData.district||"","",it.addressData.address||"",'</span> <a href="javascript:;" class="js-edit-address">编辑</a> </div> '),_$out_.push(' <div class="address-form" '),it.addressData&&_$out_.push('style="display: none;"'),_$out_.push('> <div class="form-group"> <label>收件人</label><input name="receiver" type="text" maxlength="36" /> </div> <div class="form-group"> <label>手机号</label><input name="phone" type="text" maxlength="11" /> </div> <div class="form-group form-region-group"> <label>所在地区</label><span class="select-wrap"><select> <option value="">省</option> </select><!--[if lte IE 9]><!--><i></i><!--<![endif]--></span> <span class="select-wrap"><select> <option value="">市</option> </select><!--[if lte IE 9]><!--><i></i><!--<![endif]--></span> <span class="select-wrap"><select> <option value="">区</option> </select><!--[if lte IE 9]><!--><i></i><!--<![endif]--></span> </div> <div class="form-group form-textarea-field"> <label>详细地址</label><textarea name="address" maxlength="100"></textarea> </div> </div> </div> </div> ')),_$out_.push(' <div class="js-mod-course-info"> ',applyBoxItem(it,opt),' </div> <div class="mod-course-banner_row clearfix hide js-not-chose-tips"> <div class="mod-course-banner_col2"> <p class="mod-course-banner_tips"><i class="icon-font i-alert"></i>请先选择班级<p> </div> </div> '),"undefined"!=typeof train&&1===train&&_$out_.push(' <div class="cdkey-panel js-cdkey-panel"> <form class="form form--h"> <div class="f-item"> <div class="f-field"> <label class="f-checkbox js-cdkey-checkbox" data-name="f_usecdkey" data-value="1"> <i class="icon-checkbox"></i> <span class="f-label-text">使用cdkey报名</span> </label> </div> </div> <div class="f-item f-item-cdkey hide"> <div class="f-field"> <input type="text" class="f-text js-cdkey-ipt" data-name="f_cdkey" data-pattern="not_null|cdkey" data-msg="请填写cdkey" placeholder="请输入36位cdkey，由字母或数字组成"> <div class="f-msg"> <i class="icon-msg"></i> <p class="f-msg-text js-msg-error">请填写cdkey</p> </div> </div> </div> </form> </div> '),_$out_.push("</div>"),2===source&&_$out_.push('<div> <div class="checkbox privilege-checkbox js-privilege-check" name="type"> <i></i> <label>我已阅读并同意：通过非腾讯课堂平台与机构进行的支付交易，如果产生纠纷与责任，均由交易双方承担，与腾讯课堂无关。</label> </div></div>'),1!==payId&&_$out_.push(' <!-- <p class="pay-support">支持微信、财付通、银行卡支付</p> --> <label class="js-pay-protocol pay-protocol f-checkbox checked" data-name="" data-value="1"> <i class="icon-checkbox"></i> <span class="f-label-text">同意<a target="_blank" class="nor-link" href="//ke.qq.com/proService.html">腾讯课堂服务协议</a> <span class="js-jd-protocol" style="display:none"><span style="color:#999;margin:0 5px;">|</span><a target="_blank" class="nor-link" href="/faq.html?id=7">京东白条支付服务</a></span> </span> </label>'),_$out_.join("")}}});
/*!@tencent/im-edu-pay/termSelector*/
;define("@tencent/im-edu-pay/termSelector",function(e){function t(){return N.isReserveMode?"免费预约":2===N.source?"接受赠送":1===N.payid?"去报名":"去付款"}function i(e){if(N&&2!==N.source&&1!==N.payid&&e){var t=d(e),i=s(),n=T.getPriceInfo(t,i),c=T.formatAcceptBtn(n,t),a=H.$acceptBtn;a&&a.length&&(a.text(c),0===n.curPrice&&a.data("useBalance",!0))}}function n(e){for(var t=N.discountList||[],i=[],n=o(e),c=0,a=t.length;a>c;++c){var r=t[c],s=r.limit&&r.limit&&r.limit.min_cost,d=r.elem&&r.elem.is_suit_all||!1;1==r.discount_type?i.push(r):3==r.discount_type&&(10===r.type?i.push(r):d?s<=n.price&&i.push(r):r.price<=n.price/2&&i.push(r))}return i}function c(e){var t=k.Deferred(),i=e.find("."+J),c=i.length>0?i.data("termid"):N.terms[0].term_id;return j.getCourseDiscountList({param:{cid:N.cid,term_id:c},succ:function(i){N.discountList=i.result.discounts||[],N.couponListFilter=n(c),e.find(".js-coupon-menulist").html(q.couponTpl(N)),t.resolve(i)},err:function(){t.reject()}}),t}function a(e){var t=k.Deferred(),i=e.find("."+J),n=i.length>0?i.data("termid"):N.terms[0].term_id,c={fid:N.cid+"",sid:n+"",type:"course"};return j.getBalance({param:{productid:JSON.stringify(c)},succ:function(e){N.balance=e.result,t.resolve(e)},err:function(){t.reject()}}),t}function r(e){k.when(c(e),a(e)).done(function(){u(e)})}function o(e){var t={};if(0===e)t={price:N.passcard_price};else for(var i=0,n=N.terms.length;n>i;i++)if(e===N.terms[i].term_id){t=N.terms[i];break}return t}function s(){var e={};return N.is_vip_course&&N.is_user_vip&&(e.discount=N.vip_discount/100),e}function d(e){var t,i=e.find(".js-coupon-list .selected").data("value"),n=e.find("."+J),c=n.length>0?n.data("termid"):N.terms[0].term_id,a=o(c);N.couponListFilter&&N.couponListFilter.length>0&&-1!=i&&(1==N.couponListFilter[i].discount_type?t=a.price-N.couponListFilter[i].rule.discount_price:3==N.couponListFilter[i].discount_type&&(t=N.couponListFilter[i].price));var r=a.price,s=N.passcard_price||N.passcard_price_source,d={passcard_price:s,price:r,cur_term_id:c,coupon_price:N.couponListFilter&&N.couponListFilter.length>0&&-1!=i?t:0,passcard:N.passcard,balance:N.balance};return d}function u(e){var t=d(e),i=s();T.updateDialogInfo(t,i),H.$balance=e.find(".js-mod-course-balance-num")}function l(e){var t=d(e),i=s();T.updatePriceInfo(t,i),H.$balance=e.find(".js-mod-course-balance-num")}function p(){var e=k(".js-privilege-check");return 0===e.length?!0:e.hasClass("checkbox-check")?!0:!1}function m(){return 1!==N.passcard?!1:8===N.passcard_status?!0:!1}function f(){return 0===k(".js-pay-protocol").length||k(".js-pay-protocol").hasClass("checked")}function y(e){var t=k(".tips-buy-course .modal-accept");return f()?m()?t.addClass("btn-disabled"):void(e.data("acceptable")&&p()?t.removeClass("btn-disabled"):t.addClass("btn-disabled")):t.addClass("btn-disabled")}function _(e){function i(){var t=e.find(".js-cdkey-checkbox");0!==t.length&&(z=t.hasClass("checked"),z?(e.find(".js-cdkey-panel .f-item-cdkey").show(),e.find(".modal-accept").prop("title","立即报名").text("立即报名")):(e.find(".js-cdkey-panel .f-item-cdkey").hide(),e.find(".modal-accept").prop("title","去付款").text("去付款")),e.find(".js-cdkey-ipt").trigger("input"))}e.on("click",".js-privilege-check",function(){k(this).hasClass("checkbox-check")?k(this).removeClass("checkbox-check"):k(this).addClass("checkbox-check");var e=k(".js-privilege-check").closest(".tips-bd").find(".active");(0!==e.length||1===N.terms.length)&&y(e)}),e.on("click",".mod-choose-time__content",function(){E||k(this).closest(".mod-choose-time_v2").find(".js-term-item").eq(0).trigger("click")}),e.on("click",".js-pay-protocol",function(t){if(!k(t.target).hasClass("nor-link")){var i=k(this).toggleClass("checked");(N.cur_term_id||0===N.cur_term_id)&&y(e.find("[data-termid="+N.cur_term_id+"]")),C.tdw({module:"pay_window",action:"click",obj1:"contract",obj2:i.hasClass("checked")?1:0})}}).on("click","#applyBoxNeedbooks",function(){var e=k(this).toggleClass("checked");e.hasClass("checked")?k("#applyBoxAddressForm").show():k("#applyBoxAddressForm").hide()}).on("click",".js-edit-address",function(){k(this).closest(".apply-box-address-item").hide(),k("#applyBoxAddressForm").find(".address-form").show(),C.tdw({module:"pay_window",action:"click",obj1:"edit_address",obj2:1})}),e.on("click",".js-term-item",function(){E=!0;var n=k(this);e.find("."+J).removeClass(J),n.addClass(J);var c=(n.data("idx"),n.data("termid")),a=e.find(".modal-accept");e.find(".js-not-chose-tips").addClass("hide"),0===c&&C.tdw({module:"banjitong",action:"fuceng_tabclk",ver1:N.cid});var o=N.termObj||{},s=o[c];a.removeClass("disabled"),s&&s.term_warn_type?a.addClass("disabled"):0===c&&N.hasPunishment&&a.addClass("disabled"),2===N.source&&N.couponList&&N.couponList.length>0&&(0===c?e.find(".js-coupon-menulist").show():e.find(".js-coupon-menulist").hide()),y(n),a.text(t(c)),a.attr("title",a.text()),!N.isReserveMode&&r(e),e.find(".js-term-item").removeClass("active").filter('[data-termid="'+c+'"]').addClass("active"),i()}),e.on("click",".js-coupon-list .diy-option",function(t){var i=k(this),n=e.find(".js-coupon-list");n.hide(),n.find(".selected").removeClass("selected"),i.addClass("selected"),e.find(".js-coupon-tag .text").text(i.text()),e.find(".js-coupon-tag").toggleClass("diy-select-on"),l(e),t.stopPropagation()}),e.on("click",".js-coupon-tag",function(e){var t=k(this),i=t.hasClass("diy-select-on");i?k(".js-coupon-list").hide():k(".js-coupon-list").show(),t.toggleClass("diy-select-on"),C.tdw({module:"youhuiquan",action:"coursepage_choose",ver1:N.cid}),e.stopPropagation()});var n={108500:"非企业培训课，不能使用cdkey",108501:"企业培训课必须是付费的",108503:"无效的cdkey",108505:"cdkey已被使用",108506:"该课程还没有生成cdkey",108512:"微信用户暂不支持使用cdkey",100012:"服务器繁忙",108513:"cdkey不能用于此班级",108514:"cdkey不存在"};B.extend("cdkey",function(e){return/^([a-z]|[0-9]){36}$/.test(e)?0!==Q?(B.msg=n[Q]||"未知错误("+Q+")",!1):!0:(B.msg="cdkey格式错误",Q=0,!1)}),O=e.find(".js-cdkey-panel .form").form(),e.on("click",".js-cdkey-checkbox",function(){i()}),e.on("input",".js-cdkey-ipt",function(){var t=k(this).val();if(t=k.trim(t),t.length===M){var i=e.getCurTermId(),n={term_id:i,cid:N.cid,cdkey:t};j.checkCdkey({param:n,succ:function(){Q=0,h()},err:function(e){return Q=e.retcode,h(),!0}})}}),e.find(".tt-title").trigger("click"),S&&k(document).on("click",function(t){var i=k(t.target);i.hasClass("js-coupon-tag")||i.parents().hasClass("js-coupon-tag")||(e.find(".js-coupon-list").hide(),e.find(".js-coupon-tag").removeClass("diy-select-on"))})}function h(){O.f_cdkey.valid()}function v(e,t){var i=e.find(".js-cdkey-ipt"),n=k.trim(i.val()).toLowerCase();if(!/^([a-z]|[0-9]){36}$/.test(n))return void h();R=!0,k(".tips-buy-course").spin({shadow:!0});var c=e.getCurTermId(),a={term_id:c,courseId:N.cid,cdkey:n};k.extend(a,t.param||{}),w.getInfo().then(function(i){k.extend(a,{name:N.name,aid:N.aid,agency:N.agency,price:N.price,time:N.time||(new Date).getTime(),source:N.source,pay_status:N.pay_status,payid:N.payid,type:N.type,nick:i.nick_name||k.cookie.uin(),from_uin:+(k.bom.getHash("from_uin")||k.bom.query("from_uin"))||0}),x.init({param:a,succ:function(){k(".tips-buy-course").spin(!1),Q=0,h(),k(document).trigger(".tips .modal-close"),t.cbApplyInfo&&t.cbApplyInfo({cdkey:n}),R=!1},err:function(i){return k(".tips-buy-course").spin(!1),R=!1,1e5===i.retcode?(e.remove(),!1):(99999===i.retcode?L.show({succ:function(i){t.param=t.param||{},t.param.vcCode=i,v(e,t)},cancel:function(){}}):(Q=i.retcode,h()),!0)}})})}function g(e){if(!P||1!=N.must_fill_mailing&&!k("#applyBoxNeedbooks").hasClass("checked"))return e();var t=N.addressData,i=t&&t.id;if(!k("#applyBoxAddressForm").is(":visible"))return e(i);if(t=P.getValue()){var n="add_user_address";i&&(n="modify_user_address",t.id=i),j.cgiHttp({url:"/cgi-bin/user/"+n,type:"POST",param:t,succ:function(n){n=n&&n.result,n&&n.id&&(i=t.id=n.id),N.addressData=t,e(i)}})}return!0}function b(e,c){function a(e){var t=r.find("."+J),i=r.getCurTermId(),n="",a="";if(1==r.find(".js-term-item").filter("[data-termid="+i+"]").data("installment"))return F(N.cid,i),!1;var s=k(".js-coupon-list .selected").data("value");-1!==s&&null!==s&&(1==N.couponListFilter[s].discount_type?a=N.couponListFilter[s].discount_id:3==N.couponListFilter[s].discount_type&&(n=N.couponListFilter[s].cou_id));var d=H.$balance,u=0;d&&d.length&&(u=+d.data("value")||0);var l={curTermId:i,curTermIndex:t.data("idx")||0,couId:n,discount_id:a,balance:u};l=k.extend(l,e),c&&c(l),o&&C.tdw({action:"coursepage_pay",module:"youhuiquan",ver1:N.cid})}var r,o;E=!1,S||(S=!0),N=e||{},N.address_state&&!N.addressData&&N.user_address_list&&(N.addressData=N.user_address_list[0]),o=N.couponList&&N.couponList.length>0;var d=N.price>0&&(2!=N.source||2==N.source&&1!=N.pay_status)?"购买课程":"报名课程";N.isReserveMode&&(d="免费试听"),N.couponListFilter=n(N.cur_term_id||N.terms[0].term_id);var u=k.Dialog.confirm(q.applyBox(N,{getDiscountOpts:s,formatCouponPrice:T.formatCouponPrice,formatTermTime:k.render.time.formatTermTime,formatBalance:T.formatBalance,formatOriPrice:T.formatOriPrice,couponTpl:q.couponTpl,applyBoxItem:q.applyBoxItem,getPriceInfo:T.getPriceInfo}),{title:d,submit:t(N.cur_term_id),globalClass:"tips-buy-course",isDisabled:!0,onCancel:function(){C.tdw({module:"pay_window",action:"click",obj1:"cancel"})},onAccept:function(){var e=H.$acceptBtn,t=e.data("useBalance")||!1,i=e.data("usejd")||!1;return e.hasClass("btn-disabled")||e.hasClass("disabled")?!0:(C.tdw({module:"pay_window",action:"click",obj1:"pay",obj2:N.address_state?1:0}),g(function(n){var c=k(".tips-buy-course li.js-term-item.active"),o=c.length>0?c.data("termid"):N.terms[0].term_id;if(i){var s,d,l={fid:N.cid+"",sid:o+"",type:"course"},p={productid:JSON.stringify(l),pay_method:"jd",call_back_url:encodeURIComponent("https://ke.qq.com/applySuccess.html?cid="+N.cid+"&term_id="+o+"&pay_succ=1&pf=jd")},m=N.couponListFilter||[],f=k(".js-coupon-list .diy-option.selected").data("value"),y={};-1!==f&&m[f]&&(s=m[f].cou_id,d=m[f].discount_id,s&&(y.cou_id=s),d&&(y.discount_id=d)),N.balance&&N.balance.red_envelope_balance&&(y.redenvelope_price=parseInt(N.balance.red_envelope_balance)),"{}"!==JSON.stringify(y)&&(p.discountinfo=JSON.stringify(y)),n&&(p.ext_msg=JSON.stringify({addressid:n}));var _=I.getInfo();p.order_report=JSON.stringify(_),j.cgiHttp({url:"/cgi-bin/pay_access/paytoken",param:p,succ:function(t){var i=t.result.jd_info||{},n=i.url_param,c=n.split("&"),a={};c.forEach(function(e){var t=e.indexOf("=");a[e.substr(0,t)]=e.substr(t+1,e.length)});var r="js-jd-form",o=k("."+r);0!==o.length?$form=o[0]:($form=document.createElement("form"),$form.className=r,document.getElementsByTagName("body")[0].appendChild($form)),$form.innerHTML="",$form.setAttribute("action",i.pc_url),$form.setAttribute("method","post");for(var s in a){var d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name",s),d.value=a[s],$form.appendChild(d)}e.data("errcode",0),$form.submit()},err:function(t){var i=t.retcode;e.data("errcode",i);var n;return n=$[i],n||(n="服务器繁忙，请稍后再试("+i+")"),k.modal.alert(n,{onAccept:function(){location.reload()},onClose:function(){location.reload()}}),!0}})}else{if(z)return v(r,{cbApplyInfo:a}),!0;a({useBalance:t,addressId:n})}var h="block"===k(".js-jdpay-ctn").css("display");if(h){var g={module:"Y-MQ-course",ver1:N.cid,ver2:o,obj1:k(".js-mod-course-banner-pay .fontsize-22").html()};g.action=i?"pay_choose_jd":"pay_choose_full",C.tdw(g)}u.find(".modal-close").click()}))}});if(N.address_state){var l=k.extend({},N.addressData);l.container="#applyBoxAddressForm",P=new A(l),k(".apply-box-address-detail").each(function(){var e=k(this),t=e.html(),i=D.substring_plus(t,270,2,14);t!==i&&e.html(i)})}r=k(".tips-buy-course"),r.getCurTermId=function(){var e=r.find("."+J);return term_id=e.length>0?e.data("termid"):N.terms[0].term_id},H.$acceptBtn=r.find(".modal-accept"),H.$balance=r.find(".js-mod-course-balance-num"),T.init(r,N),i(r),1==N.train&&r.find("input").placeholder(),_(r,{cbApplyInfo:a}),k(document).trigger("termSelector:init",[r,N.cur_term_id]),1===N.terms.length&&8!==N.terms[0].pay_status&&9!==N.terms[0].pay_status&&p()&&r.find(".modal-accept").removeClass("btn-disabled"),(N.cur_term_id||0===N.cur_term_id)&&y(r.find("[data-termid="+N.cur_term_id+"]")),null===N.cur_term_id&&1!==N.terms.length&&(r.find(".modal-accept").attr("title","请先勾选您要的班级"),r.find(".js-not-chose-tips").removeClass("hide")),1===N.passcard&&C.tdw({module:"banjitong",action:"fuceng_view",ver1:N.cid}),o&&C.tdw({module:"youhuiquan",action:"coursepage_chooseview",ver1:N.cid}),C.tdw({module:"pay_window",action:"exposure",obj1:N.address_state?1:0})}var k=e("jquery"),j=e("@tencent/im-edu-db/edu-db"),C=e("@tencent/im-edu-report/edu-report"),x=(e("@tencent/im-check/check"),e("@tencent/im-edu-pay/cdkeyApply")),w=e("@tencent/im-edu-user/index"),B=e("@tencent/im-validator/validator"),I=e("@tencent/im-order-info/index"),L=e("@tencent/im-edu-pay/vc"),F=e("@tencent/im-edu-instalment-pay/index"),T=e("@tencent/im-edu-pay/applyBox"),$=e("@tencent/im-edu-pay/errWordings"),A=e("@tencent/im-edu-pay/address/index"),D=e("@tencent/im-str-ellipsis/str-ellipsis");e("@tencent/im-modal/modal"),e("@tencent/im-form/form"),e("edu-base"),e("@tencent/im-jquery.placeholder/jquery.placeholder"),e("@tencent/im-edu-render/edu-render");var P,O,q={applyBox:e("/node_modules/@tencent/im-edu-pay/applyBox.tpl_tpl"),applyBoxItem:e("/node_modules/@tencent/im-edu-pay/applyBoxItem.tpl_tpl"),couponTpl:e("/node_modules/@tencent/im-edu-pay/coupon.tpl_tpl")},N=window.metaData||{},S=!1,J="active",M=36,E=!1,H={},R=!1,z=!1,Q=0;return{init:b}});
/*!@tencent/im-edu-pay/applyFree*/
;define("@tencent/im-edu-pay/applyFree",function(e){function t(e){e||(e={}),p.checkTimeConflict({param:{cid:e.courseId,term_id:e.term_id},succ:function(e){I=e.result||I,o()},err:function(e){return 1e5===e.retcode||100021===e.retcode||-1001===e.retcode||111===e.retcode?d():o(),!0}})}function o(){var e={cid:b.courseId,term_id:b.term_id,from_uin:b.from_uin||0,platform:b.platform,from:b.from,pagelocation:b.pagelocation,ext:JSON.stringify(b.ext)};b.vcCode&&(e.vfcode=b.vcCode),p.applyFree({param:e,succ:n,err:function(e){return 1e5===e.retcode?d():99999===e.retcode?g.show({succ:function(e){b.vcCode=e,o()},cancel:function(){u({retcode:198401})}}):u(e),!0}})}function n(e){e||(e={}),p.getApplyInfo({param:{cid:b.courseId},succ:function(t){b.userInfo||(b.userInfo={}),b.has_record=t.result.has_record;var o=t.result,n=b.userInfo;n.mobile=o.mobile,n.qq=l.cookie.uin(),n.email=o.email,n.gname=o.gname,n.token=o.token,o.gcode&&(b.qunid=o.gcode,e.discussQun=o.gcode),y.succ&&y.succ(e),c()},err:function(){return b.userInfo||(b.userInfo={}),b.userInfo.qq=l.cookie.uin(),b.has_record=0,y.succ&&y.succ(e),c(),!0}})}function i(){var e="//ke.qq.com/user/index/index.html#cid="+b.courseId;return e+=b.term_id?"&tid="+b.term_id+"&fr=2":"&fr=2"}function r(){var e="/applySuccess.html?";b.packageId?e+="pkg_id="+b.packageId:(e+="cid="+b.courseId,b.term_id&&(e+="&term_id="+b.term_id)),location.href=e}function c(){var e=y,t=e.isShowSuccWin;t===!0?a():r()}function a(){function e(){function e(){var e,t=document.referrer,o={},n=/ke.qq.com\/course\/[(list)|(\d+)]/.test(t),i=location.pathname.split("/"),r=i[i.length-1],c=!1;if(n){var a=v.get("course_report_"+r);a&&(o=JSON.parse(a),c=!0)}if(!c){e=m.getPageLocation("course");for(var d=0,u=e.length;u>d;++d){var s=e[d];s.cid==b.courseId&&(o=s.ext)}}return o}h.init({data:b,tmpl:k.paySucc,emailNode:"#js_pay_email",idCodeNode:"#js_id_code",idCodeBtn:"#js_id_code_btn",mobileNode:"#js_pay_mobile",hadProhibit:1==b.user_notify_status,confirmOpt:{title:"报名成功",globalClass:"pay-succ",confirm:!0},onShow:function(){l(".part-form").hasClass("part-form-expand")||l("#js_pay_mobile").focus(),l("#part-expand").on("click",function(){var e=l(".part-form");l(this).text(e.hasClass("part-form-expand")?"开课提醒设置":"收起"),e.toggleClass("part-form-expand")}),l(".js-pay-continue").click(function(){window.open("/course/list","_blank"),l.Dialog.remove()}),l(".js-pay-studynow").click(function(){window.open(i(),"_blank"),l.Dialog.remove()}),l(".pay-succ").delegate("#js_addgroup_tencent, #js_discuss_tencent","click",function(){_.join(b.qunid,l.cookie.uin())}),l(".tips .tips-er-code").hover(function(){l(this).find(".tips-er-code-float").show()},function(){l(this).find(".tips-er-code-float").hide()})},submitDataFilter:function(e){return e.cid=b.courseId,e.term_id=b.term_id,e},onValidatedFail:function(){var e=l(".part-form");e.hasClass("part-form-expand")||(l("#part-expand").text("收起"),e.toggleClass("part-form-expand"))}}).show(),m.tdw(l.extend({action:"ApplySuccess",module:"course",opername:"Edu",uin:l.cookie.uin(),ver1:b.courseId,ver2:b.has_record?2:1},e())),l.cookie.uin()||BJ_REPORT.debug({msg:"报名成功上报没uin",ext:{msid:2064167}})}b.c=I,p.notifyStatus({succ:function(t){b.user_notify_status=t.result.status,e()},err:function(){b.user_notify_status=0,e()}})}function d(){y.nologin?y.nologin():f.show({succ:function(){location.reload()},close:function(){b.price&&y.openFail&&y.openFail({retcode:1e5}),y.err&&y.err({})}})}function u(e){var t,o={106409:"报名失败，您报名的课程已经结束",166411:"报名失败，此课程已经开始上课",166412:"报名失败，请稍候重试",166415:"您已购买该课程，不需要再次付款",166416:"购买失败，免费课程请走免费的流程",101404:"报名失败，该课程已经下架",101402:"您已经报名了此课程",106437:"报名失败，超出直播类型最大500人的限制",106446:"报名失败，机构创建者不能报名此课程",106447:"报名失败，此课程的老师或助教不能报名",106410:"报名失败，您报名的课程为付费课程",106666:"报名失败，您输入的验证码错误",106438:"您选择的优惠券不存在，请重新尝试！",106439:"您选择的优惠券已被锁定，请重新尝试！",106440:"您选择的优惠券已被使用，请重新尝试！",106441:"您选择的优惠券已被删除，请重新尝试！",106442:"您选择的优惠券已过期，请重新尝试！",106507:'非常抱歉，因违反课堂秩序，您被禁止报名本课程。需要申诉请<a target="_blank" href="http://support.qq.com/write.shtml?fid=1042">点击这里</a>。',106457:"您已接受《"+b.name+"》第"+b.term_id+"期的赠送，您可进入我的报名记录（可直接点击进入）里查询并上课"};return e.retcode&&(t=o[e.retcode],t||(t="服务器繁忙，请稍后再试("+e.retcode+")",BJ_REPORT.debug({msg:"报名失败",ext:{msid:2528782}})),l.Dialog.alert(t,{onAccept:function(){location.reload()},onClose:function(){location.reload()}})),y.err&&y.err(e),!0}function s(){var e=null;l(document).off(".ptab").on("mouseenter.ptab",".ptab-title a",function(){var t=l(this);if(!t.hasClass("active")){t.addClass("active").siblings("a").removeClass("active");var o=t.parent().siblings(".ptab-panel-wrap").find(".ptab-panel").eq(t.index()).show();o.siblings("div").hide(),e||(e=o.find("img"),e.length&&!e.data("a")&&e.prop("src",e.data("src")).data("a",1))}})}var l=e("jquery"),p=e("@tencent/im-edu-db/edu-db"),f=e("@tencent/im-edu-login/edu-login"),m=e("@tencent/im-edu-report/edu-report"),_=e("@tencent/im-group-tencent/group-tencent"),g=e("@tencent/im-edu-pay/vc"),h=e("@tencent/im-edu-pay/notify"),v=e("@tencent/im-local.data/local.data");e("edu-base"),e("@tencent/im-edu-pay/db.courseOperation"),e("@tencent/im-report.pagelocation/report.pagelocation");var y,b,k={paySucc:e("/node_modules/@tencent/im-edu-pay/paySucc.tpl_tpl")},I={};return s(),{init:function(e){y=e,b=y.param,t({courseId:b.courseId,term_id:b.term_id||0})}}});
/*!@tencent/im-edu-pay/restudy*/
;define("@tencent/im-edu-pay/restudy",function(e){function t(){function e(){var e="//ke.qq.com/user/index/index.html#cid="+s.courseId;return e+=s.term_id?"&tid="+s.term_id+"&fr=2":"&fr=2"}function t(){d.init({data:s,tmpl:u.paySucc,emailNode:"#js_pay_email",idCodeNode:"#js_id_code",idCodeBtn:"#js_id_code_btn",mobileNode:"#js_pay_mobile",submitNode:"#js_pay_submit",hadProhibit:1==s.user_notify_status,confirmOpt:{title:a,globalClass:"pay-succ",confirm:!0},onShow:function(){o(".part-form").hasClass("part-form-expand")||o("#js_pay_mobile").focus(),o("#part-expand").on("click",function(){var e=o(".part-form");o(this).text(e.hasClass("part-form-expand")?"开课提醒设置":"收起"),e.toggleClass("part-form-expand")}),o(".js-pay-continue").click(function(){window.open("/course/list","_blank"),o.Dialog.remove()}),o(".js-pay-studynow").click(function(){window.open(e(),"_blank"),o.Dialog.remove()}),o(".pay-succ").delegate("#js_addgroup_tencent, #js_discuss_tencent","click",function(){l.join(s.qunid,o.cookie.uin())}),o(".tips .tips-er-code").hover(function(){o(this).find(".tips-er-code-float").show()},function(){o(this).find(".tips-er-code-float").hide()})},submitDataFilter:function(e){return e.cid=s.courseId,e.term_id=s.term_id,e},onValidatedFail:function(){var e=o(".part-form");e.hasClass("part-form-expand")||(o("#part-expand").text("收起"),e.toggleClass("part-form-expand"))}}).show()}s.c={};var a="报名成功";s&&(s.price>0||location.href.indexOf("#sid=signup")>0)&&(2!=s.source||2===s.source&&10==s.pay_status)&&(a="购买课程"),c.notifyStatus({succ:function(e){s.user_notify_status=e.result.status,t()},err:function(){s.user_notify_status=0,t()}}),s.couponId&&report.tdw({module:"youhuiquan",action:"coursepage_realpay",ver3:s.price,ver1:s.courseId})}function a(){var e={},a={cid:s.courseId,term_id:s.term_id||0,platform:s.platform||1,from:s.from||"",pagelocation:s.pagelocation||""};2===s.source&&0===s.term_id&&(a.passcard=1);var r='<div style="height:70px;">';r+='<div style="float:left;margin-right:10px;"><img src="'+metaData.cover_url+'" width=90 heiht=50></div>',r+='<div><h3 style="font-size: 18px;line-height: 1.5;text-overflow: ellipsis;overflow: hidden;height: 28px;white-space: nowrap;">',r+=metaData.name+"-"+metaData.termObj[metaData.cur_term_id||metaData.terms[0].term_id].name,r+='</h3><p class="gray">'+metaData.agency_name+"</p></div>",r+='</div><div class="clear"></div>',r+='<label class="js-agree-restudy  f-checkbox" data-name="" data-value="1" style="line-height:26px;"> <i class="icon-checkbox" style="margin-top:4px;"></i> <span class="f-label-text" style="float: right;width: 580px;">我已阅读并同意<a target="_blank" class="nor-link js-agree-protocol" href="//ke.qq.com/proService.html">《腾讯课堂服务协议》</a>  并同意：通过非腾讯课堂平台与机构进行的支付交易，如果产生纠纷与责任，均由交易双方承担，与腾讯课堂无关。</span></label>';var u=o.modal({className:".tips-buy-course .mod-course-banner__c-light",title:"接受重学",content:r,enableYes:!1,width:700,txtYes:"接受重学",yes:function(){return n.tdw({module:"accept_restudy",action:"click",obj1:"accept_restudy_accept",ver1:s.courseId,ver2:s.term_id}),c.httpMethod({url:"/cgi-bin/user/accept_present_course"})({param:{cid:s.courseId,term_id:metaData.cur_term_id},succ:function(){c.getApplyInfo({param:{cid:s.courseId},succ:function(a){s.userInfo||(s.userInfo={});var c=a.result,n=s.userInfo;n.mobile=c.mobile,n.qq=o.cookie.uin(),n.email=c.email,n.gname=c.gname,n.token=c.token,c.gcode&&(s.qunid=c.gcode,e.discussQun=c.gcode),i.succ&&i.succ(e),2!==i.param.type&&t()},err:function(){return s.userInfo||(s.userInfo={}),s.userInfo.qq=o.cookie.uin(),i.succ&&i.succ(e),2!==i.param.type&&t(),!0}})},err:function(e){e=e||{},n.tdw({action:"get-clk",ver1:s.courseId,ver2:0});var t;switch(e.retcode){case 21678109:t="接受重学失败，请联系课程老师重新办理。";break;case 20166415:t="您已能学习本期课程，不用办理重学。请刷新本页面后选择立即学习。";break;case 1678109:t="没有可接受赠送的课程。";break;case 166415:t="已经有学习权限"}return t?o.Dialog.alert(t,{onAccept:function(){location.reload()},onClose:function(){location.reload()}}):o.Dialog.alert("服务器繁忙，请稍后再试("+e.retcode+")"),i.err&&i.err(),!0}}),!0},no:function(e){e&&n.tdw({module:"accept_restudy",action:"click",obj1:"cancel"===e.btnName?"accept_restudy_cancel":"accept_restudy_close",ver1:s.courseId,ver2:s.term_id})}});u.$.on("click",".js-agree-restudy",function(){var e=o(this);e.toggleClass("checked"),u.enableYes(e.hasClass("checked"))}).on("click",".js-agree-protocol",function(e){e.stopPropagation()}),n.tdw({module:"accept_restudy",action:"exposure",obj1:"all",ver1:s.courseId,ver2:s.term_id})}{var o=e("jquery"),c=e("@tencent/im-edu-db/edu-db"),n=e("@tencent/im-edu-report/edu-report"),r=e("@tencent/im-edu-login/edu-login");e("@tencent/im-modal/modal")}e("@tencent/im-edu-pay/db.courseOperation");var i,s,u={paySucc:e("/node_modules/@tencent/im-edu-pay/paySucc.tpl_tpl")},d=e("@tencent/im-edu-pay/notify"),l=e("@tencent/im-group-tencent/group-tencent");return{init:function(e){i=e,s=i.param,r.isLogin()?a():r.show({succ:function(){a()},close:function(){i.cancel&&i.cancel()}})}}});
/*!courseDetail/modules/apply*/
;define("courseDetail/modules/apply",function(e){function r(r){var t=v.bom.query("qz_gdt");if(t){var n={product_id:g.cid,click_id:t,source_id:g.aid,conv_time:parseInt(+new Date/1e3)},c=new Image,i=[],a=v.extend(r,n);for(var d in a)i.push(d+"="+a[d]);var u=e("@tencent/im-edu-wrap-https-proxy/index");c.src=u("http://t.gdt.qq.com/conv/src/38/conv?")+i.join("&")}}function t(){var e,r=(I.cookie&&I.cookie.getConfig?I.cookie.getConfig:{}).DATA||{},t=r.from||{},n={};for(var c in t){n=t[c];break}return e=n.ver4}function n(e,r){var n=e.param;S.getInfo().then(function(c){v.extend(n,{name:g.name,aid:g.aid,agency:g.agency,price:g.price,time:g.time||(new Date).getTime(),source:g.source,pay_status:g.pay_status,payid:g.payid,type:g.type,nick:c.nick_name||v.cookie.uin(),from_uin:+(v.bom.getHash("from_uin")||v.bom.query("from_uin"))||0,platform:1,from:t()}),r(e)})}function c(e,r){g.terms.forEach(function(t){t.term_id===e&&(t.pay_status=r,2===g.source&&(g.source=0),t.is_small_term&&(t.remain_num--,v("#js_small_term_remain").html(t.remain_num)),(4===r||5===r)&&(t.try_study=0))}),0===e&&(g.passcard_status=5,(4===r||5===r)&&g.terms.forEach(function(e){e.try_study=0}))}function i(){r({conv_type:0!==g.price?75:74})}function a(e,r){var t={courseId:g.cid,term_id:e.curTermId};e.addressId&&(t.ext_msg=JSON.stringify({addressid:e.addressId})),n({param:t,succ:function(t){c(e.curTermId,5),i(e.curTermId),r(t,e.curTermId)},err:function(){}},function(e){w.init(e)})}function d(e,r){n({param:{courseId:g.cid,term_id:e.curTermId},succ:function(t){c(e.curTermId,5),i(e.curTermId),r(t,e.curTermId)},err:function(){}},function(e){k.init(e)})}function u(e,r){n({param:{courseId:g.cid,term_id:e,ext:o()},succ:function(t){c(e,5),i(e),r(t,e)},err:function(){}},function(e){h.init(e)})}function o(){var e={},r=["appid_edu","open_ext"];return r.forEach(function(r){var t=v.bom.query(r);t&&(e[r]=t)}),e[r[0]]?e:null}function s(e,r,t){var a=e.termId,d=e.couponId,u=e.discountId,s=e.addressId,m=v.bom.query("saleToken"),p={courseId:g.cid,passcardClass:1===g.passcard&&0===a,term_id:a||0,termId:a||0,terms:g.originTerms,balance:e.balance||0};s&&(p.ext_msg=JSON.stringify({addressid:s}));var f={param:p,succ:function(e){c(a,5),i(a),t(e,a)},cancel:function(){0!==g.price&&I.tdw({action:"paid-result",ver1:"0",ver2:g.cid})},err:function(e){e=e||{},g.price&&I.tdw({action:"paid"});var r=e.orderState;if("confirm"===r&&(v.Dialog.alert(f.param.nick+'同学，因网络延迟原因，订单状态仍在确认中，可到 <a href="/myCourse/index.html#sid=signup" style="color: #3372a2;" target="_blank">课程管理</a> 页查看最终交易结果。'),c(a,2)),0!==g.price){var t={action:"paid-result",ver1:"0",ver2:g.cid};e&&(e.ec||e.retcode)&&(t.ver3=e.ec),I.tdw(t)}return!0},openFail:function(e){if(0!==g.price){var r={action:"pay-show",ver1:"0",ver2:g.cid};e&&(e.ec||e.retcode)&&(r.ver3=e.ec),e&&e.retcode&&(10002==e.retcode||10003==e.retcode)?(r.ver1=2,I.tdw(r)):I.tdw(r)}},openSucc:function(){I.tdw({action:"pay-show",ver1:"1",ver2:g.cid})},nologin:function(){q.show({succ:function(){saveState("pay",a)},close:function(){f.err({})}})}};d&&(f.param.couponId=d),u&&(f.param.discount_id=u),f.param.ext=o(),m&&(f.param.pay_channel=m),n(f,function(e){r?x.init(e):b.init(e)}),I.tdw({action:"priceterm-clk",ver1:g.cid,ver2:a})}function m(e,r){return 1===g.payid?u(e.curTermId,r):s({termId:e.curTermId,couponId:e.couId,discountId:e.discount_id,balance:e.balance||0,addressId:e.addressId},e.useBalance,r)}function p(e){var r=g&&g.terms||[];1===r.length?e({curTermId:r[0].term_id,curTermIndex:0,couId:"",discount_id:"",balance:0}):T.init(g,e)}function f(){var e=v.Deferred();return D.getCourseDiscountList({param:{cid:g.cid,term_id:window.metaData.cur_term_id},succ:function(r){g.discountList=r.result.discounts||[],e.resolve(r)},err:function(){return e.reject(),!0}}),e}function l(){var e=v.Deferred(),r={fid:g.cid+"",sid:g.cur_term_id+"",type:"course"};return D.getBalance({param:{productid:JSON.stringify(r)},succ:function(r){g.balance=r.result,e.resolve(r)},err:function(){return e.reject(),!0}}),e}function y(e){g.parsedTermTime||1!==g.passcard||(g.parsedTermTime=!0,g.terms.unshift({term_id:0,passcard:!0,passcard_status:g.passcard_status,termTimeString:"可在本课程任何一期上课"})),v.when(f(),l()).done(function(){T.init(g,function(r){r.cdkey&&c(r.curTermId,5),e(r)})}).fail(function(){return T.init(g,e),!0})}function _(e){return g=window.metaData,1===g.payid?p(e):y(e)}{var v=e("jquery"),I=e("@tencent/im-edu-report/edu-report");e("@tencent/im-local.data/local.data")}e("edu-base");var g=window.metaData,T=e("@tencent/im-edu-pay/termSelector"),w=e("@tencent/im-edu-pay/present"),h=e("@tencent/im-edu-pay/applyFree"),b=e("@tencent/im-edu-pay/applyPay"),k=e("@tencent/im-edu-pay/restudy"),x=e("@tencent/im-edu-pay/applyBalance"),D=e("@tencent/im-edu-db/edu-db"),S=e("@tencent/im-edu-user/index"),q=e("@tencent/im-edu-login/edu-login");return g||(g={}),{selectTerm:_,selectFree:p,apply:m,accept:a,restudy:d,updatePayStatus:c}});
/*!courseDetail/modules/fav*/
;define("courseDetail/modules/fav",function(e){function t(e){e.attr(u,"1")}function a(e){e.attr(u,"")}function n(e){return e.attr(u)}function r(){var e=i(this);if(!n(e)){t(e);var r=e.hasClass("favorited"),u={param:{id:d.cid},succ:function(){a(e),e.toggleClass("favorited"),d.store_num+=r?-1:1;var t=e.html();t=t.replace(/\d+/,d.store_num),e.html(t)},err:function(t){return t=t||{},1e5===t.retcode?l.show({succ:function(){c.save("fav")}}):i.Dialog.alert("服务器繁忙，请稍后再试("+t.retcode+")"),a(e),!0}};o[r?"cancelFav":"addFav"](u)}}var i=e("jquery"),o=e("@tencent/im-edu-db/edu-db");e("@tencent/im-edu-dialog/edu-dialog");var u="data-oping",d=window.metaData,c=e("courseDetail/modules/state"),l=e("@tencent/im-edu-login/edu-login");return r});
/*!@tencent/im-cosfile/cosfile*/
;define("@tencent/im-cosfile/cosfile",function(n,e,i){var a=n("jquery"),t=function(n){if(!n)return"";for(var e=5381,i=0,a=n.length;a>i;++i)e+=(e<<5)+n.charAt(i).charCodeAt();return 2147483647&e};i.exports={preview:function(n,e){var i="/cgi-bin/tools/resource4html ",d=a(".js-preview-download-form"),o=a.cookie.get("p_skey")||a.cookie.get("skey"),u=t(o);0===d.length?d=a('<form method="get" target="_blank" class="js-upload-download-form" style="display:none;"><input type="hidden" name="aid" value="'+n+'"><input type="hidden" name="res_id" value="'+e+'"><input type="hidden" name="bkn" value="'+u+'"></form>').appendTo(a(document.body)):(d.find('input[name="res_id"]').val(e),d.find('input[name="aid"]').val(n),d.find('input[name="bkn"]').val(u)),d.attr("action",i),d.submit()},download:function(n,e,i){var t="/cgi-bin/file/download",d=a(".js-upload-download-form");0===d.length?d=a('<form method="get" target="_blank" class="js-upload-download-form" style="display:none;"><input type="hidden" name="cw_id" value="'+e+'"><input type="hidden" name="cid" value="'+i+'"><input type="hidden" name="a_id" value="'+n+'"><input type="hidden" name="uin" value="'+a.cookie.uin()+'"></form>').appendTo(a(document.body)):(d.find('input[name="cw_id"]').val(e),d.find('input[name="a_id"]').val(n),d.find('input[name="cid"]').val(i),d.find('input[name="uin"]').val(a.cookie.uin())),d.attr("action",t),d.submit()}}});
/*!courseDetail/modules/file*/
;define("courseDetail/modules/file",function(i){function e(){s(".js-file-list").on("click","a",function(){if(!o){var i=s(this).data("fid"),e={};f=f||{},f.files=f.files||{},f.files.files=f.files.files||[];for(var l=0,c=f.files.files.length;c>l;l++){var d=f.files.files[l];if(Number(d.cw_id)===Number(i)){e=d;break}}return t.tdw({action:"Materials-Downloadclk",module:"course",ver1:i,ver2:e.cw_name}),n.isLogin()?i?r.isApply()||f.isReg?void a.download(f.aid,i,f.cid):s.modal.alert("请报名后再下载资料。"):s.modal.alert("没有找到该文件！"):n.show({succ:function(){location.reload()}})}}),s("#js_basic_tab").on("click",".file-list-more",function(){var i=s("#js_basic_tab");i.hasClass("file-list-showmore")?(i.removeClass("file-list-showmore"),i.find(".file-list-more span").html('更多 <i class="icon-font i-v-bottom"></i>')):(i.addClass("file-list-showmore"),i.find(".file-list-more span").html('收起 <i class="icon-font i-v-top"></i>'))})}function l(){o=s.bom.query("preview")>>0===1,e()}var o,s=i("jquery"),t=(i("@tencent/im-modal/modal"),i("@tencent/im-edu-report/edu-report")),n=i("@tencent/im-edu-login/edu-login"),a=i("@tencent/im-cosfile/cosfile"),r=i("courseDetail/modules/term"),f=window.metaData;return{init:l}});
/*!/node_modules/@tencent/im-edu-pay-coursepkg/template/packageCourse.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay-coursepkg/template/packageCourse.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return _$out_.push('<div class="pkg-info-base"><img class="pkg-info-img" width="90" height="50" src="',it.cover_url,'90" alt="" onerror="javascript:this.src=\'//9.url.cn/edu/common/img/src/img-err2.png\';this.onerror=null;"><h3 class="pkg-info-title">',it.name,'</h3><a class="pkg-info-agency" title="',it.agency_name,'" target="_blank" href="//',it.agency_domain,'">',it.agency_name,"</a></div>"),it.address_state&&(_$out_.push(' <div class="apply-box-address-con"> '),_$out_.push(1!=it.must_fill_mailing?' <div id="applyBoxNeedbooks" class="checkbox f-checkbox checked" name="type"> <i class="icon-checkbox"></i> <label>该课程有教材，我需要接收</label> </div> ':" <label>该课程有教材，请填写收获地址</label> "),_$out_.push(' <div id="applyBoxAddressForm" class="apply-box-address-form"> '),it.addressData&&_$out_.push(' <div class="apply-box-address-item"> <span>寄至</span> <span class="apply-box-address-name">',it.addressData.receiver,'</span> <span class="apply-box-address-phone">',it.addressData.phone,'</span> <span class="apply-box-address-detail">',it.addressData.province,"",it.addressData.city||"","",it.addressData.district||"","",it.addressData.address||"",'</span> <a href="javascript:;" class="js-edit-address">编辑</a> </div> '),_$out_.push(' <div class="address-form" '),it.addressData&&_$out_.push('style="display: none;"'),_$out_.push('> <div class="form-group"> <label>收件人</label><input name="receiver" type="text" maxlength="36" /> </div> <div class="form-group"> <label>手机号</label><input name="phone" type="text" maxlength="11" /> </div> <div class="form-group form-region-group"> <label>所在地区</label><span class="select-wrap"><select> <option value="">省</option> </select><!--[if lte IE 9]><!--><i></i><!--<![endif]--></span> <span class="select-wrap"><select> <option value="">市</option> </select><!--[if lte IE 9]><!--><i></i><!--<![endif]--></span> <span class="select-wrap"><select> <option value="">区</option> </select><!--[if lte IE 9]><!--><i></i><!--<![endif]--></span> </div> <div class="form-group form-textarea-field"> <label>详细地址</label><textarea name="address" maxlength="100"></textarea> </div> </div> </div> </div>')),_$out_.push('<div class="pkg-info-price js-pkg-price"></div><label class="js-pay-protocol pay-protocol f-checkbox checked" data-name="" data-value="1"> <i class="icon-checkbox"></i> <span class="f-label-text">同意<a target="_blank" class="nor-link" href="//ke.qq.com/proService.html">腾讯课堂服务协议</a> <span class="js-jd-protocol" style="display:none"><span style="color:#999;margin:0 5px;">|</span><a target="_blank" class="nor-link" href="/faq.html?id=7">京东白条支付服务</a></span> </span></label><div class="mod-course-banner_row clearfix js-jdpay-ctn" style="display:none;"> <div class="mod-course-banner_col1">分期</div> <div class="mod-course-banner_col2"> <div class="mod-course-staging-btn selected js-staging-btn">不分期</div> <div class="mod-course-staging-btn js-staging-btn" data-staging="jd"><i class="mod-jd-icon"></i>京东支付</div> </div> <p class="staging-tips js-staging-tips" style="display:none">旗下京东白条支持分期购买，登录后如无“白条”选项，请先<a href="https://help.jd.com/user/issue/197-257.html" target="_blank">激活</a></p></div>'),_$out_.join("")}}});
/*!/node_modules/@tencent/im-edu-pay-coursepkg/template/packagePrice.tpl_tpl*/
;define("/node_modules/@tencent/im-edu-pay-coursepkg/template/packagePrice.tpl_tpl",function(require,exports,module){return function(it,opt){with(it=it||{}){var _$out_=[];return price?(_$out_.push('<p class="pkg-price'),balanceUsed||couponPrice||_$out_.push(" pkg-price--pay"),_$out_.push('"><span>课程价格</span><i>',$.render.formatPrice(price),'</i><!--<span class="pkg-price-tips">（系列课暂不支持退款）</span>--></p>')):_$out_.push('<p class="pkg-price"><span>价格</span><i class="free">免费</i></p>'),_$out_.push("",function(it,opt){function getCouponStr(e){if(!e)return"不使用优惠券";var t=parseInt(e.price/100),i=e.elem&&e.elem.is_suit_all,p="省"+t+"元：",s=e.limit&&e.limit.min_cost/100||null;return p+=i?"满"+s+"元减"+t+"元":t+"元优惠券",1==e.discount_type&&(p="限时优惠"),p}with(it=it||{}){var _$out_=[];if("undefined"!=typeof discountListFilted&&discountListFilted.length>0){var couponLength=discountListFilted.length;_$out_.push(' <span class="pkg-discount">优惠</span> <div class="diy-select-area pkg-dropdown"> <a href="javascript:;" class="diy-select js-coupon-tag" data-select="pkg_coupon"><i class="text">',getCouponStr(discountListFilted[couponIndex]),'</i><span><b></b></span></a> <ul class="diy-optgroud js-coupon-list" style="overflow-y: auto;height: 81px;"> ');for(var i=0;couponLength>i;i++)_$out_.push(' <li class="diy-option',i==couponIndex?" selected":"",'" data-value="',i,'"><a href="javascript:;">',getCouponStr(discountListFilted[i]),"</a></li> ");_$out_.push(' <li class="diy-option',-1==discountListFilted.length?" selected":"",'" data-value="-1" style="border-bottom-width: 0px;"><a href="javascript:;">不使用优惠券</a></li> </ul> </div>')}return _$out_.join("")}}(it,opt),""),(balanceUsed||couponPrice)&&(balanceUsed&&_$out_.push('<p class="pkg-price pkg-price--balance">余额抵扣<i>',$.render.formatPrice(balanceUsed,{noYen:!0}),"</i></p>"),_$out_.push('<p class="pkg-price pkg-price--pay">支付价格<i>',$.render.formatPrice(priceAfterBalance,{showFreeNumber:!0}),"</i></p>")),_$out_.join("")}}});
/*!@tencent/im-jquery.dropdown/jquery.dropdown*/
;define("@tencent/im-jquery.dropdown/jquery.dropdown",function(e){function t(e){return e.hasClass("diy-select-checkbox")}function i(e){e.each(function(){var e=a(this);if(e.hasClass("diy-select-on")){e.removeClass("diy-select-on"),e.find(".diy-optgroud").hide(),e.find(".diy-option-save").hide();var t=e.data("pattern");t&&e.trigger("change:"+t)}})}function o(e,i,o){if(t(e)){var s=[[],[]],d=e.find(".diy-option-all");return e.find(".opt-checked").not(".diy-option-all").each(function(){var e=a(this);s[0].push(e.data("value")),s[1].push(e.find("a,span").eq(0).text())}),[s[0],d.hasClass("opt-checked")?d.find("a,span").eq(0).text():s[1].join("，")]}return[i.data("value"),i.find("a,span").eq(0)[o]()]}var a=e("jquery"),s=!1;a(document).on("keydown",function(e){13===e.keyCode&&(s=!0)}).on("click",function(){i(a(".diy-select-area"))}).on("click",".diy-select, .diy-select-toggle",function(e){e.stopPropagation(),e.preventDefault();var o=a(this);if(!o.attr("disabled")){var s=o.closest(".diy-select-area");if(!s.attr("disabled")){var d=s.data("pattern");i(a(".diy-select-on").not(s));var n,l=s.find(".diy-optgroud"),c=s.find(".diy-select");if(l.length>0){if(s.hasClass("diy-select-on"))return i(s);s.addClass("diy-select-on"),n=c.data("select"),n&&s.trigger("showopt:"+n),l.show();var r=0,p=l.find("li");p.each(function(){"none"!==a(this).css("display")&&r++});var h=a(window),f=h.height(),g=s.data("position"),y={};if("fixed"===g){var u=c.offset();y={position:"fixed",top:c.height()+u.top-h.scrollTop(),left:u.left}}var v=l.offset().top-h.scrollTop()+39,C=f-v,k=parseInt((C-9)/p.eq(0).height()),x=l.data("maxrows")||10;k>x?k=x:1>k&&(k=1),l.css(r>k?a.extend({maxHeight:k*p.eq(0).height()+9,overflowY:"auto",height:"auto"},y):a.extend({height:r*(p.eq(0).height()+1)-1,overflowY:"hidden"},y)),!!window.ActiveXObject&&!window.XMLHttpRequest&&r>k&&l.css({height:k*p.eq(0).height()+9,overflowY:"auto"}),p.eq(-1).css("borderBottom",0),t(s)&&s.find(".diy-option-save").css("top",l.height()+39).show(),a(document).trigger("open:"+d)}else n=o.data("select"),n&&o.trigger("nooption:"+n)}}}).on("click",".diy-select-ipt, .diy-optgroud .diy-option a",function(e){e.preventDefault()}).on("click init",".diy-optgroud .diy-option",function(e){e.stopPropagation(),e.preventDefault();var i=a(this),d=i.parents(".diy-select-area"),n=d.find(".diy-optgroud"),l=d.find(".diy-select"),c=d.find(".diy-select-ipt"),r=d.find(".text"),p=c.add(r).eq(0),h=t(d);h?(i.toggleClass("opt-checked"),i.hasClass("diy-option-all")?i.hasClass("opt-checked")?i.siblings("li").addClass("opt-checked"):i.siblings("li").removeClass("opt-checked"):(i.hasClass("opt-checked")||d.find(".diy-option-all").removeClass("opt-checked"),d.find(".opt-checked").not(".diy-option-all").length===d.find(".diy-option").not(".diy-option-all").length&&d.find(".diy-option-all").addClass("opt-checked"))):(d.removeClass("diy-select-on"),i.addClass("selected").siblings("li").removeClass("selected"),n.hide(),d.find(".diy-option-save").hide());var f=!1,g="",y="",u="",v="",C=[],k=c.length>0;if(p.length>0){var x=r.data("set");x||(x="text"),g=k?p.val():r.text(),y=p.data("value"),C=o(d,i,x),v=C[0],u=C[1],f=v!==y,k?c.data("value",v).val(u):(h?0===v.length?(u=r.data("tips"),r.addClass("text-tip")):r.removeClass("text-tip"):i.hasClass("diy-option-tips")?r.addClass("text-tip"):r.removeClass("text-tip"),r.data("value",v)[x](u))}else u=i.text(),f=u!=l.text(),l.html(u+"<span><b></b></span>");"click"===e.type&&s&&l.focus(),s=!1;var w=l.data("select");w&&l.trigger("change:"+w,[u,v,g,y,e.type])})});
/*!@tencent/im-edu-pay-coursepkg/edu-pay-coursepkg*/
;define("@tencent/im-edu-pay-coursepkg/edu-pay-coursepkg",function(e){function t(){return O.isLogin()?!0:(O.show({succ:function(){location.reload()}}),!1)}function a(){var e,t=(I.cookie&&I.cookie.getConfig?I.cookie.getConfig:{}).DATA||{},a=t.from||{},r={};for(var n in a){r=a[n];break}return e=r.ver4}function r(e){var t=L[e];return t?(D.modal.alert(t),!0):!1}function n(e,t){var r=e.param;F.getInfo().then(function(n){D.extend(r,{name:w.name,aid:w.aid,agency:w.agency,price:w.price,time:w.time||(new Date).getTime(),source:w.source,pay_status:w.pay_status,payid:2,type:w.type,nick:n.nick_name||D.cookie.uin(),from_uin:+(D.bom.getHash("from_uin")||D.bom.query("from_uin"))||0,platform:1,from:a(),pagelocation:""}),t(e)})}function o(){var e={};return x.is_vip_course&&x.is_user_vip&&(e.discount=x.vip_discount/100),e}function i(e){var t=location.protocol+"//ke.qq.com/applySuccess.html?";t+="pkg_id="+e.pkg_id,t=t+"&platform="+e.platform+"&pagelocation="+e.pagelocation+"&apply_succ=1",location.href=t}function c(){var e={pkg_id:C,from_uin:+(D.bom.getHash("from_uin")||D.bom.query("from_uin"))||0,platform:1,from:a(),pagelocation:"",ext:JSON.stringify(U.ext)},t={param:e,succ:function(){U.onBuySuccess(),i(e)},err:function(e){var t=e&&e.retcode||-1;return r(t)}};P.signFreePackage(t)}function s(e,t,a){var r={param:{packageId:C,aid:x.aid,type:"course_package",balance:M.balanceUsed,pay_channel:U.pay_channel,ext:U.ext,ext_msg:a?JSON.stringify({addressid:a}):""},succ:function(){I.tdw({action:"Grouppay-success",ver1:C,ver2:w.aid,ver3:w.price/100}),BJ_REPORT.debug({msg:"系列课付款成功次数",ext:{msid:2106863}}),U.onBuySuccess()},cancel:function(){0!==w.price&&I.tdw({action:"paid-result",ver1:"0",ver2:C})},err:function(e){e=e||{},w.price&&I.tdw({action:"paid"});var t=e.orderState;if("confirm"===t&&D.Dialog.alert(r.param.nick+'同学，因网络延迟原因，订单状态仍在确认中，可到 <a href="/myCourse/index.html#sid=signup" style="color: #3372a2;" target="_blank">课程管理</a> 页查看最终交易结果。'),0!==w.price){var a={action:"paid-result",ver1:"0",ver2:C};e&&(e.ec||e.retcode)&&(a.ver3=e.ec),I.tdw(a)}return!0},openFail:function(e){if(0!==w.price){var t={action:"pay-show",ver1:"0",ver2:C};e&&(e.ec||e.retcode)&&(t.ver3=e.ec),e&&e.retcode&&(10002==e.retcode||10003==e.retcode)?(t.ver1=2,I.tdw(t)):I.tdw(t)}},openSucc:function(){I.tdw({action:"pay-show",ver1:"1",ver2:C})}};M.couponPrice&&(r.param.couponId=H[M.couponIndex].cou_id),BJ_REPORT.debug({msg:"系列课去付款次数",ext:{msid:2106862}}),n(r,function(r){if(!M.priceAfterBalance&&M.balanceUsed)J.balance.init(r);else{var n=D(".js-package-dialog .js-modal-yes");if(n.hasClass("btn-disabled")||n.hasClass("disabled"))return!0;var o=D(".js-package-dialog .js-modal-yes");if(Y){var i,c,s={fid:w.id+"",type:"course_package"},d={productid:JSON.stringify(s),pay_method:"jd",source:0,call_back_url:encodeURIComponent("https://ke.qq.com/applySuccess.html?pkg_id="+w.id+"&pay_succ=1&pf=jd")},u=w.couponListFilter||H||[],l=w.balance||e||{},p={};-1!==t&&u[t]&&(i=u[t].cou_id,c=u[t].discount_id,i&&(p.cou_id=i),c&&(p.discount_id=c)),l.red_envelope_balance&&(p.redenvelope_price=parseInt(l.red_envelope_balance)),"{}"!==JSON.stringify(p)&&(d.discountinfo=JSON.stringify(p)),a&&(d.ext_msg=JSON.stringify({addressid:a}));var f=$.getInfo();d.order_report=JSON.stringify(f),P.cgiHttp({url:"/cgi-bin/pay_access/paytoken",param:d,succ:function(e){var t=e.result.jd_info||{},a=t.url_param,r=a.split("&"),n={};r.forEach(function(e){var t=e.indexOf("=");n[e.substr(0,t)]=e.substr(t+1,e.length)});var i="js-jd-form",c=D("."+i);0!==c.length?$form=c[0]:($form=document.createElement("form"),$form.className=i,document.getElementsByTagName("body")[0].appendChild($form)),$form.innerHTML="",$form.setAttribute("action",t.pc_url),$form.setAttribute("method","post");for(var s in n){var d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name",s),d.value=n[s],$form.appendChild(d)}o.data("errcode",0),$form.submit()},err:function(e){var t=e.retcode;o.data("errcode",t);var a;return a=q[t],a||(a="服务器繁忙，请稍后再试("+t+")"),D.modal.alert(a,{onAccept:function(){location.reload()},onClose:function(){location.reload()}}),!0}});var m="block"===D(".js-jdpay-ctn").css("display");if(m){var g={module:"Y-MQ-course",ver3:w.id,obj1:D(".js-mod-course-banner-pay .fontsize-22").html()};g.action=useJD?"pay_choose_jd":"pay_choose_full",I.tdw(g)}}else J.pay.init(r)}})}function d(e){for(var t=[],a={},r=0;r<e.length;r++){a=e[r];var a=e[r],n=a.limit&&a.limit&&a.limit.min_cost,o=a.elem&&a.elem.is_suit_all||!1;10===a.type?t.push(a):o?n<=w.price&&t.push(a):a.price<=w.price/2&&t.push(a)}return t}function u(){if(I.tdw({action:"pay-clk",module:"CourseGroup",ver1:C,ver2:w.aid,ver3:w.price/100}),t()){if(w.price){var e=D(".js-coupon-list .diy-option.selected").data("value");return b(function(t){P.checkPackageConflict({param:{pkg_id:C},succ:function(a){var r,n,o,i="您已购买过系列课内的";if(o=a.result&&a.result.pay_status,8===o||9===o)return void D.modal.alert("该系列课正在退款中，无法重新购买");if(a.result&&a.result.signed_course&&(r=a.result.signed_course.length)>0){for(var c=0;r>c;c++)n=a.result.signed_course[c],i+="《"+n.name+"》",c!=r-1&&(i+="、");i+="课 , 请问您确认购买 "+w.name+" 系列课吗？",D.modal.confirm(i,{title:"温馨提醒",txtYes:"继续购买"}).yes(function(){s(R,e,t)})}else s(R,e,t)},err:function(){return s(R,e,t),!0}})})}c()}}function l(){var e=D.modal({title:w.price?"购买系列课":"报名系列课",width:650,className:"package-dialog js-package-dialog",content:S(D.extend(w,{agency_name:x.agency_name}),{getDiscountOpts:o}),txtYes:w.price?"去付款":"去报名",yes:u});if(g(0),h(e),k(),w.address_state){var t=D.extend({},w.addressData);t.container="#applyBoxAddressForm",A=new T(t),D(".apply-box-address-detail").each(function(){var e=D(this),t=e.html(),a=E.substring_plus(t,320,2,14);t!==a&&e.html(a)})}}function p(){var e=D.Deferred(),t={fid:C+"",tid:x.aid+"",type:"course_package"};return P.getBalance({param:{productid:JSON.stringify(t)},succ:function(t){var a=t&&t.result&&t.result.red_envelope_balance||0;e.resolve(a)},err:function(){e.resolve(0)}}),e}function f(){var e=D.Deferred();return P.getDiscount({param:{pkg_id:C},succ:function(t){var a=t&&t.result&&t.result.coupon_info||[];e.resolve(a)},err:function(){e.resolve([])}}),e}function m(){var e=D.Deferred();return P.getUserAddress({succ:function(t){{var a;t&&t.result&&t.result.coupon_info||[]}t&&t.result&&0==t.retcode&&(a=t.result.user_address||[],a=a[0]),e.resolve(a)},err:function(){e.resolve([])}}),e}function g(e){var t=H[e],a=t&&t.price||0,r=w.price-a;r=r>2?r:2;var n=Math.min(R,r),o=r-n;M={price:w.price,balanceUsed:n,couponPrice:a,priceAfterCoupon:r,priceAfterBalance:o,discountListFilted:H,couponIndex:e},(!B||B.length)&&(B=D(".js-pkg-price")),B.html(N(M));var i=parseInt(D.bom.query("jdlimit")),c=15e4;isNaN(i)||(c=i),c>o?(D(".js-jdpay-ctn").hide(),D(".js-jd-protocol").hide()):(D(".js-jdpay-ctn").show(),Y&&D(".js-jd-protocol").show())}function y(e){g(e)}function v(e){w.price?D.when(f(),p(),m()).done(function(t,a,r){H=d(t),R=a,w.addressData=r,e&&e()}):e&&e({})}function _(e){e.find(".js-pay-protocol").hasClass("checked")?e.find(".js-modal-yes").removeClass("btn-disabled"):e.find(".js-modal-yes").addClass("btn-disabled")}function h(e){var t=D(".js-package-dialog");t.on("click",".js-pay-protocol",function(e){D(e.target).hasClass("nor-link")||(D(this).toggleClass("checked"),_(t))}),t.on("click","#applyBoxNeedbooks",function(){var e=D(this).toggleClass("checked");e.hasClass("checked")?D("#applyBoxAddressForm").show():D("#applyBoxAddressForm").hide()}).on("click",".js-edit-address",function(){D(this).closest(".apply-box-address-item").hide(),D("#applyBoxAddressForm").find(".address-form").show(),e.update(),I.tdw({module:"pay_window",action:"click",obj1:"edit_address",obj2:1})}),D(document).on("change:pkg_coupon",function(e,t,a){y(a)})}function k(){Y=!1;var e=D(".js-package-dialog .js-staging-btn"),t=D(".js-package-dialog .js-modal-yes"),a=D(".js-package-dialog .js-staging-tips"),r=D(".js-package-dialog .js-jd-protocol");e.click(function(){D(".js-package-dialog .js-staging-btn.selected").removeClass("selected"),D(this).addClass("selected"),"jd"===D(this).data("staging")?(Y=!0,t.data("usejd",!0),a.show(),r.show()):(Y=!1,a.hide(),r.hide(),t.data("usejd",!1))})}function b(e){if(!A||1!=w.must_fill_mailing&&!D("#applyBoxNeedbooks").hasClass("checked"))return e();var t=w.addressData,a=t&&t.id;if(!D("#applyBoxAddressForm").is(":visible"))return e(a);if(t=A.getValue()){var r="add_user_address";return a&&(r="modify_user_address",t.id=a),P.cgiHttp({url:"/cgi-bin/user/"+r,type:"POST",param:t,succ:function(r){r=r&&r.result,r&&r.id&&(a=t.id=r.id),w.addressData=t,e(a)}}),!0}return!1}function j(e){D.extend(U,e.opt),x=e.rawData,w=e.rawData.course_package||e.rawData,C=w.id,v(l)}var w,x,C,B,A,D=e("jquery"),S=e("/node_modules/@tencent/im-edu-pay-coursepkg/template/packageCourse.tpl_tpl"),N=e("/node_modules/@tencent/im-edu-pay-coursepkg/template/packagePrice.tpl_tpl"),O=e("@tencent/im-edu-login/edu-login"),J={pay:e("@tencent/im-edu-pay/applyPay"),balance:e("@tencent/im-edu-pay/applyBalance")},q=e("@tencent/im-edu-pay/errWordings"),F=e("@tencent/im-edu-user/index"),I=e("@tencent/im-edu-report/edu-report"),P=e("@tencent/im-edu-pay-coursepkg/db.courseOperation"),$=e("@tencent/im-order-info/index"),T=(e("@tencent/im-util.bom/util.bom"),e("@tencent/im-edu-pay/address/index")),E=e("@tencent/im-str-ellipsis/str-ellipsis"),H=[],R=0,U={onBuySuccess:function(){}},L={900010:"你已将该课程包内全部课程取消报名，若需要再次报名，请至单门课程的详情页报名。"},M={},Y=!1;return e("@tencent/im-edu-render/edu-render"),e("@tencent/im-jquery.dropdown/jquery.dropdown"),{init:j}});
/*!@tencent/im-edu-pay-coursepkg/index*/
;define("@tencent/im-edu-pay-coursepkg/index",function(e,n,p){var u=e("@tencent/im-edu-pay-coursepkg/edu-pay-coursepkg");p.exports=u});
/*!courseDetail/mod.main.live*/
;define("courseDetail/mod.main.live",function(e){function t(e,t){var i;return function(){var n=arguments,a=this;i&&clearTimeout(i),i=setTimeout(function(){e.apply(a,n)},t)}}function i(){if(kt.scrollTop()>=E("#js_tab").offset().top){if(ht)return;ht=!0,wt.removeClass("hide")}else{if(!ht)return;ht=!1,wt.addClass("hide")}}function n(e,t){"js_basic_tab"===e&&h("summary-clk"),"js_dir_tab"===e&&h("catalogue-clk");var i=et.find(".tabs-content").addClass("hide").filter("#"+e).removeClass("hide"),n=E("#js_tab").offset().top,a=kt.scrollTop(),c=E(".js_tab");a=a>n?n:a,c.find(".tabs-tt").removeClass("active").filter('[ref="'+e+'"]').addClass("active"),"js_comment_tab"===e&&at.init(t);var o=et.height(),r=kt.outerHeight();if(r>o-a){var s=r-(o-a);i.css("min-height",s+i.outerHeight()+"px")}kt.scrollTop(a),j()}function a(e){return G.isLogin()?!0:(G.show({succ:function(){st.save(e)}}),!1)}function c(){if(!E(this).hasClass("disabled")&&!vt&&(h({action:"Price-clk",obj1:2===_t.payid?2:1}),a("dialog"))){var e=function(){rt.selectTerm(function(e){a("pay")&&(2===_t.payid&&h("pay-clk"),e.cdkey?u({},e.curTermId):rt.apply(e,function(t){u(t,e.curTermId)}))})};J.getInfo().then(function(){e()})}}function o(){E(this).hasClass("disabled")||vt||a()&&rt.accept({curTermId:metaData.cur_term_id,curTermIndex:0,couId:"",discount_id:"",balance:0},function(e){u(e,metaData.curTermId)})}function r(){E(this).hasClass("disabled")||vt||a()&&rt.restudy({curTermId:metaData.cur_term_id,curTermIndex:0,couId:"",discount_id:"",balance:0},function(e){u(e,metaData.cur_term_id)})}function s(){if(!E(this).hasClass("disabled")&&!vt&&a()){var e=E(this),t={aid:_t.aid,id:_t.cid,rate:+E.bom.query("dis_ratio"),id_type:1};K.render(t,{beforeRender:function(){e.text("生成中...")},afterRender:function(){e.text("我要分销")}}),F.tdw({action:"click",obj1:"to_distribution"})}}function l(){var e=E(this).data("termid"),t=0===e;t&&F.tdw({module:"banjitong",action:"calss_tabclk",ver1:_t.cid}),nt.changeTerm(e,0===parseInt(e,10))}function d(){var e,t=document.referrer,i={},n=/ke.qq.com\/course\/list/.test(t),a=location.pathname.split("/"),c=a[a.length-1],o=!1;if(n){var r=X.get("course_report_"+c);r&&(i=JSON.parse(r),o=!0)}if(!o){e=F.getPageLocation("course");for(var s=0,l=e.length;l>s;++s){var d=e[s];d.cid==bt&&(i=d.ext)}}return i}function u(e,t){(t||0===t)&&nt.changeTerm(t);var i=d();window.BJ_REPORT&&BJ_REPORT.debug({msg:"course-apply-pv",ext:{msid:1===_t.payid?2508101:2508102}}),B.tdw({action:1===_t.payid?"freesuccess-old":"paysuccess-old",module:"course",uin:E.cookie.uin(),opername:"Edu"},!0),h(E.extend({action:1===_t.payid?"freesuccess-clk":"paysuccess-clk",ver2:t,auin:yt||"",obj2:1==$?"gray":"",ver3:E.bom.getHash("webcourse")?"inclass":"",uin:E.cookie.uin(),path:mt()},i),!0),_t.isReg=!0,E(".js-file-list i").removeClass("disabled"),E(".js-apply-num").html((E(".js-apply-num").html()>>0)+1)}function p(e){for(var t=_t.terms,i=0;i<t.length;i++)if(t[i].term_id===e)return t[i];return null}function m(e){var t=E("#js-weigui-tip"),i=256===(256&e.course_bit_flag),n=E.trim(E(".js-apply-btn").eq(0).text()),a=!0;("立即报名"===n||"立即购买"===n)&&(a=!1);var c=i&&!a;c&&(t.removeClass("hide"),E(".js-apply-btn").addClass("disabled"),E(".js-package-buy").addClass("disabled"),E(".package-info-show").hide())}function f(){if(et.on("click",".js-term-li, .js-term-item",l).on("click",".js-apply-btn-apply",c).on("click",".js-apply-btn-accept",o).on("click",".js-apply-btn-restudy",r).on("click",".js-apply-btn-sale",s).on("click",".js-apply-btn-pkg-accept",function(){var e,t=E(this),i=_t.cur_term_id;t.hasClass("loading")||(t.addClass("loading"),e=i?p(i).can_accept_pkgid:_t.can_accept_pkgid_passcard,Y.accept({name:_t.name,pkgId:e,termId:i,cid:bt},{onAcceptSuccess:function(){E.modal.success("接受赠送成功").yes(function(){location.reload()}).no(function(){location.reload()})},onAcceptError:function(){t.removeClass("loading")}}))}).on("click",".js-teacher-name",function(){}).on("click",".js-package-buy",function(){D(E(this))}).on("click",".js-package-tab",function(){R(E(this))}).on("click",".js-agency-name",function(){h(1===_t.agency_type?"Agency-clk":"Teacher-clk")}).on("click",".js-apply-btn-task",function(){if(!vt&&!E(this).hasClass("disabled"))if(h("Class-clk"),E(this).hasClass("js-admin")){var e=_t.cur_term_id?"#tid="+_t.cur_term_id+"&fr=2":"#fr=2";window.open("/user/tasks/index.html?cid="+bt+e,"_blank")}else{var e=_t.cur_term_id?"&tid="+_t.cur_term_id:"";window.open("/user/index/index.html#cid="+bt+e,"_blank")}}).on("click",".js_tab .tabs-tt",function(e,t){n(E(this).attr("ref"),t)}).on("click",".package-info-show",function(){h({action:"CourseGroup_detail_clk",ver2:_t.aid})}).on("click",".js-advice-btn",function(e){E(e.target).hasClass("btn-advice-qq")&&E(document).trigger("show_private_msg"),h({action:"consult-clk"})}).on("click",".js-btn-advice-tel",function(e){e.stopPropagation();var t=E(this).data("tel");E.modal.success("请拨打机构咨询电话："+t,{title:"提示"})}).on("click",".js-videoreplay",function(){h({action:"Click_ReplayTag",ver1:_t.cid,ver2:_t.cur_term_id})}),E(document).on("click",".js-apply-btn-instalment",function(){if(!E(this).hasClass("disabled")){var e=E(".js-installment-tips");e.length&&e.remove(),h(E.extend({module:"course_installment",action:"pay",ver3:_t.cur_installment_seq},d()));var t=_t.cid,i=(_t.name,_t.cur_term_id);Z(t,i)}}),E("#js_fav").click(function(e){if(!vt){lt.call(this,e);var t=E(this).hasClass("favorited");h(t?"cancelcollect-clk":E.extend({action:"Collect-clk"},d()))}}),kt.on("scroll",t(i,100)),!vt){var e=U.decode(_t.name);E("#js_share_panel").share({content:"我在腾讯课堂学习“"+e+"”课程哟，也来看看吧~。好好学习，Day Day Up！",pic:location.protocol+_t.cover_url,url:location+"&from_uin="+E.cookie.uin(),title:e,summary:U.decode(_t.summary)})}i(),vt?E("#js_enter_hall").removeClass("btn-disabled"):(E(".js-group-entrance").each(function(e,t){t=E(t),E(t).attr("href",E.render.url.discuss(bt,t.data("gc"))),E(t).click(_)}),E("#js_contact_expand").click(function(){E("#js_contact_list").toggleClass("mod-side-bar-right__op_open")}),E(window).on("beforeunload",function(){F.tdw({action:"time",ver2:parseInt(((new Date).getTime()-it)/1e3)},!0)}),g(_t))}function _(e){E.bom.checkPlatform()||e.preventDefault(),h("Qun-clk")}function g(e){var t=e.agency_step_flag;6!=t&&7!=t&&E("#js_enter_hall").removeClass("btn-disabled").click(function(){E.render.url.enterAgencyHall(this),F.tdw({action:"Hall-clk",obj3:_t.aid})})}function v(e){e.module="course",e.ver10=G&&G.isLogin&&G.isLogin()?"0":"1",E.initReport(e)}function h(e,t){if(!vt){"string"==typeof e&&(e={action:e});var i=E.bom.query("livecid");i&&(e.var3=i),F.tdw(E.extend({ver1:_t?_t.cid||E.bom.query("course_id"):E.bom.query("course_id"),module:"course"},e)),t&&F.toreport()}}function b(){var e=_t.terms;if(e&&e[0]){var t=e[0].sub_bgtime,i=!0;_t.lastestTerm=e[0],_t.originTerms=e.slice();for(var n=0;n<e.length;n++)4!==e[n].course_state&&(i=!1),1===e[n].hidden?(e.splice(n,1),n--):(e[n].classIndex=n,e[n].sub_bgtime<t&&(t=e[n].sub_bgtime,_t.lastestTerm=e[n]));_t.termsAllOver=i}}function y(){if(window.performance){var t=performance.timing;TRecord.push("client_receive_delay",T[0]+10*(t.responseEnd-t.responseStart))}TRecord.push("vm_compile_time",T[0]+10*_t.complier_delay),E(window).load(function(){TRecord.report(["page_start","page_css_ready","page_js_ready","page_main_start","page_main_end","page_render_end","page_render_fp","inline_script_run_time","client_receive_delay","vm_compile_time"],{delay:1e3,isd:{client_receive_delay:27,vm_compile_time:28}}),J.getInfo().then(function(e){var t=e,i="";t.is_login||(t=N.get()),i=t.isPlatRole?"flag1=7832&flag2=39&flag3=88":"flag1=7832&flag2=39&flag3=89",TRecord.report(["page_start","page_css_ready","page_js_ready","page_main_start","page_main_end","page_render_fp","client_receive_delay","inline_script_run_time","vm_compile_time"],{delay:1e3,isd:{inline_script_run_time:9,client_receive_delay:10,vm_compile_time:11},url:i})})}),yt=+("0x"+E.bom.getHash("tuin")).toString(10),h({action:"Exposure",obj2:1==$?"gray":"",auin:yt||"",ver2:E.bom.query("saleToken")?2:1});var i=e("@tencent/im-edu-wrap-https-proxy/index"),n=i("http://pingjs.qq.com/tcss.ping.js","https://pingjs.qq.com/tcss.ping.https.js");E.loadScript(n,function(){"function"==typeof window.pgvMain&&window.pgvMain()}),1===_t.passcard&&!vt&&F.tdw({module:"banjitong",action:"calss_view",ver1:_t.cid})}function k(){var e=E.bom.query("from_plane"),t=_t.cur_term_id,i=E(".js-chapter-list .js-expr-live-link span"),a=E(".js-chapter-list .js-live-on"),c="",o=!1;if(e&&t&&!ft.isWeixinUser())if(F.tdw({action:"trailticket-open",ver1:bt,ver2:t}),E(_t.terms).each(function(e,i){i.term_id==t&&(o=i.is_applied,c=i.room_url)}),i[0]||a&&o){if(!G.isLogin())return void G.show({succ:function(){location.reload()}});if(i[0])E(i[0]).click();else if(""!==c){var r=E('<a href="'+c+'" data-target="'+c+'">手动进入</a>');E.render.url.liveForOpenRoom(r,!0)}F.tdw({action:"trailticket-use",ver1:bt,ver2:t}),o||J.getInfo().then(function(e){O.record_get_expr_ticket({param:{uin:E.cookie.uin(),nick:e.nick_name,term_id:t},succ:function(){},err:function(){return!0}})})}else o||(E.modal.alert("目前无正在直播的可试听任务"),setTimeout(function(){n("js_dir_tab",{fromHash:!1}),E(window).scrollTop(E("#js_tab").offset().top)},0))}function j(){vt&&E("a").attr("href","javascript:void(0);").attr("target","_self")}function w(){E(".js-teacher-intro").each(function(){var e=E(this),t=e.html(),i=pt.substring_plus(t,270,3,14);t!==i&&e.html(i)})}function C(){E(document).on("barReady",function(){var e=E("#js-qrcode-container");e.addClass("item-hover-tips__show").addClass("qr-code-detail")})}function x(){E.get("//7.url.cn/edu/webcourse/swf/preload_path.swf",function(e){try{var t=E.parseJSON(e);E(t).each(function(e,t){var i=new Image;i.src=String(t)})}catch(i){}})}function q(){E(".js-item-num").each(function(){var e=parseInt(E(this).attr("data-num"));0!=e&&(e>1e7?e=Math.floor(e/1e7)+"千万":e>1e6?e=Math.floor(e/1e6)+"百万":e>1e4&&(e=Math.floor(e/1e4)+"万"),E(this).html(e))})}function D(e){if(h({action:"CourseGroup_pay_clk",ver2:_t.aid}),!e.hasClass("disabled")&&!vt&&a()){var t=_t.course_package&&_t.course_package.terms[0].term_id,i=_t.course_package&&_t.course_package.id,n={onBuySuccess:function(){rt.updatePayStatus(t,5),nt.changeTerm(t),e.addClass("disabled").text("已购买"),h({module:"coursegroup_inner",action:"paysuccess-clk",ver1:i,ver2:_t.cid,uin:E.cookie.uin()})}};ut.init({rawData:_t,opt:n})}}function R(e){var t=e.index();_t.course_package=_t.course_packageList[t],e.addClass("current").siblings().removeClass("current"),jt.addClass("hide").eq(t).removeClass("hide")}function I(){var e,t=E.bom.query("enter_room"),i="";if(t&&(e=E(".js-task-live-open")[0])){E(_t.terms).each(function(e,t){t.term_id==_t.cur_term_id&&(i=t.room_url)});var n=E('<span data-cid="'+bt+'" data-tid="'+_t.cur_term_id+'" data-target="'+i+'"></span>');setTimeout(function(){E.render.url.live(n[0])},0)}}function P(){jt.each(function(){var e=E(this);tt=new V({container:e.find(".pkg-course"),btnForward:".pkg-course-slide--left",btnNext:".pkg-course-slide--right",stepLength:252})})}function H(){if(E.cookie.get("isHideDealTips"))return!1;var e='<div class="dealtips"><div class="inner-center">';e+='<i class="icon-font i-info"></i>',e+="&nbsp;与老师或机构私下交易会造成经济损失，若曾经有老师向你提出私下交易，请立即投诉。",e+='<a href="http://support.ke.qq.com/forum.php?mod=viewthread&tid=1298&extra=page%3D1" target="_blank">了解更多</a>',e+='<span class="js-dealtips-close"><i class="icon-font i-close"></i></span></div></div>',E("header").after(e),E(".js-dealtips-close").on("click",function(){S()})}function L(){for(var e=_t.terms,t=0;t<e.length;t++)if(1===e[t].installment_type&&(200===e[t].installment_state||201===e[t].installment_state))for(var i=1;i<e[t].term_installment.length;i++){var n=e[t].term_installment[i];if(n.installment_begin-_t.sys_time<604800&&5!==n.order_state){var a='<div class="dealtips js-installment-tips"><div class="inner-center ">';return a+='<i class="icon-font i-info"></i>',a+="&nbsp;该课程即将到期，请及时支付分期款。点此",a+='<a href="javascript:void(0);" class="js-apply-btn-instalment">立即付款</a>',a+="</div></div>",E("header").after(a),!0}}return!1}function S(){E.cookie.set("isHideDealTips",1),E(".dealtips").remove()}function A(){var e=E.bom.query("channel");"cjol"===e&&(E("#js-nav-cjol").show(),E("body").addClass("cjol-padding"),wt.addClass("cjol-top"))}function M(){return TRecord.push("page_main_start"),it=(new Date).getTime(),A(),ct.init(),w(),b(),et=E(document.body),vt=E.bom.query("preview")>>0===1,j(),2===_t.payid&&z.init(_t),L()||H(),at.fillCommentCount(bt,E(".js-comment-total")),P(),W.init({isPreviewMode:vt}),nt.init({changeTab:n,prevModeALink:j}),dt.init(),m(_t),TRecord.push("page_render_end"),f(),ot(bt,"#js_basic_tab",{isPreview:vt,aid:_t.aid}),st.load(Ct),k(),q(),I(),y(),C(),_t?(vt&&E(".js_tab .tabs-tt[ref=js_dir_tab]").click(),Q.init(),void TRecord.push("page_main_end")):gt("vm数据不存在",location.href,0,410348,2)}var E=e("jquery"),O=e("@tencent/im-edu-db/edu-db"),F=e("@tencent/im-edu-report/edu-report"),B=e("@tencent/im-edu-report/edu-report-nolocal"),J=e("@tencent/im-edu-user/index"),G=e("@tencent/im-edu-login/edu-login"),N=e("@tencent/im-edu-user/src/user.local"),Q=e("@tencent/im-edu-agency-hash/edu-agency-hash"),U=(e("@tencent/im-client.share/client.share"),e("@tencent/im-edu-html/edu-html")),V=(e("@tencent/im-pagectrl/pagectrl"),e("@tencent/im-edu-course-slide/index")),W=e("courseDetail/modules/recommend"),z=e("courseDetail/modules/discount"),K=e("sale/saleDialog/index"),X=e("@tencent/im-local.data/local.data"),Y=e("@tencent/im-edu-pay-coursepkg/accept-pkg-course"),Z=e("@tencent/im-edu-instalment-pay/index");e("@tencent/im-modal/modal"),e("@tencent/im-report.pagelocation/report.pagelocation"),e("courseDetail/db.courseDetail"),e("edu-base"),e("@tencent/im-edu-pay/reserve"),e("@tencent/im-edu-pay/present"),e("@tencent/im-edu-pay/applyPay"),e("@tencent/im-get-client-version/get-client-version"),e("@tencent/im-edu-render/edu-render");var $,et,tt,it,nt=e("courseDetail/modules/term"),at=e("courseDetail/modules/comments"),ct=e("courseDetail/modules/classes"),ot=e("@tencent/im-edu-course-detail/modules/checkVideo"),rt=e("courseDetail/modules/apply"),st=e("@tencent/im-state/state"),lt=e("courseDetail/modules/fav"),dt=e("courseDetail/modules/file"),ut=e("@tencent/im-edu-pay-coursepkg/index"),pt=e("@tencent/im-str-ellipsis/str-ellipsis"),mt=F.getApplyPath||E.noop,ft=e("@tencent/im-check/check"),_t=window.metaData,gt=window.Badjs,vt=!1,ht=!1,bt=_t.cid,yt="",kt=E(window),jt=E(".js-package-content"),wt=E("#js_float_tab"),Ct={showComments:function(e){"true"===e&&setTimeout(function(){n("js_comment_tab",{fromHash:!0}),E(window).scrollTop(E("#js_tab").offset().top)},0)},from:function(e){e=E.bom.query("from"),e>=2e3&&2999>=e&&"function"==typeof enterRoomFrom3rd&&enterRoomFrom3rd()},pay:function(e){if(e){var t=(_t.cur_term_id,E(".js-apply-btn-apply").eq(0));a("pay")&&0!==t.length&&t.click()}},dialog:function(e){if(e){var t=E(".js-apply-btn-apply");a("dialog")&&0!==t.length&&t.click()}},present:function(e){if(e){var t=E(".js-apply-btn-accept"),i=_t.cur_term_id;0!==t.length&&(i?rt.accept({curTermId:i},function(e){u(e,i)}):t.click())}},fav:function(){var e=E.bom.getHash("fav");if(e){var t=E("#js_fav");!t.hasClass("high-hide")&&t.click()}}};_t.isReg=!1,_t.course_package=_t.course_packageList?_t.course_packageList[0]:{},J.getInfo().then(function(e){v({ver1:_t?_t.cid||E.bom.query("course_id"):E.bom.query("course_id"),obj3:e.role_type,platform:1}),E(".section--course-package").length>0&&h({action:"CourseGroup_expo",ver2:_t.aid});var t=E.bom.query("datag");t+""&&h({ver1:t,action:"FromQQClient"})}),M(),setTimeout(function(){x()},100)});
window.__loadJs&&window.__loadJs('/modules/courseDetail/mod.main.live.910be7cc.js',2);