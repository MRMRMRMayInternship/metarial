define("wkview:widget/view_recom_thirdad/view_recom_thirdad.js",function(e,a,t){var d=e("wkcommon:widget/ui/lib/jquery/jquery.js"),n=e("wkcommon:widget/lib/doT/doT.min.js"),c=e("wkcommon:widget/ui/lib/inCharset/inCharset.js"),i=e("wkcommon:widget/ui/js_core/log/log.js"),o=e("wkview:widget/view_recom_thirdad/goldclue-content/goldclue-content.js"),r=e("wkcommon:widget/lib/fis/data/data.js"),l={init:function(e,a){var t=this;e=e.data,t.cbRecomAdSolved="function"==typeof a?a:function(){},t.mofangData=e,t.temp=0,t.fcEid=+e.eid||0,t.rightFc=e&&e.right_fengchao_ad?e.right_fengchao_ad:"",t.readFc=e&&e.read_fengchao_ad?e.read_fengchao_ad:"",t.rightWm=e&&e.recommend_ad_wangmeng?e.recommend_ad_wangmeng:"",t.goldClue=e&&e.right_fengchao_gold_ad?e.right_fengchao_gold_ad:"",t.pptFcAd=e&&e.ppt_fengchao_ad?e.ppt_fengchao_ad:"",t.wenji="",t.getOwnerAd();var n={rightFc:t.rightFc,readFc:t.readFc};if(d.event.trigger("fc:monitorPv",{type:"responsePv",result:n}),t.readFc&&t.readFc.ad_place_data&&"object"==typeof t.readFc.ad_place_data?d.event.trigger("docloadOwnData",t.readFc):!t.goldClue&&t.readFc&&t.fcEid&&t.readFc.ad_place_data&&"object"!=typeof t.readFc.ad_place_data?d.event.trigger("docloadFCData",{readFc:t.readFc,fcEid:t.fcEid,callback:t.handleFcJumpLink}):t.goldClue||d.event.trigger("docloadWmData"),t.pptFcAd&&d.event.trigger("showPptFcAd",{pptFcAd:t.pptFcAd,callback:t.handleFcJumpLink}),t.goldClue){var c=e,o=r.get("WkInfo").DocInfo.docId;d.ajax({url:"/org/interface/getcorpusinfo?doc_id="+o,type:"get",success:function(e){0===+e.status.code&&(t.wenji=e.data,d(".goldclue-wrap").length>0&&t.renderGoldClue(c,e.data),e.data.goldClue=t.goldClue,d.event.trigger("showendPageGoldClueAd",e.data),i.xsend(1,101055))}})}t.logObj={},t.fcEid&&t.logNum(t.fcEid),t.events()},renderGoldClue:function(e,a){var t=(e.right_fengchao_gold_ad.ad_place_data.url,'<div class="goldclue-content">\n<div class="goldclue-head">\n<p class="goldclue-count"><em>{{= it.data.corpus_list.length}}</em>\u7bc7</p>\n<p class="goldclue-title">\u76f8\u5173\u7cbe\u54c1\u6587\u8f91</p>\n<p class="goldclue-notes"><em>{{= it.data.down_count}}</em>\u4eba\u5df2\u4e0b\u8f7d</p>\n</div>\n<ul class="goldclue-main">\n{{~it.data.show_corpus :item:i}}{{? i< 3}}\n		<li><a><span class="ic ic-{{= item[2]}}"></span>{{= item[1]}}</a></li>\n{{?}}{{~}}</ul>\n<div class="goldclue-bottom">\n\u67e5\u770b\u5168\u90e8<em>{{= it.data.corpus_list.length}}</em>\u7bc7\u6587\u6863 ></div>\n</div>');t=n.template(t),d(".goldclue-wrap").html(t({data:a}))},renderLikeRecomFc:function(e){var a=this;d(".frist-item").html(e.ad_place_data);var t=e.ad_place_js,n="<script>"+t+"</script>";d("head").append(n);var o=d(".frist-item h1").text()||"",l=d(".frist-item p span").eq(0).text()||"",s=r.get("WkInfo").DocInfo.title||"",g=a.mofangData.query||"",p=a.mofangData.hasOwnProperty("callbk_tag")?a.mofangData.callbk_tag:100;s=s+"|"+o+"|"+g,(new c.InCharset).get(s,"gbk",function(e){i.xsend(1,100939,{callbk_tag:p,adTitle:e,clickUrl:l,refer:document.referrer,eid:a.fcEid})}),a.handleFcJumpLink(d(".frist-item"))},renderLikeRecomWm:function(){var e='<div class="item wangmeng_income">\n<div class="doc-title rt-wangmeng-title">\n<b class="ic ic-wangmeng"></b>\n<div id="cpro_u3075403" class="rt-wangmeng-wrap"></div>\n<script type="text/javascript">\n			(window.cproArray = window.cproArray || []).push({\n				id: "u3075403"\n			});\n		</script>\n<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>\n</div>\n<div class="tail-info">\n<span style="width: 58%; display: inline-block;">www.baidu.com</span><span class="gd-g-u gd-u-3-8">\u641c\u7d22\u63a8\u8350</span>\n</div>\n</div>';e=n.template(e),d(".frist-item").html(e()),i.xsend(1,100945)},handleFcJumpLink:function(e){var a=e;if(a.length){var t=a.find("a"),n=new RegExp("(^|&)(tn|from)=([^&]*)(&|$)"),c=window.location.search.substr(1).match(n),i="";t.each(function(){var e=d(this).attr("href");e.indexOf("www.baidu.com/baidu.php")>-1&&(null!==c?(i=unescape(c[3]),e=e+"&shh=wenku.baidu.com&sht="+i):e+="&shh=wenku.baidu.com",d(this).attr("href",e))})}},getQueryString:function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(a);return null!=t?unescape(t[2]):null},getOwnerAd:function(){var e=this,a=r.get("WkInfo").DocInfo?r.get("WkInfo").DocInfo.jiaoyu_vip_type:0;return a?void e.cbRecomAdSolved():void d.ajax({type:"get",url:"/shifen/get?pid=79&tid=1&t="+(new Date-0),dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQuery1101044385951719611816_1479991920168",success:function(a){document.referrer;if(a[0].tpl_data){var t=a[0].tpl_data,n=!1;"cpl_ad_028,cpl_ad_029,cpl_ad_030".search(t.pc[0].xpageId)>-1&&(n=!0);var c=['<p class="doc-title" style="text-overflow: ellipsis; overflow: hidden;">','<b class="ic ic-'+(n?"gift":"pdf")+'">',"</b>",'<a href="javascript:;" class="rec-items A-relate-doc logSend log-xsend raw-income" data-count="'+t.pc[0].showCount+'" data-xpage="'+t.pc[0].xpageId+'" data-url="'+a[0].url+'" data-fun="raw-income" title="'+t.pc[0].showTitle+'" data-adId="'+a[0].ad_id+'">',t.pc[0].showTitle,'</a></p><div class="gd-g tail-info"><div class="gd-g-u gd-u-',n?"23":"11",'-24 gd-value"><span>',t.pc[0].showCount,"</span>\u4eba"+(n?"\u5df2\u9884\u7ea6":"\u4e0b\u8f7d")+"</div>",n?"":'<div class="gd-g-u gd-u-1-4">&nbsp;',n?"":t.pc[0].showNum,n?"":"\u7bc7</div></div>"].join("");d(".frist-item").html(c),i.xsend(1,100997),n&&i.xsend(1,101105,{id:a[0].ad_id,index:1}),e.cbRecomAdSolved()}else e.renderLikeRecomFcOrWm(),e.cbRecomAdSolved()},error:function(){e.renderLikeRecomFcOrWm(),e.cbRecomAdSolved()}})},renderLikeRecomFcOrWm:function(){var e=this;e.rightFc&&e.rightFc.ad_place_data&&(e.renderLikeRecomFc(e.rightFc),d.event.trigger("fc:monitorPv",{type:"realShowPv",position:"right",el:d("#add-new")})),e.rightWm&&e.renderLikeRecomWm(e.rightWm)},logNum:function(e){var a=this;62307102===e&&a.rightFc&&a.rightFc.ad_place_data?a.logObj.id="101026":82307102===e&&a.readFc&&a.readFc.ad_place_data?a.logObj.id="101027":72307102===e&&a.readFc&&a.readFc.ad_place_data&&(a.logObj.id="101028"),a.logObj.id&&(d(".more-btn-banner .banner-download").on("click",function(){i.xsend(1,a.logObj.id,{index:1})}),d(".pay-page-inner .reader-download").on("click",function(){i.xsend(1,a.logObj.id,{index:2})}),d(".pay-page-inner .btn-login-joinvip-rightnow").on("click",function(){i.xsend(1,a.logObj.id,{index:3})}),d(".more-btn-banner .goBtn").on("click",function(){i.xsend(1,a.logObj.id,{index:4})}))},events:function(){var e=this;d(".goldclue-wrap").on("click",function(a){var t=d(a.target);if(!t.hasClass("goldclue-notes")){i.xsend(1,101056);var n=e.goldClue;e.temp||d(".goldclue-wrap").hasClass("second-click")?new o(n,e.wenji,3):(new o(n,e.wenji,1),d(".goldclue-wrap").hasClass("second-click")||d(".goldclue-wrap").addClass("second-click"),e.temp=e.temp+1)}})}};t.exports=l});